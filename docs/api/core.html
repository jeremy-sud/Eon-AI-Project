<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 16.0.0"/>
    <title>core API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:27px;vertical-align:bottom;width:50px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="index.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;
                Module Index
            </a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#AeonBirth">AeonBirth</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AeonBirth.__init__">AeonBirth</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.data_dir">data_dir</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.created_at">created_at</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.samples_learned">samples_learned</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.excavation_result">excavation_result</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.esn">esn</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.birth_hash">birth_hash</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.sacred_seed">sacred_seed</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.initialization_mode">initialization_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#AeonBirth.age">age</a>
                        </li>
                        <li>
                                <a class="function" href="#AeonBirth.get_status">get_status</a>
                        </li>
                        <li>
                                <a class="function" href="#AeonBirth.learn">learn</a>
                        </li>
                        <li>
                                <a class="function" href="#AeonBirth.predict">predict</a>
                        </li>
                        <li>
                                <a class="function" href="#AeonBirth.save">save</a>
                        </li>
                        <li>
                                <a class="function" href="#AeonBirth.load">load</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UniversalMiner">UniversalMiner</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UniversalMiner.__init__">UniversalMiner</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.PHI">PHI</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.FIBONACCI">FIBONACCI</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.PRIMES">PRIMES</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.reservoir_size">reservoir_size</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.target_resonance">target_resonance</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.resonance_type">resonance_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.sparsity">sparsity</a>
                        </li>
                        <li>
                                <a class="function" href="#UniversalMiner.chaos_sample">chaos_sample</a>
                        </li>
                        <li>
                                <a class="function" href="#UniversalMiner.measure_resonance">measure_resonance</a>
                        </li>
                        <li>
                                <a class="function" href="#UniversalMiner.excavate">excavate</a>
                        </li>
                        <li>
                                <a class="function" href="#UniversalMiner.excavate_fast">excavate_fast</a>
                        </li>
                        <li>
                                <a class="function" href="#UniversalMiner.scale_to_resonance">scale_to_resonance</a>
                        </li>
                        <li>
                                <a class="variable" href="#UniversalMiner.excavation_history">excavation_history</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ExcavationResult">ExcavationResult</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ExcavationResult.__init__">ExcavationResult</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExcavationResult.sacred_seed">sacred_seed</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExcavationResult.divine_matrix">divine_matrix</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExcavationResult.resonance">resonance</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExcavationResult.resonance_type">resonance_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExcavationResult.excavation_depth">excavation_depth</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExcavationResult.excavation_time">excavation_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExcavationResult.eigenspectrum">eigenspectrum</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ResonanceType">ResonanceType</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#ResonanceType.EDGE_OF_CHAOS">EDGE_OF_CHAOS</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResonanceType.HARMONIC">HARMONIC</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResonanceType.GOLDEN">GOLDEN</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResonanceType.FIBONACCI">FIBONACCI</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResonanceType.PRIME">PRIME</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SeedVault">SeedVault</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SeedVault.store">store</a>
                        </li>
                        <li>
                                <a class="function" href="#SeedVault.retrieve">retrieve</a>
                        </li>
                        <li>
                                <a class="function" href="#SeedVault.invoke">invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#SeedVault.list_seeds">list_seeds</a>
                        </li>
                        <li>
                                <a class="function" href="#SeedVault.export">export</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#quick_excavate">quick_excavate</a>
            </li>
            <li>
                    <a class="variable" href="#KNOWN_SACRED_SEEDS">KNOWN_SACRED_SEEDS</a>
            </li>
            <li>
                    <a class="class" href="#ArchaicProtocol">ArchaicProtocol</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ArchaicProtocol.__init__">ArchaicProtocol</a>
                        </li>
                        <li>
                                <a class="variable" href="#ArchaicProtocol.mode">mode</a>
                        </li>
                        <li>
                                <a class="function" href="#ArchaicProtocol.tensor_to_hexagram">tensor_to_hexagram</a>
                        </li>
                        <li>
                                <a class="function" href="#ArchaicProtocol.vector_to_trigram_pair">vector_to_trigram_pair</a>
                        </li>
                        <li>
                                <a class="function" href="#ArchaicProtocol.hexagram_to_tensor">hexagram_to_tensor</a>
                        </li>
                        <li>
                                <a class="function" href="#ArchaicProtocol.interpret">interpret</a>
                        </li>
                        <li>
                                <a class="function" href="#ArchaicProtocol.encode_message">encode_message</a>
                        </li>
                        <li>
                                <a class="function" href="#ArchaicProtocol.decode_message">decode_message</a>
                        </li>
                        <li>
                                <a class="function" href="#ArchaicProtocol.consult_oracle">consult_oracle</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Hexagram">Hexagram</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Hexagram.__init__">Hexagram</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.number">number</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.name_chinese">name_chinese</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.name_english">name_english</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.name_spanish">name_spanish</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.upper">upper</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.lower">lower</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.judgment">judgment</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.image">image</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.lines">lines</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.binary">binary</a>
                        </li>
                        <li>
                                <a class="variable" href="#Hexagram.symbol">symbol</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Trigram">Trigram</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Trigram.QIAN">QIAN</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.DUI">DUI</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.LI">LI</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.ZHEN">ZHEN</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.XUN">XUN</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.KAN">KAN</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.GEN">GEN</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.KUN">KUN</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.symbol">symbol</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trigram.meaning">meaning</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#HexagramStream">HexagramStream</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#HexagramStream.protocol">protocol</a>
                        </li>
                        <li>
                                <a class="function" href="#HexagramStream.broadcast">broadcast</a>
                        </li>
                        <li>
                                <a class="function" href="#HexagramStream.receive">receive</a>
                        </li>
                        <li>
                                <a class="function" href="#HexagramStream.collective_reading">collective_reading</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#HEXAGRAMS">HEXAGRAMS</a>
            </li>
            <li>
                    <a class="class" href="#AlchemicalPipeline">AlchemicalPipeline</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AlchemicalPipeline.__init__">AlchemicalPipeline</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPipeline.config">config</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPipeline.state">state</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPipeline.kalman">kalman</a>
                        </li>
                        <li>
                                <a class="function" href="#AlchemicalPipeline.nigredo">nigredo</a>
                        </li>
                        <li>
                                <a class="function" href="#AlchemicalPipeline.albedo">albedo</a>
                        </li>
                        <li>
                                <a class="function" href="#AlchemicalPipeline.rubedo">rubedo</a>
                        </li>
                        <li>
                                <a class="function" href="#AlchemicalPipeline.transmute">transmute</a>
                        </li>
                        <li>
                                <a class="function" href="#AlchemicalPipeline.get_visualization_state">get_visualization_state</a>
                        </li>
                        <li>
                                <a class="function" href="#AlchemicalPipeline.visualize_ascii">visualize_ascii</a>
                        </li>
                        <li>
                                <a class="function" href="#AlchemicalPipeline.reset">reset</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AlchemicalConfig">AlchemicalConfig</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AlchemicalConfig.__init__">AlchemicalConfig</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.kalman_process_noise">kalman_process_noise</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.kalman_measurement_noise">kalman_measurement_noise</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.remove_outliers">remove_outliers</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.outlier_threshold">outlier_threshold</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.use_moving_average">use_moving_average</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.window_size">window_size</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.normalize">normalize</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalConfig.on_phase_change">on_phase_change</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AlchemicalPhase">AlchemicalPhase</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#AlchemicalPhase.MATERIA_PRIMA">MATERIA_PRIMA</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPhase.NIGREDO">NIGREDO</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPhase.ALBEDO">ALBEDO</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPhase.CITRINITAS">CITRINITAS</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPhase.RUBEDO">RUBEDO</a>
                        </li>
                        <li>
                                <a class="variable" href="#AlchemicalPhase.OPUS_COMPLETE">OPUS_COMPLETE</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TransmutationState">TransmutationState</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TransmutationState.__init__">TransmutationState</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.current_phase">current_phase</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.nigredo_samples">nigredo_samples</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.albedo_samples">albedo_samples</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.rubedo_predictions">rubedo_predictions</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.noise_removed_percent">noise_removed_percent</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.prediction_confidence">prediction_confidence</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.phase_start_time">phase_start_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.nigredo_duration">nigredo_duration</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.albedo_duration">albedo_duration</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.rubedo_duration">rubedo_duration</a>
                        </li>
                        <li>
                                <a class="variable" href="#TransmutationState.transmutation_count">transmutation_count</a>
                        </li>
                        <li>
                                <a class="function" href="#TransmutationState.to_dict">to_dict</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#KalmanFilter">KalmanFilter</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#KalmanFilter.__init__">KalmanFilter</a>
                        </li>
                        <li>
                                <a class="variable" href="#KalmanFilter.Q">Q</a>
                        </li>
                        <li>
                                <a class="variable" href="#KalmanFilter.R">R</a>
                        </li>
                        <li>
                                <a class="variable" href="#KalmanFilter.x">x</a>
                        </li>
                        <li>
                                <a class="variable" href="#KalmanFilter.P">P</a>
                        </li>
                        <li>
                                <a class="function" href="#KalmanFilter.update">update</a>
                        </li>
                        <li>
                                <a class="function" href="#KalmanFilter.filter_sequence">filter_sequence</a>
                        </li>
                        <li>
                                <a class="function" href="#KalmanFilter.reset">reset</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22160%22%20viewBox%3D%220%200%20150%2080%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M132.316%2048.886c.276-4.679%202.342-6.698%204.409-7.982s4.27-1.165%206.751-1.055c1.586.07%203.044.156%204.222-.482%201.142-.619%202.026-1.932%202.162-3.739.268-3.576-1.929-5.368-5.006-5.551s-7.599.524-10.517%201.606c-4.455%201.652-8.588%206.606-9.552%208.992s-2.342%206.193-1.745%2010.873%202.664%209.221%205.878%2011.79%205.878%203.808%2010.103%204.312%203.444.229%206.062.229%205.006-2.202%204.914-4.909-2.296-5.001-4.501-4.863-3.077.505-5.281.229-7.715-2.064-7.899-9.451z%22%20fill%3D%22%23198754%22/%3E%3Ccircle%20cx%3D%22101.504%22%20cy%3D%2248.943%22%20r%3D%2214.208%22%20fill%3D%22none%22%20stroke%3D%22%23198754%22%20stroke-width%3D%229.354%22/%3E%3Cpath%20d%3D%22M87.81.002c-3.637.065-5.001.454-7.014%201.232s-3.443%201.363-6.3%204.282c-1.723%201.76-3.148%205.019-3.776%207.329-.413%201.521-.316%202.63-.316%202.63l-.195%2034.612c.065%205.774-6.755%208.305-9.612%208.37s-9.678-1.038-9.743-9.408%207.128-9.521%208.362-9.521c1.413-.13%202.526-.021%203.718-.016%202.071.009%204.157-.778%204.092-4.671s-4.157-4.736-4.157-4.736c-6.3-.843-11.43%202.206-11.43%202.206S40.917%2038.15%2041.372%2049.634%2051.568%2068.19%2061.311%2068.125s18.316-7.007%2018.445-17.193l.13-22.772c.046-2.291%202.683-3.644%204.476-4.203.745-.232%201.694-.274%201.694-.274l10.457-.13s4.871-.324%207.729-3.114%204.352-6.294%204.352-6.294.974-3.049.13-4.606-.195-1.233-2.792-3.309-8.573-4.477-8.573-4.477S91.447-.063%2087.81.002zM0%2047.169l.065%2028.417S0%2080.127%204.481%2079.997s5.072-3.866%205.049-4.152l-.113-28.482s1.624-7.656%209.937-7.721%2010.002%206.942%2010.002%208.499-.909%2010.51-9.093%2010.51c-.948%200-2.99-.567-4.145-.272-3.919%201-3.194%204.554-3.194%204.554s.065%205.061%207.404%204.996%2018.575-6.034%2018.575-19.074S26.953%2030.04%2019.549%2029.91%201.234%2035.296%200%2047.169z%22%20fill%3D%22%23198754%22/%3E%3Cg%20transform%3D%22matrix%28.325601%200%200%20.325256%20-10.32669%20-45.802786%29%22%3E%3Ccircle%20cx%3D%22297.554%22%20cy%3D%22172.286%22%20r%3D%2216.5%22%20fill%3D%22%23fff%22/%3E%3Cellipse%20cx%3D%22297.709%22%20cy%3D%22172.642%22%20rx%3D%2211.071%22%20ry%3D%2210.871%22%20fill%3D%22%23105a48%22/%3E%3Ccircle%20cx%3D%22304.104%22%20cy%3D%22167.667%22%20r%3D%224.5%22%20fill%3D%22%23fff%22/%3E%3C/g%3E%3Cpath%20d%3D%22M94.661%2017.032l.893-1.476s.99.714%201.916.925%201.575.114%202.955.114l14.565-.162c1.283-.032%203.085-.762%203.02-3.293s-.373-3.503-.373-3.503l1.283-.487s.52.503.877%201.573.309%201.995.292%202.66-.227%201.541-.227%201.541%201.564-.308%202.359-1.038.823-.779%201.489-1.508.812-.86.812-.86.552-.13.877.26.341.957.065%201.46-1.672%202.206-3.247%203.066-2.76%201.427-3.929%201.768-3.848.73-7.063.714l-10.944-.114s-2.143-.081-3.02-.373-2.241-.973-2.598-1.265z%22%20fill%3D%22%23d36d49%22/%3E%3Cg%20fill%3D%22%23105a48%22%3E%3Cellipse%20cx%3D%2293.052%22%20cy%3D%2243.567%22%20rx%3D%22.869%22%20ry%3D%221.014%22%20transform%3D%22rotate%28341.022%29%22/%3E%3Cellipse%20cx%3D%22104.3%22%20cy%3D%22-16.184%22%20rx%3D%22.865%22%20ry%3D%221.009%22%20transform%3D%22rotate%2814.786%29%22/%3E%3C/g%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
core    </h1>

                
                        <input id="mod-core-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-core-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="c1"># Core module - Proyecto EÃ³n</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a><span class="c1"># &quot;La inteligencia no se crea, se descubre.&quot;</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.aeon_birth</span><span class="w"> </span><span class="kn">import</span> <span class="n">AeonBirth</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a><span class="c1"># Paradigma de Descubrimiento (Revealed Intelligence)</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.universal_miner</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a>    <span class="n">UniversalMiner</span><span class="p">,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a>    <span class="n">ExcavationResult</span><span class="p">,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>    <span class="n">ResonanceType</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a>    <span class="n">SeedVault</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a>    <span class="n">quick_excavate</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a>    <span class="n">KNOWN_SACRED_SEEDS</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a><span class="p">)</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a><span class="c1"># Protocolo Arcaico (I Ching Communication)</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.archaic_protocol</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a>    <span class="n">ArchaicProtocol</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a>    <span class="n">Hexagram</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">20</span></a>    <span class="n">Trigram</span><span class="p">,</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">21</span></a>    <span class="n">HexagramStream</span><span class="p">,</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">22</span></a>    <span class="n">HEXAGRAMS</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">23</span></a><span class="p">)</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos">25</span></a><span class="c1"># Pipeline AlquÃ­mico (ETL Transmutation)</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">26</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.alchemy</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">27</span></a>    <span class="n">AlchemicalPipeline</span><span class="p">,</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">28</span></a>    <span class="n">AlchemicalConfig</span><span class="p">,</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">29</span></a>    <span class="n">AlchemicalPhase</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">30</span></a>    <span class="n">TransmutationState</span><span class="p">,</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">31</span></a>    <span class="n">KalmanFilter</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">32</span></a><span class="p">)</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos">34</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">35</span></a>    <span class="c1"># Core</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">36</span></a>    <span class="s1">&#39;AeonBirth&#39;</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">37</span></a>    
</span><span id="L-38"><a href="#L-38"><span class="linenos">38</span></a>    <span class="c1"># Seed Mining</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">39</span></a>    <span class="s1">&#39;UniversalMiner&#39;</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">40</span></a>    <span class="s1">&#39;ExcavationResult&#39;</span><span class="p">,</span> 
</span><span id="L-41"><a href="#L-41"><span class="linenos">41</span></a>    <span class="s1">&#39;ResonanceType&#39;</span><span class="p">,</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">42</span></a>    <span class="s1">&#39;SeedVault&#39;</span><span class="p">,</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">43</span></a>    <span class="s1">&#39;quick_excavate&#39;</span><span class="p">,</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">44</span></a>    <span class="s1">&#39;KNOWN_SACRED_SEEDS&#39;</span><span class="p">,</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">45</span></a>    
</span><span id="L-46"><a href="#L-46"><span class="linenos">46</span></a>    <span class="c1"># Archaic Protocol</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">47</span></a>    <span class="s1">&#39;ArchaicProtocol&#39;</span><span class="p">,</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">48</span></a>    <span class="s1">&#39;Hexagram&#39;</span><span class="p">,</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">49</span></a>    <span class="s1">&#39;Trigram&#39;</span><span class="p">,</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">50</span></a>    <span class="s1">&#39;HexagramStream&#39;</span><span class="p">,</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">51</span></a>    <span class="s1">&#39;HEXAGRAMS&#39;</span><span class="p">,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">52</span></a>    
</span><span id="L-53"><a href="#L-53"><span class="linenos">53</span></a>    <span class="c1"># Alchemical Pipeline</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">54</span></a>    <span class="s1">&#39;AlchemicalPipeline&#39;</span><span class="p">,</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">55</span></a>    <span class="s1">&#39;AlchemicalConfig&#39;</span><span class="p">,</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">56</span></a>    <span class="s1">&#39;AlchemicalPhase&#39;</span><span class="p">,</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">57</span></a>    <span class="s1">&#39;TransmutationState&#39;</span><span class="p">,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">58</span></a>    <span class="s1">&#39;KalmanFilter&#39;</span><span class="p">,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">59</span></a><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="AeonBirth">
                            <input id="AeonBirth-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AeonBirth</span>:

                <label class="view-source-button" for="AeonBirth-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth-20"><a href="#AeonBirth-20"><span class="linenos"> 20</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AeonBirth</span><span class="p">:</span>
</span><span id="AeonBirth-21"><a href="#AeonBirth-21"><span class="linenos"> 21</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AeonBirth-22"><a href="#AeonBirth-22"><span class="linenos"> 22</span></a><span class="sd">    Wrapper para EchoStateNetwork que maneja el ciclo de vida,</span>
</span><span id="AeonBirth-23"><a href="#AeonBirth-23"><span class="linenos"> 23</span></a><span class="sd">    persistencia y metadatos de una instancia de EÃ³n.</span>
</span><span id="AeonBirth-24"><a href="#AeonBirth-24"><span class="linenos"> 24</span></a><span class="sd">    </span>
</span><span id="AeonBirth-25"><a href="#AeonBirth-25"><span class="linenos"> 25</span></a><span class="sd">    Paradigma de Descubrimiento:</span>
</span><span id="AeonBirth-26"><a href="#AeonBirth-26"><span class="linenos"> 26</span></a><span class="sd">    ============================</span>
</span><span id="AeonBirth-27"><a href="#AeonBirth-27"><span class="linenos"> 27</span></a><span class="sd">    &quot;La inteligencia no se crea, se descubre.&quot;</span>
</span><span id="AeonBirth-28"><a href="#AeonBirth-28"><span class="linenos"> 28</span></a><span class="sd">    </span>
</span><span id="AeonBirth-29"><a href="#AeonBirth-29"><span class="linenos"> 29</span></a><span class="sd">    Este mÃ³dulo soporta dos modos de inicializaciÃ³n:</span>
</span><span id="AeonBirth-30"><a href="#AeonBirth-30"><span class="linenos"> 30</span></a><span class="sd">    </span>
</span><span id="AeonBirth-31"><a href="#AeonBirth-31"><span class="linenos"> 31</span></a><span class="sd">    1. Modo ClÃ¡sico (random_state):</span>
</span><span id="AeonBirth-32"><a href="#AeonBirth-32"><span class="linenos"> 32</span></a><span class="sd">       Usa una semilla aleatoria tradicional.</span>
</span><span id="AeonBirth-33"><a href="#AeonBirth-33"><span class="linenos"> 33</span></a><span class="sd">       </span>
</span><span id="AeonBirth-34"><a href="#AeonBirth-34"><span class="linenos"> 34</span></a><span class="sd">    2. Modo Descubrimiento (sacred_seed / auto_excavate):</span>
</span><span id="AeonBirth-35"><a href="#AeonBirth-35"><span class="linenos"> 35</span></a><span class="sd">       Excava en el espacio matemÃ¡tico para encontrar una</span>
</span><span id="AeonBirth-36"><a href="#AeonBirth-36"><span class="linenos"> 36</span></a><span class="sd">       estructura naturalmente resonante.</span>
</span><span id="AeonBirth-37"><a href="#AeonBirth-37"><span class="linenos"> 37</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AeonBirth-38"><a href="#AeonBirth-38"><span class="linenos"> 38</span></a>    
</span><span id="AeonBirth-39"><a href="#AeonBirth-39"><span class="linenos"> 39</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="AeonBirth-40"><a href="#AeonBirth-40"><span class="linenos"> 40</span></a>        <span class="bp">self</span><span class="p">,</span> 
</span><span id="AeonBirth-41"><a href="#AeonBirth-41"><span class="linenos"> 41</span></a>        <span class="n">n_reservoir</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> 
</span><span id="AeonBirth-42"><a href="#AeonBirth-42"><span class="linenos"> 42</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Eon-Instance&quot;</span><span class="p">,</span> 
</span><span id="AeonBirth-43"><a href="#AeonBirth-43"><span class="linenos"> 43</span></a>        <span class="n">data_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
</span><span id="AeonBirth-44"><a href="#AeonBirth-44"><span class="linenos"> 44</span></a>        <span class="n">sacred_seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AeonBirth-45"><a href="#AeonBirth-45"><span class="linenos"> 45</span></a>        <span class="n">auto_excavate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AeonBirth-46"><a href="#AeonBirth-46"><span class="linenos"> 46</span></a>        <span class="n">target_resonance</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="AeonBirth-47"><a href="#AeonBirth-47"><span class="linenos"> 47</span></a>    <span class="p">):</span>
</span><span id="AeonBirth-48"><a href="#AeonBirth-48"><span class="linenos"> 48</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AeonBirth-49"><a href="#AeonBirth-49"><span class="linenos"> 49</span></a><span class="sd">        Inicializa una instancia de EÃ³n.</span>
</span><span id="AeonBirth-50"><a href="#AeonBirth-50"><span class="linenos"> 50</span></a><span class="sd">        </span>
</span><span id="AeonBirth-51"><a href="#AeonBirth-51"><span class="linenos"> 51</span></a><span class="sd">        Args:</span>
</span><span id="AeonBirth-52"><a href="#AeonBirth-52"><span class="linenos"> 52</span></a><span class="sd">            n_reservoir: TamaÃ±o del reservorio</span>
</span><span id="AeonBirth-53"><a href="#AeonBirth-53"><span class="linenos"> 53</span></a><span class="sd">            name: Nombre de la instancia</span>
</span><span id="AeonBirth-54"><a href="#AeonBirth-54"><span class="linenos"> 54</span></a><span class="sd">            data_dir: Directorio para persistencia</span>
</span><span id="AeonBirth-55"><a href="#AeonBirth-55"><span class="linenos"> 55</span></a><span class="sd">            sacred_seed: Semilla sagrada pre-descubierta (modo descubrimiento)</span>
</span><span id="AeonBirth-56"><a href="#AeonBirth-56"><span class="linenos"> 56</span></a><span class="sd">            auto_excavate: Si True, excava automÃ¡ticamente para encontrar semilla</span>
</span><span id="AeonBirth-57"><a href="#AeonBirth-57"><span class="linenos"> 57</span></a><span class="sd">            target_resonance: Rango de resonancia objetivo para auto-excavaciÃ³n</span>
</span><span id="AeonBirth-58"><a href="#AeonBirth-58"><span class="linenos"> 58</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AeonBirth-59"><a href="#AeonBirth-59"><span class="linenos"> 59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="AeonBirth-60"><a href="#AeonBirth-60"><span class="linenos"> 60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
</span><span id="AeonBirth-61"><a href="#AeonBirth-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AeonBirth-62"><a href="#AeonBirth-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AeonBirth-63"><a href="#AeonBirth-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExcavationResult</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AeonBirth-64"><a href="#AeonBirth-64"><span class="linenos"> 64</span></a>        
</span><span id="AeonBirth-65"><a href="#AeonBirth-65"><span class="linenos"> 65</span></a>        <span class="c1"># Determinar la semilla a usar</span>
</span><span id="AeonBirth-66"><a href="#AeonBirth-66"><span class="linenos"> 66</span></a>        <span class="k">if</span> <span class="n">sacred_seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AeonBirth-67"><a href="#AeonBirth-67"><span class="linenos"> 67</span></a>            <span class="c1"># Modo Descubrimiento: usar semilla sagrada pre-descubierta</span>
</span><span id="AeonBirth-68"><a href="#AeonBirth-68"><span class="linenos"> 68</span></a>            <span class="n">seed</span> <span class="o">=</span> <span class="n">sacred_seed</span>
</span><span id="AeonBirth-69"><a href="#AeonBirth-69"><span class="linenos"> 69</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="s2">&quot;sacred_seed&quot;</span>
</span><span id="AeonBirth-70"><a href="#AeonBirth-70"><span class="linenos"> 70</span></a>            
</span><span id="AeonBirth-71"><a href="#AeonBirth-71"><span class="linenos"> 71</span></a>        <span class="k">elif</span> <span class="n">auto_excavate</span> <span class="ow">and</span> <span class="n">_miner_available</span><span class="p">:</span>
</span><span id="AeonBirth-72"><a href="#AeonBirth-72"><span class="linenos"> 72</span></a>            <span class="c1"># Modo Descubrimiento: excavar automÃ¡ticamente</span>
</span><span id="AeonBirth-73"><a href="#AeonBirth-73"><span class="linenos"> 73</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âï¸  Iniciando excavaciÃ³n para </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-74"><a href="#AeonBirth-74"><span class="linenos"> 74</span></a>            <span class="n">miner</span> <span class="o">=</span> <span class="n">UniversalMiner</span><span class="p">(</span>
</span><span id="AeonBirth-75"><a href="#AeonBirth-75"><span class="linenos"> 75</span></a>                <span class="n">reservoir_size</span><span class="o">=</span><span class="n">n_reservoir</span><span class="p">,</span>
</span><span id="AeonBirth-76"><a href="#AeonBirth-76"><span class="linenos"> 76</span></a>                <span class="n">target_resonance</span><span class="o">=</span><span class="n">target_resonance</span>
</span><span id="AeonBirth-77"><a href="#AeonBirth-77"><span class="linenos"> 77</span></a>            <span class="p">)</span>
</span><span id="AeonBirth-78"><a href="#AeonBirth-78"><span class="linenos"> 78</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span> <span class="o">=</span> <span class="n">miner</span><span class="o">.</span><span class="n">excavate</span><span class="p">(</span><span class="n">max_attempts</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="AeonBirth-79"><a href="#AeonBirth-79"><span class="linenos"> 79</span></a>            <span class="n">seed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">sacred_seed</span>
</span><span id="AeonBirth-80"><a href="#AeonBirth-80"><span class="linenos"> 80</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="s2">&quot;auto_excavated&quot;</span>
</span><span id="AeonBirth-81"><a href="#AeonBirth-81"><span class="linenos"> 81</span></a>            
</span><span id="AeonBirth-82"><a href="#AeonBirth-82"><span class="linenos"> 82</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AeonBirth-83"><a href="#AeonBirth-83"><span class="linenos"> 83</span></a>            <span class="c1"># Modo ClÃ¡sico: usar timestamp como semilla</span>
</span><span id="AeonBirth-84"><a href="#AeonBirth-84"><span class="linenos"> 84</span></a>            <span class="n">seed</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">created_at</span><span class="p">)</span>
</span><span id="AeonBirth-85"><a href="#AeonBirth-85"><span class="linenos"> 85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="s2">&quot;classic&quot;</span>
</span><span id="AeonBirth-86"><a href="#AeonBirth-86"><span class="linenos"> 86</span></a>        
</span><span id="AeonBirth-87"><a href="#AeonBirth-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span> <span class="o">=</span> <span class="n">seed</span>
</span><span id="AeonBirth-88"><a href="#AeonBirth-88"><span class="linenos"> 88</span></a>        
</span><span id="AeonBirth-89"><a href="#AeonBirth-89"><span class="linenos"> 89</span></a>        <span class="c1"># Crear instancia de ESN con la semilla determinada</span>
</span><span id="AeonBirth-90"><a href="#AeonBirth-90"><span class="linenos"> 90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">esn</span> <span class="o">=</span> <span class="n">EchoStateNetwork</span><span class="p">(</span>
</span><span id="AeonBirth-91"><a href="#AeonBirth-91"><span class="linenos"> 91</span></a>            <span class="n">n_reservoir</span><span class="o">=</span><span class="n">n_reservoir</span><span class="p">,</span>
</span><span id="AeonBirth-92"><a href="#AeonBirth-92"><span class="linenos"> 92</span></a>            <span class="n">random_state</span><span class="o">=</span><span class="n">seed</span>
</span><span id="AeonBirth-93"><a href="#AeonBirth-93"><span class="linenos"> 93</span></a>        <span class="p">)</span>
</span><span id="AeonBirth-94"><a href="#AeonBirth-94"><span class="linenos"> 94</span></a>        
</span><span id="AeonBirth-95"><a href="#AeonBirth-95"><span class="linenos"> 95</span></a>        <span class="c1"># Guardar inmediatamente para &quot;registrar nacimiento&quot;</span>
</span><span id="AeonBirth-96"><a href="#AeonBirth-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AeonBirth-97"><a href="#AeonBirth-97"><span class="linenos"> 97</span></a>
</span><span id="AeonBirth-98"><a href="#AeonBirth-98"><span class="linenos"> 98</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth-99"><a href="#AeonBirth-99"><span class="linenos"> 99</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">birth_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth-100"><a href="#AeonBirth-100"><span class="linenos">100</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">birth_hash</span>
</span><span id="AeonBirth-101"><a href="#AeonBirth-101"><span class="linenos">101</span></a>    
</span><span id="AeonBirth-102"><a href="#AeonBirth-102"><span class="linenos">102</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth-103"><a href="#AeonBirth-103"><span class="linenos">103</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sacred_seed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="AeonBirth-104"><a href="#AeonBirth-104"><span class="linenos">104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;La semilla sagrada usada para inicializar este EÃ³n.&quot;&quot;&quot;</span>
</span><span id="AeonBirth-105"><a href="#AeonBirth-105"><span class="linenos">105</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span>
</span><span id="AeonBirth-106"><a href="#AeonBirth-106"><span class="linenos">106</span></a>    
</span><span id="AeonBirth-107"><a href="#AeonBirth-107"><span class="linenos">107</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth-108"><a href="#AeonBirth-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initialization_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AeonBirth-109"><a href="#AeonBirth-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modo de inicializaciÃ³n: &#39;classic&#39;, &#39;sacred_seed&#39;, o &#39;auto_excavated&#39;.&quot;&quot;&quot;</span>
</span><span id="AeonBirth-110"><a href="#AeonBirth-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span>
</span><span id="AeonBirth-111"><a href="#AeonBirth-111"><span class="linenos">111</span></a>
</span><span id="AeonBirth-112"><a href="#AeonBirth-112"><span class="linenos">112</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth-113"><a href="#AeonBirth-113"><span class="linenos">113</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth-114"><a href="#AeonBirth-114"><span class="linenos">114</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_age</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span><span class="p">)</span>
</span><span id="AeonBirth-115"><a href="#AeonBirth-115"><span class="linenos">115</span></a>
</span><span id="AeonBirth-116"><a href="#AeonBirth-116"><span class="linenos">116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_format_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seconds</span><span class="p">):</span>
</span><span id="AeonBirth-117"><a href="#AeonBirth-117"><span class="linenos">117</span></a>        <span class="k">if</span> <span class="n">seconds</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">:</span> <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">seconds</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">s&quot;</span>
</span><span id="AeonBirth-118"><a href="#AeonBirth-118"><span class="linenos">118</span></a>        <span class="k">if</span> <span class="n">seconds</span> <span class="o">&lt;</span> <span class="mi">3600</span><span class="p">:</span> <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">seconds</span><span class="o">/</span><span class="mi">60</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">m&quot;</span>
</span><span id="AeonBirth-119"><a href="#AeonBirth-119"><span class="linenos">119</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">seconds</span><span class="o">/</span><span class="mi">3600</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">h&quot;</span>
</span><span id="AeonBirth-120"><a href="#AeonBirth-120"><span class="linenos">120</span></a>
</span><span id="AeonBirth-121"><a href="#AeonBirth-121"><span class="linenos">121</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth-122"><a href="#AeonBirth-122"><span class="linenos">122</span></a>        <span class="n">mem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">get_memory_footprint</span><span class="p">()</span>
</span><span id="AeonBirth-123"><a href="#AeonBirth-123"><span class="linenos">123</span></a>        <span class="n">status</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth-124"><a href="#AeonBirth-124"><span class="linenos">124</span></a>            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AeonBirth-125"><a href="#AeonBirth-125"><span class="linenos">125</span></a>            <span class="s1">&#39;birth_timestamp&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="c1"># MS for JS</span>
</span><span id="AeonBirth-126"><a href="#AeonBirth-126"><span class="linenos">126</span></a>            <span class="s1">&#39;birth_hash&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">birth_hash</span><span class="p">,</span>
</span><span id="AeonBirth-127"><a href="#AeonBirth-127"><span class="linenos">127</span></a>            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
</span><span id="AeonBirth-128"><a href="#AeonBirth-128"><span class="linenos">128</span></a>            <span class="s1">&#39;total_samples_learned&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span><span class="p">,</span>
</span><span id="AeonBirth-129"><a href="#AeonBirth-129"><span class="linenos">129</span></a>            <span class="s1">&#39;memory_kb&#39;</span><span class="p">:</span> <span class="n">mem</span><span class="p">[</span><span class="s1">&#39;total_kb&#39;</span><span class="p">],</span>
</span><span id="AeonBirth-130"><a href="#AeonBirth-130"><span class="linenos">130</span></a>            <span class="s1">&#39;initialization_mode&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span><span class="p">,</span>
</span><span id="AeonBirth-131"><a href="#AeonBirth-131"><span class="linenos">131</span></a>            <span class="s1">&#39;sacred_seed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span>
</span><span id="AeonBirth-132"><a href="#AeonBirth-132"><span class="linenos">132</span></a>        <span class="p">}</span>
</span><span id="AeonBirth-133"><a href="#AeonBirth-133"><span class="linenos">133</span></a>        
</span><span id="AeonBirth-134"><a href="#AeonBirth-134"><span class="linenos">134</span></a>        <span class="c1"># AÃ±adir info de excavaciÃ³n si existe</span>
</span><span id="AeonBirth-135"><a href="#AeonBirth-135"><span class="linenos">135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="p">:</span>
</span><span id="AeonBirth-136"><a href="#AeonBirth-136"><span class="linenos">136</span></a>            <span class="n">status</span><span class="p">[</span><span class="s1">&#39;excavation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth-137"><a href="#AeonBirth-137"><span class="linenos">137</span></a>                <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance</span><span class="p">,</span>
</span><span id="AeonBirth-138"><a href="#AeonBirth-138"><span class="linenos">138</span></a>                <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_depth</span><span class="p">,</span>
</span><span id="AeonBirth-139"><a href="#AeonBirth-139"><span class="linenos">139</span></a>                <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_time</span><span class="p">,</span>
</span><span id="AeonBirth-140"><a href="#AeonBirth-140"><span class="linenos">140</span></a>                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span>
</span><span id="AeonBirth-141"><a href="#AeonBirth-141"><span class="linenos">141</span></a>            <span class="p">}</span>
</span><span id="AeonBirth-142"><a href="#AeonBirth-142"><span class="linenos">142</span></a>        
</span><span id="AeonBirth-143"><a href="#AeonBirth-143"><span class="linenos">143</span></a>        <span class="k">return</span> <span class="n">status</span>
</span><span id="AeonBirth-144"><a href="#AeonBirth-144"><span class="linenos">144</span></a>
</span><span id="AeonBirth-145"><a href="#AeonBirth-145"><span class="linenos">145</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">learn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="AeonBirth-146"><a href="#AeonBirth-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AeonBirth-147"><a href="#AeonBirth-147"><span class="linenos">147</span></a><span class="sd">        Sintoniza (tune) el modelo con nuevos datos.</span>
</span><span id="AeonBirth-148"><a href="#AeonBirth-148"><span class="linenos">148</span></a><span class="sd">        </span>
</span><span id="AeonBirth-149"><a href="#AeonBirth-149"><span class="linenos">149</span></a><span class="sd">        Nota filosÃ³fica: No estamos &quot;entrenando&quot; la red.</span>
</span><span id="AeonBirth-150"><a href="#AeonBirth-150"><span class="linenos">150</span></a><span class="sd">        Estamos ajustando la capa de salida para que la estructura</span>
</span><span id="AeonBirth-151"><a href="#AeonBirth-151"><span class="linenos">151</span></a><span class="sd">        ya-inteligente pueda expresar su conocimiento hacia nuestro problema.</span>
</span><span id="AeonBirth-152"><a href="#AeonBirth-152"><span class="linenos">152</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AeonBirth-153"><a href="#AeonBirth-153"><span class="linenos">153</span></a>        <span class="c1"># Adaptar para que ESN aprenda (fit output layer)</span>
</span><span id="AeonBirth-154"><a href="#AeonBirth-154"><span class="linenos">154</span></a>        <span class="c1"># Asumimos tarea de predicciÃ³n next-step por defecto</span>
</span><span id="AeonBirth-155"><a href="#AeonBirth-155"><span class="linenos">155</span></a>        <span class="c1"># data: array 1D</span>
</span><span id="AeonBirth-156"><a href="#AeonBirth-156"><span class="linenos">156</span></a>        
</span><span id="AeonBirth-157"><a href="#AeonBirth-157"><span class="linenos">157</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="AeonBirth-158"><a href="#AeonBirth-158"><span class="linenos">158</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="AeonBirth-159"><a href="#AeonBirth-159"><span class="linenos">159</span></a>             <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Not enough data&#39;</span><span class="p">}</span>
</span><span id="AeonBirth-160"><a href="#AeonBirth-160"><span class="linenos">160</span></a>
</span><span id="AeonBirth-161"><a href="#AeonBirth-161"><span class="linenos">161</span></a>        <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AeonBirth-162"><a href="#AeonBirth-162"><span class="linenos">162</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AeonBirth-163"><a href="#AeonBirth-163"><span class="linenos">163</span></a>        
</span><span id="AeonBirth-164"><a href="#AeonBirth-164"><span class="linenos">164</span></a>        <span class="c1"># Sintonizar (no entrenar)</span>
</span><span id="AeonBirth-165"><a href="#AeonBirth-165"><span class="linenos">165</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">washout</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">))</span>
</span><span id="AeonBirth-166"><a href="#AeonBirth-166"><span class="linenos">166</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span><span id="AeonBirth-167"><a href="#AeonBirth-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AeonBirth-168"><a href="#AeonBirth-168"><span class="linenos">168</span></a>        
</span><span id="AeonBirth-169"><a href="#AeonBirth-169"><span class="linenos">169</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AeonBirth-170"><a href="#AeonBirth-170"><span class="linenos">170</span></a>            <span class="s1">&#39;samples_tuned&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span><span class="p">,</span>  <span class="c1"># Renombrado de learned a tuned</span>
</span><span id="AeonBirth-171"><a href="#AeonBirth-171"><span class="linenos">171</span></a>            <span class="s1">&#39;mse&#39;</span><span class="p">:</span> <span class="mf">0.0</span> <span class="c1"># Placeholder</span>
</span><span id="AeonBirth-172"><a href="#AeonBirth-172"><span class="linenos">172</span></a>        <span class="p">}</span>
</span><span id="AeonBirth-173"><a href="#AeonBirth-173"><span class="linenos">173</span></a>
</span><span id="AeonBirth-174"><a href="#AeonBirth-174"><span class="linenos">174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">):</span>
</span><span id="AeonBirth-175"><a href="#AeonBirth-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AeonBirth-176"><a href="#AeonBirth-176"><span class="linenos">176</span></a><span class="sd">        Revela predicciones basadas en el estado actual.</span>
</span><span id="AeonBirth-177"><a href="#AeonBirth-177"><span class="linenos">177</span></a><span class="sd">        </span>
</span><span id="AeonBirth-178"><a href="#AeonBirth-178"><span class="linenos">178</span></a><span class="sd">        El output no es &quot;generado&quot; - es un patrÃ³n que ya existÃ­a</span>
</span><span id="AeonBirth-179"><a href="#AeonBirth-179"><span class="linenos">179</span></a><span class="sd">        en la estructura resonante y ahora es iluminado.</span>
</span><span id="AeonBirth-180"><a href="#AeonBirth-180"><span class="linenos">180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AeonBirth-181"><a href="#AeonBirth-181"><span class="linenos">181</span></a>        <span class="n">input_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AeonBirth-182"><a href="#AeonBirth-182"><span class="linenos">182</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">W_out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AeonBirth-183"><a href="#AeonBirth-183"><span class="linenos">183</span></a>            <span class="c1"># Si no estÃ¡ sintonizado, devolver estado neutral</span>
</span><span id="AeonBirth-184"><a href="#AeonBirth-184"><span class="linenos">184</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">input_data</span><span class="p">))</span>
</span><span id="AeonBirth-185"><a href="#AeonBirth-185"><span class="linenos">185</span></a>            
</span><span id="AeonBirth-186"><a href="#AeonBirth-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</span><span id="AeonBirth-187"><a href="#AeonBirth-187"><span class="linenos">187</span></a>
</span><span id="AeonBirth-188"><a href="#AeonBirth-188"><span class="linenos">188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth-189"><a href="#AeonBirth-189"><span class="linenos">189</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">):</span>
</span><span id="AeonBirth-190"><a href="#AeonBirth-190"><span class="linenos">190</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">)</span>
</span><span id="AeonBirth-191"><a href="#AeonBirth-191"><span class="linenos">191</span></a>            
</span><span id="AeonBirth-192"><a href="#AeonBirth-192"><span class="linenos">192</span></a>        <span class="n">safe_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="s2">&quot;-_&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-193"><a href="#AeonBirth-193"><span class="linenos">193</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_birth.json&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-194"><a href="#AeonBirth-194"><span class="linenos">194</span></a>        <span class="n">state_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_state.pkl&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-195"><a href="#AeonBirth-195"><span class="linenos">195</span></a>        
</span><span id="AeonBirth-196"><a href="#AeonBirth-196"><span class="linenos">196</span></a>        <span class="c1"># Guardar metadata JSON</span>
</span><span id="AeonBirth-197"><a href="#AeonBirth-197"><span class="linenos">197</span></a>        <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth-198"><a href="#AeonBirth-198"><span class="linenos">198</span></a>            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AeonBirth-199"><a href="#AeonBirth-199"><span class="linenos">199</span></a>            <span class="s1">&#39;created_at&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span><span class="p">,</span>
</span><span id="AeonBirth-200"><a href="#AeonBirth-200"><span class="linenos">200</span></a>            <span class="s1">&#39;samples_learned&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span><span class="p">,</span>
</span><span id="AeonBirth-201"><a href="#AeonBirth-201"><span class="linenos">201</span></a>            <span class="s1">&#39;n_reservoir&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">n_reservoir</span><span class="p">,</span>
</span><span id="AeonBirth-202"><a href="#AeonBirth-202"><span class="linenos">202</span></a>            <span class="s1">&#39;initialization_mode&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span><span class="p">,</span>
</span><span id="AeonBirth-203"><a href="#AeonBirth-203"><span class="linenos">203</span></a>            <span class="s1">&#39;sacred_seed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span>
</span><span id="AeonBirth-204"><a href="#AeonBirth-204"><span class="linenos">204</span></a>        <span class="p">}</span>
</span><span id="AeonBirth-205"><a href="#AeonBirth-205"><span class="linenos">205</span></a>        
</span><span id="AeonBirth-206"><a href="#AeonBirth-206"><span class="linenos">206</span></a>        <span class="c1"># AÃ±adir info de excavaciÃ³n si existe</span>
</span><span id="AeonBirth-207"><a href="#AeonBirth-207"><span class="linenos">207</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="p">:</span>
</span><span id="AeonBirth-208"><a href="#AeonBirth-208"><span class="linenos">208</span></a>            <span class="n">meta</span><span class="p">[</span><span class="s1">&#39;excavation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth-209"><a href="#AeonBirth-209"><span class="linenos">209</span></a>                <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance</span><span class="p">),</span>
</span><span id="AeonBirth-210"><a href="#AeonBirth-210"><span class="linenos">210</span></a>                <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_depth</span><span class="p">,</span>
</span><span id="AeonBirth-211"><a href="#AeonBirth-211"><span class="linenos">211</span></a>                <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_time</span><span class="p">,</span>
</span><span id="AeonBirth-212"><a href="#AeonBirth-212"><span class="linenos">212</span></a>                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span>
</span><span id="AeonBirth-213"><a href="#AeonBirth-213"><span class="linenos">213</span></a>            <span class="p">}</span>
</span><span id="AeonBirth-214"><a href="#AeonBirth-214"><span class="linenos">214</span></a>        
</span><span id="AeonBirth-215"><a href="#AeonBirth-215"><span class="linenos">215</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth-216"><a href="#AeonBirth-216"><span class="linenos">216</span></a>            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">meta</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AeonBirth-217"><a href="#AeonBirth-217"><span class="linenos">217</span></a>            
</span><span id="AeonBirth-218"><a href="#AeonBirth-218"><span class="linenos">218</span></a>        <span class="c1"># Guardar objeto ESN completo (pickle por simplicidad en prototipo)</span>
</span><span id="AeonBirth-219"><a href="#AeonBirth-219"><span class="linenos">219</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">state_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth-220"><a href="#AeonBirth-220"><span class="linenos">220</span></a>            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span><span id="AeonBirth-221"><a href="#AeonBirth-221"><span class="linenos">221</span></a>
</span><span id="AeonBirth-222"><a href="#AeonBirth-222"><span class="linenos">222</span></a>    <span class="nd">@classmethod</span>
</span><span id="AeonBirth-223"><a href="#AeonBirth-223"><span class="linenos">223</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">):</span>
</span><span id="AeonBirth-224"><a href="#AeonBirth-224"><span class="linenos">224</span></a>        <span class="n">safe_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">name</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="s2">&quot;-_&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-225"><a href="#AeonBirth-225"><span class="linenos">225</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_birth.json&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-226"><a href="#AeonBirth-226"><span class="linenos">226</span></a>        <span class="n">state_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_state.pkl&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-227"><a href="#AeonBirth-227"><span class="linenos">227</span></a>        
</span><span id="AeonBirth-228"><a href="#AeonBirth-228"><span class="linenos">228</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">state_path</span><span class="p">):</span>
</span><span id="AeonBirth-229"><a href="#AeonBirth-229"><span class="linenos">229</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instance </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
</span><span id="AeonBirth-230"><a href="#AeonBirth-230"><span class="linenos">230</span></a>            
</span><span id="AeonBirth-231"><a href="#AeonBirth-231"><span class="linenos">231</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth-232"><a href="#AeonBirth-232"><span class="linenos">232</span></a>            <span class="n">meta</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="AeonBirth-233"><a href="#AeonBirth-233"><span class="linenos">233</span></a>            
</span><span id="AeonBirth-234"><a href="#AeonBirth-234"><span class="linenos">234</span></a>        <span class="c1"># Crear instancia vacÃ­a</span>
</span><span id="AeonBirth-235"><a href="#AeonBirth-235"><span class="linenos">235</span></a>        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</span><span id="AeonBirth-236"><a href="#AeonBirth-236"><span class="linenos">236</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</span><span id="AeonBirth-237"><a href="#AeonBirth-237"><span class="linenos">237</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
</span><span id="AeonBirth-238"><a href="#AeonBirth-238"><span class="linenos">238</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">samples_learned</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;samples_learned&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="AeonBirth-239"><a href="#AeonBirth-239"><span class="linenos">239</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
</span><span id="AeonBirth-240"><a href="#AeonBirth-240"><span class="linenos">240</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;initialization_mode&#39;</span><span class="p">,</span> <span class="s1">&#39;classic&#39;</span><span class="p">)</span>
</span><span id="AeonBirth-241"><a href="#AeonBirth-241"><span class="linenos">241</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_sacred_seed</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sacred_seed&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">]))</span>
</span><span id="AeonBirth-242"><a href="#AeonBirth-242"><span class="linenos">242</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">excavation_result</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># No restauramos el resultado completo</span>
</span><span id="AeonBirth-243"><a href="#AeonBirth-243"><span class="linenos">243</span></a>        
</span><span id="AeonBirth-244"><a href="#AeonBirth-244"><span class="linenos">244</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">state_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth-245"><a href="#AeonBirth-245"><span class="linenos">245</span></a>            <span class="n">instance</span><span class="o">.</span><span class="n">esn</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="AeonBirth-246"><a href="#AeonBirth-246"><span class="linenos">246</span></a>            
</span><span id="AeonBirth-247"><a href="#AeonBirth-247"><span class="linenos">247</span></a>        <span class="k">return</span> <span class="n">instance</span>
</span></pre></div>


            <div class="docstring"><p>Wrapper para EchoStateNetwork que maneja el ciclo de vida,
persistencia y metadatos de una instancia de EÃ³n.</p>

<h1 id="paradigma-de-descubrimiento">Paradigma de Descubrimiento:</h1>

<p>"La inteligencia no se crea, se descubre."</p>

<p>Este mÃ³dulo soporta dos modos de inicializaciÃ³n:</p>

<ol>
<li><p>Modo ClÃ¡sico (random_state):
Usa una semilla aleatoria tradicional.</p></li>
<li><p>Modo Descubrimiento (sacred_seed / auto_excavate):
Excava en el espacio matemÃ¡tico para encontrar una
estructura naturalmente resonante.</p></li>
</ol>
</div>


                            <div id="AeonBirth.__init__" class="classattr">
                                        <input id="AeonBirth.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AeonBirth</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">n_reservoir</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Eon-Instance&#39;</span>,</span><span class="param">	<span class="n">data_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>,</span><span class="param">	<span class="n">sacred_seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">auto_excavate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">target_resonance</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span></span>)</span>

                <label class="view-source-button" for="AeonBirth.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.__init__-39"><a href="#AeonBirth.__init__-39"><span class="linenos">39</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="AeonBirth.__init__-40"><a href="#AeonBirth.__init__-40"><span class="linenos">40</span></a>        <span class="bp">self</span><span class="p">,</span> 
</span><span id="AeonBirth.__init__-41"><a href="#AeonBirth.__init__-41"><span class="linenos">41</span></a>        <span class="n">n_reservoir</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> 
</span><span id="AeonBirth.__init__-42"><a href="#AeonBirth.__init__-42"><span class="linenos">42</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Eon-Instance&quot;</span><span class="p">,</span> 
</span><span id="AeonBirth.__init__-43"><a href="#AeonBirth.__init__-43"><span class="linenos">43</span></a>        <span class="n">data_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
</span><span id="AeonBirth.__init__-44"><a href="#AeonBirth.__init__-44"><span class="linenos">44</span></a>        <span class="n">sacred_seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AeonBirth.__init__-45"><a href="#AeonBirth.__init__-45"><span class="linenos">45</span></a>        <span class="n">auto_excavate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AeonBirth.__init__-46"><a href="#AeonBirth.__init__-46"><span class="linenos">46</span></a>        <span class="n">target_resonance</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="AeonBirth.__init__-47"><a href="#AeonBirth.__init__-47"><span class="linenos">47</span></a>    <span class="p">):</span>
</span><span id="AeonBirth.__init__-48"><a href="#AeonBirth.__init__-48"><span class="linenos">48</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AeonBirth.__init__-49"><a href="#AeonBirth.__init__-49"><span class="linenos">49</span></a><span class="sd">        Inicializa una instancia de EÃ³n.</span>
</span><span id="AeonBirth.__init__-50"><a href="#AeonBirth.__init__-50"><span class="linenos">50</span></a><span class="sd">        </span>
</span><span id="AeonBirth.__init__-51"><a href="#AeonBirth.__init__-51"><span class="linenos">51</span></a><span class="sd">        Args:</span>
</span><span id="AeonBirth.__init__-52"><a href="#AeonBirth.__init__-52"><span class="linenos">52</span></a><span class="sd">            n_reservoir: TamaÃ±o del reservorio</span>
</span><span id="AeonBirth.__init__-53"><a href="#AeonBirth.__init__-53"><span class="linenos">53</span></a><span class="sd">            name: Nombre de la instancia</span>
</span><span id="AeonBirth.__init__-54"><a href="#AeonBirth.__init__-54"><span class="linenos">54</span></a><span class="sd">            data_dir: Directorio para persistencia</span>
</span><span id="AeonBirth.__init__-55"><a href="#AeonBirth.__init__-55"><span class="linenos">55</span></a><span class="sd">            sacred_seed: Semilla sagrada pre-descubierta (modo descubrimiento)</span>
</span><span id="AeonBirth.__init__-56"><a href="#AeonBirth.__init__-56"><span class="linenos">56</span></a><span class="sd">            auto_excavate: Si True, excava automÃ¡ticamente para encontrar semilla</span>
</span><span id="AeonBirth.__init__-57"><a href="#AeonBirth.__init__-57"><span class="linenos">57</span></a><span class="sd">            target_resonance: Rango de resonancia objetivo para auto-excavaciÃ³n</span>
</span><span id="AeonBirth.__init__-58"><a href="#AeonBirth.__init__-58"><span class="linenos">58</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AeonBirth.__init__-59"><a href="#AeonBirth.__init__-59"><span class="linenos">59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="AeonBirth.__init__-60"><a href="#AeonBirth.__init__-60"><span class="linenos">60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
</span><span id="AeonBirth.__init__-61"><a href="#AeonBirth.__init__-61"><span class="linenos">61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AeonBirth.__init__-62"><a href="#AeonBirth.__init__-62"><span class="linenos">62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AeonBirth.__init__-63"><a href="#AeonBirth.__init__-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExcavationResult</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AeonBirth.__init__-64"><a href="#AeonBirth.__init__-64"><span class="linenos">64</span></a>        
</span><span id="AeonBirth.__init__-65"><a href="#AeonBirth.__init__-65"><span class="linenos">65</span></a>        <span class="c1"># Determinar la semilla a usar</span>
</span><span id="AeonBirth.__init__-66"><a href="#AeonBirth.__init__-66"><span class="linenos">66</span></a>        <span class="k">if</span> <span class="n">sacred_seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AeonBirth.__init__-67"><a href="#AeonBirth.__init__-67"><span class="linenos">67</span></a>            <span class="c1"># Modo Descubrimiento: usar semilla sagrada pre-descubierta</span>
</span><span id="AeonBirth.__init__-68"><a href="#AeonBirth.__init__-68"><span class="linenos">68</span></a>            <span class="n">seed</span> <span class="o">=</span> <span class="n">sacred_seed</span>
</span><span id="AeonBirth.__init__-69"><a href="#AeonBirth.__init__-69"><span class="linenos">69</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="s2">&quot;sacred_seed&quot;</span>
</span><span id="AeonBirth.__init__-70"><a href="#AeonBirth.__init__-70"><span class="linenos">70</span></a>            
</span><span id="AeonBirth.__init__-71"><a href="#AeonBirth.__init__-71"><span class="linenos">71</span></a>        <span class="k">elif</span> <span class="n">auto_excavate</span> <span class="ow">and</span> <span class="n">_miner_available</span><span class="p">:</span>
</span><span id="AeonBirth.__init__-72"><a href="#AeonBirth.__init__-72"><span class="linenos">72</span></a>            <span class="c1"># Modo Descubrimiento: excavar automÃ¡ticamente</span>
</span><span id="AeonBirth.__init__-73"><a href="#AeonBirth.__init__-73"><span class="linenos">73</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âï¸  Iniciando excavaciÃ³n para </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.__init__-74"><a href="#AeonBirth.__init__-74"><span class="linenos">74</span></a>            <span class="n">miner</span> <span class="o">=</span> <span class="n">UniversalMiner</span><span class="p">(</span>
</span><span id="AeonBirth.__init__-75"><a href="#AeonBirth.__init__-75"><span class="linenos">75</span></a>                <span class="n">reservoir_size</span><span class="o">=</span><span class="n">n_reservoir</span><span class="p">,</span>
</span><span id="AeonBirth.__init__-76"><a href="#AeonBirth.__init__-76"><span class="linenos">76</span></a>                <span class="n">target_resonance</span><span class="o">=</span><span class="n">target_resonance</span>
</span><span id="AeonBirth.__init__-77"><a href="#AeonBirth.__init__-77"><span class="linenos">77</span></a>            <span class="p">)</span>
</span><span id="AeonBirth.__init__-78"><a href="#AeonBirth.__init__-78"><span class="linenos">78</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span> <span class="o">=</span> <span class="n">miner</span><span class="o">.</span><span class="n">excavate</span><span class="p">(</span><span class="n">max_attempts</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="AeonBirth.__init__-79"><a href="#AeonBirth.__init__-79"><span class="linenos">79</span></a>            <span class="n">seed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">sacred_seed</span>
</span><span id="AeonBirth.__init__-80"><a href="#AeonBirth.__init__-80"><span class="linenos">80</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="s2">&quot;auto_excavated&quot;</span>
</span><span id="AeonBirth.__init__-81"><a href="#AeonBirth.__init__-81"><span class="linenos">81</span></a>            
</span><span id="AeonBirth.__init__-82"><a href="#AeonBirth.__init__-82"><span class="linenos">82</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AeonBirth.__init__-83"><a href="#AeonBirth.__init__-83"><span class="linenos">83</span></a>            <span class="c1"># Modo ClÃ¡sico: usar timestamp como semilla</span>
</span><span id="AeonBirth.__init__-84"><a href="#AeonBirth.__init__-84"><span class="linenos">84</span></a>            <span class="n">seed</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">created_at</span><span class="p">)</span>
</span><span id="AeonBirth.__init__-85"><a href="#AeonBirth.__init__-85"><span class="linenos">85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="s2">&quot;classic&quot;</span>
</span><span id="AeonBirth.__init__-86"><a href="#AeonBirth.__init__-86"><span class="linenos">86</span></a>        
</span><span id="AeonBirth.__init__-87"><a href="#AeonBirth.__init__-87"><span class="linenos">87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span> <span class="o">=</span> <span class="n">seed</span>
</span><span id="AeonBirth.__init__-88"><a href="#AeonBirth.__init__-88"><span class="linenos">88</span></a>        
</span><span id="AeonBirth.__init__-89"><a href="#AeonBirth.__init__-89"><span class="linenos">89</span></a>        <span class="c1"># Crear instancia de ESN con la semilla determinada</span>
</span><span id="AeonBirth.__init__-90"><a href="#AeonBirth.__init__-90"><span class="linenos">90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">esn</span> <span class="o">=</span> <span class="n">EchoStateNetwork</span><span class="p">(</span>
</span><span id="AeonBirth.__init__-91"><a href="#AeonBirth.__init__-91"><span class="linenos">91</span></a>            <span class="n">n_reservoir</span><span class="o">=</span><span class="n">n_reservoir</span><span class="p">,</span>
</span><span id="AeonBirth.__init__-92"><a href="#AeonBirth.__init__-92"><span class="linenos">92</span></a>            <span class="n">random_state</span><span class="o">=</span><span class="n">seed</span>
</span><span id="AeonBirth.__init__-93"><a href="#AeonBirth.__init__-93"><span class="linenos">93</span></a>        <span class="p">)</span>
</span><span id="AeonBirth.__init__-94"><a href="#AeonBirth.__init__-94"><span class="linenos">94</span></a>        
</span><span id="AeonBirth.__init__-95"><a href="#AeonBirth.__init__-95"><span class="linenos">95</span></a>        <span class="c1"># Guardar inmediatamente para &quot;registrar nacimiento&quot;</span>
</span><span id="AeonBirth.__init__-96"><a href="#AeonBirth.__init__-96"><span class="linenos">96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Inicializa una instancia de EÃ³n.</p>

<p>Args:
    n_reservoir: TamaÃ±o del reservorio
    name: Nombre de la instancia
    data_dir: Directorio para persistencia
    sacred_seed: Semilla sagrada pre-descubierta (modo descubrimiento)
    auto_excavate: Si True, excava automÃ¡ticamente para encontrar semilla
    target_resonance: Rango de resonancia objetivo para auto-excavaciÃ³n</p>
</div>


                            </div>
                            <div id="AeonBirth.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span>

        
    </div>
    <a class="headerlink" href="#AeonBirth.name"></a>
    
    

                            </div>
                            <div id="AeonBirth.data_dir" class="classattr">
                                <div class="attr variable">
            <span class="name">data_dir</span>

        
    </div>
    <a class="headerlink" href="#AeonBirth.data_dir"></a>
    
    

                            </div>
                            <div id="AeonBirth.created_at" class="classattr">
                                <div class="attr variable">
            <span class="name">created_at</span>

        
    </div>
    <a class="headerlink" href="#AeonBirth.created_at"></a>
    
    

                            </div>
                            <div id="AeonBirth.samples_learned" class="classattr">
                                <div class="attr variable">
            <span class="name">samples_learned</span>

        
    </div>
    <a class="headerlink" href="#AeonBirth.samples_learned"></a>
    
    

                            </div>
                            <div id="AeonBirth.excavation_result" class="classattr">
                                <div class="attr variable">
            <span class="name">excavation_result</span><span class="annotation">: Optional[<a href="#ExcavationResult">ExcavationResult</a>]</span>

        
    </div>
    <a class="headerlink" href="#AeonBirth.excavation_result"></a>
    
    

                            </div>
                            <div id="AeonBirth.esn" class="classattr">
                                <div class="attr variable">
            <span class="name">esn</span>

        
    </div>
    <a class="headerlink" href="#AeonBirth.esn"></a>
    
    

                            </div>
                            <div id="AeonBirth.birth_hash" class="classattr">
                                        <input id="AeonBirth.birth_hash-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">birth_hash</span>

                <label class="view-source-button" for="AeonBirth.birth_hash-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.birth_hash"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.birth_hash-98"><a href="#AeonBirth.birth_hash-98"><span class="linenos"> 98</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth.birth_hash-99"><a href="#AeonBirth.birth_hash-99"><span class="linenos"> 99</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">birth_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth.birth_hash-100"><a href="#AeonBirth.birth_hash-100"><span class="linenos">100</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">birth_hash</span>
</span></pre></div>


    

                            </div>
                            <div id="AeonBirth.sacred_seed" class="classattr">
                                        <input id="AeonBirth.sacred_seed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">sacred_seed</span><span class="annotation">: int</span>

                <label class="view-source-button" for="AeonBirth.sacred_seed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.sacred_seed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.sacred_seed-102"><a href="#AeonBirth.sacred_seed-102"><span class="linenos">102</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth.sacred_seed-103"><a href="#AeonBirth.sacred_seed-103"><span class="linenos">103</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sacred_seed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="AeonBirth.sacred_seed-104"><a href="#AeonBirth.sacred_seed-104"><span class="linenos">104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;La semilla sagrada usada para inicializar este EÃ³n.&quot;&quot;&quot;</span>
</span><span id="AeonBirth.sacred_seed-105"><a href="#AeonBirth.sacred_seed-105"><span class="linenos">105</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span>
</span></pre></div>


            <div class="docstring"><p>La semilla sagrada usada para inicializar este EÃ³n.</p>
</div>


                            </div>
                            <div id="AeonBirth.initialization_mode" class="classattr">
                                        <input id="AeonBirth.initialization_mode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">initialization_mode</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AeonBirth.initialization_mode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.initialization_mode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.initialization_mode-107"><a href="#AeonBirth.initialization_mode-107"><span class="linenos">107</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth.initialization_mode-108"><a href="#AeonBirth.initialization_mode-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initialization_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AeonBirth.initialization_mode-109"><a href="#AeonBirth.initialization_mode-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modo de inicializaciÃ³n: &#39;classic&#39;, &#39;sacred_seed&#39;, o &#39;auto_excavated&#39;.&quot;&quot;&quot;</span>
</span><span id="AeonBirth.initialization_mode-110"><a href="#AeonBirth.initialization_mode-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span>
</span></pre></div>


            <div class="docstring"><p>Modo de inicializaciÃ³n: 'classic', 'sacred_seed', o 'auto_excavated'.</p>
</div>


                            </div>
                            <div id="AeonBirth.age" class="classattr">
                                        <input id="AeonBirth.age-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">age</span>

                <label class="view-source-button" for="AeonBirth.age-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.age"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.age-112"><a href="#AeonBirth.age-112"><span class="linenos">112</span></a>    <span class="nd">@property</span>
</span><span id="AeonBirth.age-113"><a href="#AeonBirth.age-113"><span class="linenos">113</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth.age-114"><a href="#AeonBirth.age-114"><span class="linenos">114</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_age</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AeonBirth.get_status" class="classattr">
                                        <input id="AeonBirth.get_status-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_status</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AeonBirth.get_status-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.get_status"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.get_status-121"><a href="#AeonBirth.get_status-121"><span class="linenos">121</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth.get_status-122"><a href="#AeonBirth.get_status-122"><span class="linenos">122</span></a>        <span class="n">mem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">get_memory_footprint</span><span class="p">()</span>
</span><span id="AeonBirth.get_status-123"><a href="#AeonBirth.get_status-123"><span class="linenos">123</span></a>        <span class="n">status</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth.get_status-124"><a href="#AeonBirth.get_status-124"><span class="linenos">124</span></a>            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-125"><a href="#AeonBirth.get_status-125"><span class="linenos">125</span></a>            <span class="s1">&#39;birth_timestamp&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="c1"># MS for JS</span>
</span><span id="AeonBirth.get_status-126"><a href="#AeonBirth.get_status-126"><span class="linenos">126</span></a>            <span class="s1">&#39;birth_hash&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">birth_hash</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-127"><a href="#AeonBirth.get_status-127"><span class="linenos">127</span></a>            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-128"><a href="#AeonBirth.get_status-128"><span class="linenos">128</span></a>            <span class="s1">&#39;total_samples_learned&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-129"><a href="#AeonBirth.get_status-129"><span class="linenos">129</span></a>            <span class="s1">&#39;memory_kb&#39;</span><span class="p">:</span> <span class="n">mem</span><span class="p">[</span><span class="s1">&#39;total_kb&#39;</span><span class="p">],</span>
</span><span id="AeonBirth.get_status-130"><a href="#AeonBirth.get_status-130"><span class="linenos">130</span></a>            <span class="s1">&#39;initialization_mode&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-131"><a href="#AeonBirth.get_status-131"><span class="linenos">131</span></a>            <span class="s1">&#39;sacred_seed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span>
</span><span id="AeonBirth.get_status-132"><a href="#AeonBirth.get_status-132"><span class="linenos">132</span></a>        <span class="p">}</span>
</span><span id="AeonBirth.get_status-133"><a href="#AeonBirth.get_status-133"><span class="linenos">133</span></a>        
</span><span id="AeonBirth.get_status-134"><a href="#AeonBirth.get_status-134"><span class="linenos">134</span></a>        <span class="c1"># AÃ±adir info de excavaciÃ³n si existe</span>
</span><span id="AeonBirth.get_status-135"><a href="#AeonBirth.get_status-135"><span class="linenos">135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="p">:</span>
</span><span id="AeonBirth.get_status-136"><a href="#AeonBirth.get_status-136"><span class="linenos">136</span></a>            <span class="n">status</span><span class="p">[</span><span class="s1">&#39;excavation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth.get_status-137"><a href="#AeonBirth.get_status-137"><span class="linenos">137</span></a>                <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-138"><a href="#AeonBirth.get_status-138"><span class="linenos">138</span></a>                <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_depth</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-139"><a href="#AeonBirth.get_status-139"><span class="linenos">139</span></a>                <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_time</span><span class="p">,</span>
</span><span id="AeonBirth.get_status-140"><a href="#AeonBirth.get_status-140"><span class="linenos">140</span></a>                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span>
</span><span id="AeonBirth.get_status-141"><a href="#AeonBirth.get_status-141"><span class="linenos">141</span></a>            <span class="p">}</span>
</span><span id="AeonBirth.get_status-142"><a href="#AeonBirth.get_status-142"><span class="linenos">142</span></a>        
</span><span id="AeonBirth.get_status-143"><a href="#AeonBirth.get_status-143"><span class="linenos">143</span></a>        <span class="k">return</span> <span class="n">status</span>
</span></pre></div>


    

                            </div>
                            <div id="AeonBirth.learn" class="classattr">
                                        <input id="AeonBirth.learn-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">learn</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AeonBirth.learn-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.learn"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.learn-145"><a href="#AeonBirth.learn-145"><span class="linenos">145</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">learn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="AeonBirth.learn-146"><a href="#AeonBirth.learn-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AeonBirth.learn-147"><a href="#AeonBirth.learn-147"><span class="linenos">147</span></a><span class="sd">        Sintoniza (tune) el modelo con nuevos datos.</span>
</span><span id="AeonBirth.learn-148"><a href="#AeonBirth.learn-148"><span class="linenos">148</span></a><span class="sd">        </span>
</span><span id="AeonBirth.learn-149"><a href="#AeonBirth.learn-149"><span class="linenos">149</span></a><span class="sd">        Nota filosÃ³fica: No estamos &quot;entrenando&quot; la red.</span>
</span><span id="AeonBirth.learn-150"><a href="#AeonBirth.learn-150"><span class="linenos">150</span></a><span class="sd">        Estamos ajustando la capa de salida para que la estructura</span>
</span><span id="AeonBirth.learn-151"><a href="#AeonBirth.learn-151"><span class="linenos">151</span></a><span class="sd">        ya-inteligente pueda expresar su conocimiento hacia nuestro problema.</span>
</span><span id="AeonBirth.learn-152"><a href="#AeonBirth.learn-152"><span class="linenos">152</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AeonBirth.learn-153"><a href="#AeonBirth.learn-153"><span class="linenos">153</span></a>        <span class="c1"># Adaptar para que ESN aprenda (fit output layer)</span>
</span><span id="AeonBirth.learn-154"><a href="#AeonBirth.learn-154"><span class="linenos">154</span></a>        <span class="c1"># Asumimos tarea de predicciÃ³n next-step por defecto</span>
</span><span id="AeonBirth.learn-155"><a href="#AeonBirth.learn-155"><span class="linenos">155</span></a>        <span class="c1"># data: array 1D</span>
</span><span id="AeonBirth.learn-156"><a href="#AeonBirth.learn-156"><span class="linenos">156</span></a>        
</span><span id="AeonBirth.learn-157"><a href="#AeonBirth.learn-157"><span class="linenos">157</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="AeonBirth.learn-158"><a href="#AeonBirth.learn-158"><span class="linenos">158</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="AeonBirth.learn-159"><a href="#AeonBirth.learn-159"><span class="linenos">159</span></a>             <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Not enough data&#39;</span><span class="p">}</span>
</span><span id="AeonBirth.learn-160"><a href="#AeonBirth.learn-160"><span class="linenos">160</span></a>
</span><span id="AeonBirth.learn-161"><a href="#AeonBirth.learn-161"><span class="linenos">161</span></a>        <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AeonBirth.learn-162"><a href="#AeonBirth.learn-162"><span class="linenos">162</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AeonBirth.learn-163"><a href="#AeonBirth.learn-163"><span class="linenos">163</span></a>        
</span><span id="AeonBirth.learn-164"><a href="#AeonBirth.learn-164"><span class="linenos">164</span></a>        <span class="c1"># Sintonizar (no entrenar)</span>
</span><span id="AeonBirth.learn-165"><a href="#AeonBirth.learn-165"><span class="linenos">165</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">washout</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">))</span>
</span><span id="AeonBirth.learn-166"><a href="#AeonBirth.learn-166"><span class="linenos">166</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span><span id="AeonBirth.learn-167"><a href="#AeonBirth.learn-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AeonBirth.learn-168"><a href="#AeonBirth.learn-168"><span class="linenos">168</span></a>        
</span><span id="AeonBirth.learn-169"><a href="#AeonBirth.learn-169"><span class="linenos">169</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AeonBirth.learn-170"><a href="#AeonBirth.learn-170"><span class="linenos">170</span></a>            <span class="s1">&#39;samples_tuned&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span><span class="p">,</span>  <span class="c1"># Renombrado de learned a tuned</span>
</span><span id="AeonBirth.learn-171"><a href="#AeonBirth.learn-171"><span class="linenos">171</span></a>            <span class="s1">&#39;mse&#39;</span><span class="p">:</span> <span class="mf">0.0</span> <span class="c1"># Placeholder</span>
</span><span id="AeonBirth.learn-172"><a href="#AeonBirth.learn-172"><span class="linenos">172</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Sintoniza (tune) el modelo con nuevos datos.</p>

<p>Nota filosÃ³fica: No estamos "entrenando" la red.
Estamos ajustando la capa de salida para que la estructura
ya-inteligente pueda expresar su conocimiento hacia nuestro problema.</p>
</div>


                            </div>
                            <div id="AeonBirth.predict" class="classattr">
                                        <input id="AeonBirth.predict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">predict</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">input_data</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AeonBirth.predict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.predict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.predict-174"><a href="#AeonBirth.predict-174"><span class="linenos">174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">):</span>
</span><span id="AeonBirth.predict-175"><a href="#AeonBirth.predict-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AeonBirth.predict-176"><a href="#AeonBirth.predict-176"><span class="linenos">176</span></a><span class="sd">        Revela predicciones basadas en el estado actual.</span>
</span><span id="AeonBirth.predict-177"><a href="#AeonBirth.predict-177"><span class="linenos">177</span></a><span class="sd">        </span>
</span><span id="AeonBirth.predict-178"><a href="#AeonBirth.predict-178"><span class="linenos">178</span></a><span class="sd">        El output no es &quot;generado&quot; - es un patrÃ³n que ya existÃ­a</span>
</span><span id="AeonBirth.predict-179"><a href="#AeonBirth.predict-179"><span class="linenos">179</span></a><span class="sd">        en la estructura resonante y ahora es iluminado.</span>
</span><span id="AeonBirth.predict-180"><a href="#AeonBirth.predict-180"><span class="linenos">180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AeonBirth.predict-181"><a href="#AeonBirth.predict-181"><span class="linenos">181</span></a>        <span class="n">input_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AeonBirth.predict-182"><a href="#AeonBirth.predict-182"><span class="linenos">182</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">W_out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AeonBirth.predict-183"><a href="#AeonBirth.predict-183"><span class="linenos">183</span></a>            <span class="c1"># Si no estÃ¡ sintonizado, devolver estado neutral</span>
</span><span id="AeonBirth.predict-184"><a href="#AeonBirth.predict-184"><span class="linenos">184</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">input_data</span><span class="p">))</span>
</span><span id="AeonBirth.predict-185"><a href="#AeonBirth.predict-185"><span class="linenos">185</span></a>            
</span><span id="AeonBirth.predict-186"><a href="#AeonBirth.predict-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Revela predicciones basadas en el estado actual.</p>

<p>El output no es "generado" - es un patrÃ³n que ya existÃ­a
en la estructura resonante y ahora es iluminado.</p>
</div>


                            </div>
                            <div id="AeonBirth.save" class="classattr">
                                        <input id="AeonBirth.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AeonBirth.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.save-188"><a href="#AeonBirth.save-188"><span class="linenos">188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AeonBirth.save-189"><a href="#AeonBirth.save-189"><span class="linenos">189</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">):</span>
</span><span id="AeonBirth.save-190"><a href="#AeonBirth.save-190"><span class="linenos">190</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">)</span>
</span><span id="AeonBirth.save-191"><a href="#AeonBirth.save-191"><span class="linenos">191</span></a>            
</span><span id="AeonBirth.save-192"><a href="#AeonBirth.save-192"><span class="linenos">192</span></a>        <span class="n">safe_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="s2">&quot;-_&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.save-193"><a href="#AeonBirth.save-193"><span class="linenos">193</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_birth.json&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.save-194"><a href="#AeonBirth.save-194"><span class="linenos">194</span></a>        <span class="n">state_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_state.pkl&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.save-195"><a href="#AeonBirth.save-195"><span class="linenos">195</span></a>        
</span><span id="AeonBirth.save-196"><a href="#AeonBirth.save-196"><span class="linenos">196</span></a>        <span class="c1"># Guardar metadata JSON</span>
</span><span id="AeonBirth.save-197"><a href="#AeonBirth.save-197"><span class="linenos">197</span></a>        <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth.save-198"><a href="#AeonBirth.save-198"><span class="linenos">198</span></a>            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AeonBirth.save-199"><a href="#AeonBirth.save-199"><span class="linenos">199</span></a>            <span class="s1">&#39;created_at&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span><span class="p">,</span>
</span><span id="AeonBirth.save-200"><a href="#AeonBirth.save-200"><span class="linenos">200</span></a>            <span class="s1">&#39;samples_learned&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples_learned</span><span class="p">,</span>
</span><span id="AeonBirth.save-201"><a href="#AeonBirth.save-201"><span class="linenos">201</span></a>            <span class="s1">&#39;n_reservoir&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="o">.</span><span class="n">n_reservoir</span><span class="p">,</span>
</span><span id="AeonBirth.save-202"><a href="#AeonBirth.save-202"><span class="linenos">202</span></a>            <span class="s1">&#39;initialization_mode&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialization_mode</span><span class="p">,</span>
</span><span id="AeonBirth.save-203"><a href="#AeonBirth.save-203"><span class="linenos">203</span></a>            <span class="s1">&#39;sacred_seed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sacred_seed</span>
</span><span id="AeonBirth.save-204"><a href="#AeonBirth.save-204"><span class="linenos">204</span></a>        <span class="p">}</span>
</span><span id="AeonBirth.save-205"><a href="#AeonBirth.save-205"><span class="linenos">205</span></a>        
</span><span id="AeonBirth.save-206"><a href="#AeonBirth.save-206"><span class="linenos">206</span></a>        <span class="c1"># AÃ±adir info de excavaciÃ³n si existe</span>
</span><span id="AeonBirth.save-207"><a href="#AeonBirth.save-207"><span class="linenos">207</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="p">:</span>
</span><span id="AeonBirth.save-208"><a href="#AeonBirth.save-208"><span class="linenos">208</span></a>            <span class="n">meta</span><span class="p">[</span><span class="s1">&#39;excavation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AeonBirth.save-209"><a href="#AeonBirth.save-209"><span class="linenos">209</span></a>                <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance</span><span class="p">),</span>
</span><span id="AeonBirth.save-210"><a href="#AeonBirth.save-210"><span class="linenos">210</span></a>                <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_depth</span><span class="p">,</span>
</span><span id="AeonBirth.save-211"><a href="#AeonBirth.save-211"><span class="linenos">211</span></a>                <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">excavation_time</span><span class="p">,</span>
</span><span id="AeonBirth.save-212"><a href="#AeonBirth.save-212"><span class="linenos">212</span></a>                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavation_result</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span>
</span><span id="AeonBirth.save-213"><a href="#AeonBirth.save-213"><span class="linenos">213</span></a>            <span class="p">}</span>
</span><span id="AeonBirth.save-214"><a href="#AeonBirth.save-214"><span class="linenos">214</span></a>        
</span><span id="AeonBirth.save-215"><a href="#AeonBirth.save-215"><span class="linenos">215</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth.save-216"><a href="#AeonBirth.save-216"><span class="linenos">216</span></a>            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">meta</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AeonBirth.save-217"><a href="#AeonBirth.save-217"><span class="linenos">217</span></a>            
</span><span id="AeonBirth.save-218"><a href="#AeonBirth.save-218"><span class="linenos">218</span></a>        <span class="c1"># Guardar objeto ESN completo (pickle por simplicidad en prototipo)</span>
</span><span id="AeonBirth.save-219"><a href="#AeonBirth.save-219"><span class="linenos">219</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">state_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth.save-220"><a href="#AeonBirth.save-220"><span class="linenos">220</span></a>            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">esn</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AeonBirth.load" class="classattr">
                                        <input id="AeonBirth.load-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">load</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">name</span>, </span><span class="param"><span class="n">data_dir</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AeonBirth.load-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AeonBirth.load"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AeonBirth.load-222"><a href="#AeonBirth.load-222"><span class="linenos">222</span></a>    <span class="nd">@classmethod</span>
</span><span id="AeonBirth.load-223"><a href="#AeonBirth.load-223"><span class="linenos">223</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">):</span>
</span><span id="AeonBirth.load-224"><a href="#AeonBirth.load-224"><span class="linenos">224</span></a>        <span class="n">safe_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">name</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="s2">&quot;-_&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.load-225"><a href="#AeonBirth.load-225"><span class="linenos">225</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_birth.json&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.load-226"><a href="#AeonBirth.load-226"><span class="linenos">226</span></a>        <span class="n">state_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">safe_name</span><span class="si">}</span><span class="s2">_state.pkl&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.load-227"><a href="#AeonBirth.load-227"><span class="linenos">227</span></a>        
</span><span id="AeonBirth.load-228"><a href="#AeonBirth.load-228"><span class="linenos">228</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">state_path</span><span class="p">):</span>
</span><span id="AeonBirth.load-229"><a href="#AeonBirth.load-229"><span class="linenos">229</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instance </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
</span><span id="AeonBirth.load-230"><a href="#AeonBirth.load-230"><span class="linenos">230</span></a>            
</span><span id="AeonBirth.load-231"><a href="#AeonBirth.load-231"><span class="linenos">231</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth.load-232"><a href="#AeonBirth.load-232"><span class="linenos">232</span></a>            <span class="n">meta</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="AeonBirth.load-233"><a href="#AeonBirth.load-233"><span class="linenos">233</span></a>            
</span><span id="AeonBirth.load-234"><a href="#AeonBirth.load-234"><span class="linenos">234</span></a>        <span class="c1"># Crear instancia vacÃ­a</span>
</span><span id="AeonBirth.load-235"><a href="#AeonBirth.load-235"><span class="linenos">235</span></a>        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</span><span id="AeonBirth.load-236"><a href="#AeonBirth.load-236"><span class="linenos">236</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</span><span id="AeonBirth.load-237"><a href="#AeonBirth.load-237"><span class="linenos">237</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
</span><span id="AeonBirth.load-238"><a href="#AeonBirth.load-238"><span class="linenos">238</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">samples_learned</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;samples_learned&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="AeonBirth.load-239"><a href="#AeonBirth.load-239"><span class="linenos">239</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
</span><span id="AeonBirth.load-240"><a href="#AeonBirth.load-240"><span class="linenos">240</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_initialization_mode</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;initialization_mode&#39;</span><span class="p">,</span> <span class="s1">&#39;classic&#39;</span><span class="p">)</span>
</span><span id="AeonBirth.load-241"><a href="#AeonBirth.load-241"><span class="linenos">241</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_sacred_seed</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sacred_seed&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">]))</span>
</span><span id="AeonBirth.load-242"><a href="#AeonBirth.load-242"><span class="linenos">242</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">excavation_result</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># No restauramos el resultado completo</span>
</span><span id="AeonBirth.load-243"><a href="#AeonBirth.load-243"><span class="linenos">243</span></a>        
</span><span id="AeonBirth.load-244"><a href="#AeonBirth.load-244"><span class="linenos">244</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">state_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="AeonBirth.load-245"><a href="#AeonBirth.load-245"><span class="linenos">245</span></a>            <span class="n">instance</span><span class="o">.</span><span class="n">esn</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="AeonBirth.load-246"><a href="#AeonBirth.load-246"><span class="linenos">246</span></a>            
</span><span id="AeonBirth.load-247"><a href="#AeonBirth.load-247"><span class="linenos">247</span></a>        <span class="k">return</span> <span class="n">instance</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="UniversalMiner">
                            <input id="UniversalMiner-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">UniversalMiner</span>:

                <label class="view-source-button" for="UniversalMiner-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner-66"><a href="#UniversalMiner-66"><span class="linenos"> 66</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UniversalMiner</span><span class="p">:</span>
</span><span id="UniversalMiner-67"><a href="#UniversalMiner-67"><span class="linenos"> 67</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-68"><a href="#UniversalMiner-68"><span class="linenos"> 68</span></a><span class="sd">    Minero Universal: Excavador del Espacio Latente MatemÃ¡tico.</span>
</span><span id="UniversalMiner-69"><a href="#UniversalMiner-69"><span class="linenos"> 69</span></a><span class="sd">    </span>
</span><span id="UniversalMiner-70"><a href="#UniversalMiner-70"><span class="linenos"> 70</span></a><span class="sd">    No entrenamos. Buscamos en el &#39;Akasha&#39; matemÃ¡tico (el generador de nÃºmeros)</span>
</span><span id="UniversalMiner-71"><a href="#UniversalMiner-71"><span class="linenos"> 71</span></a><span class="sd">    una configuraciÃ³n que ya sea inteligente de forma nativa.</span>
</span><span id="UniversalMiner-72"><a href="#UniversalMiner-72"><span class="linenos"> 72</span></a><span class="sd">    </span>
</span><span id="UniversalMiner-73"><a href="#UniversalMiner-73"><span class="linenos"> 73</span></a><span class="sd">    &quot;El universo ya contiene todas las soluciones posibles.</span>
</span><span id="UniversalMiner-74"><a href="#UniversalMiner-74"><span class="linenos"> 74</span></a><span class="sd">     Nosotros solo iluminamos las que resuenan con nuestro problema.&quot;</span>
</span><span id="UniversalMiner-75"><a href="#UniversalMiner-75"><span class="linenos"> 75</span></a><span class="sd">    </span>
</span><span id="UniversalMiner-76"><a href="#UniversalMiner-76"><span class="linenos"> 76</span></a><span class="sd">    Attributes:</span>
</span><span id="UniversalMiner-77"><a href="#UniversalMiner-77"><span class="linenos"> 77</span></a><span class="sd">        reservoir_size: TamaÃ±o del reservorio a descubrir</span>
</span><span id="UniversalMiner-78"><a href="#UniversalMiner-78"><span class="linenos"> 78</span></a><span class="sd">        target_resonance: Rango de resonancia objetivo (min, max)</span>
</span><span id="UniversalMiner-79"><a href="#UniversalMiner-79"><span class="linenos"> 79</span></a><span class="sd">        resonance_type: Tipo de resonancia a buscar</span>
</span><span id="UniversalMiner-80"><a href="#UniversalMiner-80"><span class="linenos"> 80</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UniversalMiner-81"><a href="#UniversalMiner-81"><span class="linenos"> 81</span></a>    
</span><span id="UniversalMiner-82"><a href="#UniversalMiner-82"><span class="linenos"> 82</span></a>    <span class="c1"># Constantes universales</span>
</span><span id="UniversalMiner-83"><a href="#UniversalMiner-83"><span class="linenos"> 83</span></a>    <span class="n">PHI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>  <span class="c1"># Ratio Ã¡ureo</span>
</span><span id="UniversalMiner-84"><a href="#UniversalMiner-84"><span class="linenos"> 84</span></a>    <span class="n">FIBONACCI</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">144</span><span class="p">]</span>
</span><span id="UniversalMiner-85"><a href="#UniversalMiner-85"><span class="linenos"> 85</span></a>    <span class="n">PRIMES</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
</span><span id="UniversalMiner-86"><a href="#UniversalMiner-86"><span class="linenos"> 86</span></a>    
</span><span id="UniversalMiner-87"><a href="#UniversalMiner-87"><span class="linenos"> 87</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="UniversalMiner-88"><a href="#UniversalMiner-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner-89"><a href="#UniversalMiner-89"><span class="linenos"> 89</span></a>        <span class="n">reservoir_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="UniversalMiner-90"><a href="#UniversalMiner-90"><span class="linenos"> 90</span></a>        <span class="n">target_resonance</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">),</span>
</span><span id="UniversalMiner-91"><a href="#UniversalMiner-91"><span class="linenos"> 91</span></a>        <span class="n">resonance_type</span><span class="p">:</span> <span class="n">ResonanceType</span> <span class="o">=</span> <span class="n">ResonanceType</span><span class="o">.</span><span class="n">EDGE_OF_CHAOS</span><span class="p">,</span>
</span><span id="UniversalMiner-92"><a href="#UniversalMiner-92"><span class="linenos"> 92</span></a>        <span class="n">sparsity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="UniversalMiner-93"><a href="#UniversalMiner-93"><span class="linenos"> 93</span></a>    <span class="p">):</span>
</span><span id="UniversalMiner-94"><a href="#UniversalMiner-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-95"><a href="#UniversalMiner-95"><span class="linenos"> 95</span></a><span class="sd">        Inicializa el Minero Universal.</span>
</span><span id="UniversalMiner-96"><a href="#UniversalMiner-96"><span class="linenos"> 96</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-97"><a href="#UniversalMiner-97"><span class="linenos"> 97</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner-98"><a href="#UniversalMiner-98"><span class="linenos"> 98</span></a><span class="sd">            reservoir_size: DimensiÃ³n del reservorio a revelar</span>
</span><span id="UniversalMiner-99"><a href="#UniversalMiner-99"><span class="linenos"> 99</span></a><span class="sd">            target_resonance: Rango (min, max) de resonancia aceptable</span>
</span><span id="UniversalMiner-100"><a href="#UniversalMiner-100"><span class="linenos">100</span></a><span class="sd">            resonance_type: Tipo de patrÃ³n a buscar</span>
</span><span id="UniversalMiner-101"><a href="#UniversalMiner-101"><span class="linenos">101</span></a><span class="sd">            sparsity: Densidad de conexiones (1.0 = denso, 0.1 = sparse)</span>
</span><span id="UniversalMiner-102"><a href="#UniversalMiner-102"><span class="linenos">102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner-103"><a href="#UniversalMiner-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span> <span class="o">=</span> <span class="n">reservoir_size</span>
</span><span id="UniversalMiner-104"><a href="#UniversalMiner-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span> <span class="o">=</span> <span class="n">target_resonance</span>
</span><span id="UniversalMiner-105"><a href="#UniversalMiner-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span> <span class="o">=</span> <span class="n">resonance_type</span>
</span><span id="UniversalMiner-106"><a href="#UniversalMiner-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sparsity</span> <span class="o">=</span> <span class="n">sparsity</span>
</span><span id="UniversalMiner-107"><a href="#UniversalMiner-107"><span class="linenos">107</span></a>        
</span><span id="UniversalMiner-108"><a href="#UniversalMiner-108"><span class="linenos">108</span></a>        <span class="c1"># Registro de excavaciÃ³n</span>
</span><span id="UniversalMiner-109"><a href="#UniversalMiner-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_excavation_log</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="UniversalMiner-110"><a href="#UniversalMiner-110"><span class="linenos">110</span></a>    
</span><span id="UniversalMiner-111"><a href="#UniversalMiner-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chaos_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="UniversalMiner-112"><a href="#UniversalMiner-112"><span class="linenos">112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-113"><a href="#UniversalMiner-113"><span class="linenos">113</span></a><span class="sd">        Muestreo del Caos: Revela una matriz desde una semilla.</span>
</span><span id="UniversalMiner-114"><a href="#UniversalMiner-114"><span class="linenos">114</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-115"><a href="#UniversalMiner-115"><span class="linenos">115</span></a><span class="sd">        No es &quot;inicializaciÃ³n aleatoria&quot; - es acceder a una coordenada</span>
</span><span id="UniversalMiner-116"><a href="#UniversalMiner-116"><span class="linenos">116</span></a><span class="sd">        especÃ­fica en el espacio infinito de configuraciones posibles.</span>
</span><span id="UniversalMiner-117"><a href="#UniversalMiner-117"><span class="linenos">117</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-118"><a href="#UniversalMiner-118"><span class="linenos">118</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner-119"><a href="#UniversalMiner-119"><span class="linenos">119</span></a><span class="sd">            seed: Coordenada en el espacio matemÃ¡tico universal</span>
</span><span id="UniversalMiner-120"><a href="#UniversalMiner-120"><span class="linenos">120</span></a><span class="sd">            </span>
</span><span id="UniversalMiner-121"><a href="#UniversalMiner-121"><span class="linenos">121</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner-122"><a href="#UniversalMiner-122"><span class="linenos">122</span></a><span class="sd">            Matriz del reservorio revelada desde esa coordenada</span>
</span><span id="UniversalMiner-123"><a href="#UniversalMiner-123"><span class="linenos">123</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner-124"><a href="#UniversalMiner-124"><span class="linenos">124</span></a>        <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
</span><span id="UniversalMiner-125"><a href="#UniversalMiner-125"><span class="linenos">125</span></a>        
</span><span id="UniversalMiner-126"><a href="#UniversalMiner-126"><span class="linenos">126</span></a>        <span class="c1"># Revelar la matriz base</span>
</span><span id="UniversalMiner-127"><a href="#UniversalMiner-127"><span class="linenos">127</span></a>        <span class="n">matrix</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">))</span>
</span><span id="UniversalMiner-128"><a href="#UniversalMiner-128"><span class="linenos">128</span></a>        
</span><span id="UniversalMiner-129"><a href="#UniversalMiner-129"><span class="linenos">129</span></a>        <span class="c1"># Aplicar mÃ¡scara de sparsity (conexiones sparse)</span>
</span><span id="UniversalMiner-130"><a href="#UniversalMiner-130"><span class="linenos">130</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sparsity</span>
</span><span id="UniversalMiner-131"><a href="#UniversalMiner-131"><span class="linenos">131</span></a>        <span class="n">matrix</span> <span class="o">=</span> <span class="n">matrix</span> <span class="o">*</span> <span class="n">mask</span>
</span><span id="UniversalMiner-132"><a href="#UniversalMiner-132"><span class="linenos">132</span></a>        
</span><span id="UniversalMiner-133"><a href="#UniversalMiner-133"><span class="linenos">133</span></a>        <span class="k">return</span> <span class="n">matrix</span>
</span><span id="UniversalMiner-134"><a href="#UniversalMiner-134"><span class="linenos">134</span></a>    
</span><span id="UniversalMiner-135"><a href="#UniversalMiner-135"><span class="linenos">135</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">measure_resonance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="UniversalMiner-136"><a href="#UniversalMiner-136"><span class="linenos">136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-137"><a href="#UniversalMiner-137"><span class="linenos">137</span></a><span class="sd">        Mide la resonancia natural de una matriz.</span>
</span><span id="UniversalMiner-138"><a href="#UniversalMiner-138"><span class="linenos">138</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-139"><a href="#UniversalMiner-139"><span class="linenos">139</span></a><span class="sd">        La resonancia es el radio espectral - el eigenvalue mÃ¡ximo.</span>
</span><span id="UniversalMiner-140"><a href="#UniversalMiner-140"><span class="linenos">140</span></a><span class="sd">        Una resonancia cercana a 1.0 indica &quot;borde del caos&quot; -</span>
</span><span id="UniversalMiner-141"><a href="#UniversalMiner-141"><span class="linenos">141</span></a><span class="sd">        el estado donde emerge la computaciÃ³n mÃ¡s rica.</span>
</span><span id="UniversalMiner-142"><a href="#UniversalMiner-142"><span class="linenos">142</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-143"><a href="#UniversalMiner-143"><span class="linenos">143</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner-144"><a href="#UniversalMiner-144"><span class="linenos">144</span></a><span class="sd">            matrix: Matriz del reservorio a medir</span>
</span><span id="UniversalMiner-145"><a href="#UniversalMiner-145"><span class="linenos">145</span></a><span class="sd">            </span>
</span><span id="UniversalMiner-146"><a href="#UniversalMiner-146"><span class="linenos">146</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner-147"><a href="#UniversalMiner-147"><span class="linenos">147</span></a><span class="sd">            Tuple de (resonancia, espectro completo de eigenvalues)</span>
</span><span id="UniversalMiner-148"><a href="#UniversalMiner-148"><span class="linenos">148</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner-149"><a href="#UniversalMiner-149"><span class="linenos">149</span></a>        <span class="n">eigenvalues</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigvals</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner-150"><a href="#UniversalMiner-150"><span class="linenos">150</span></a>        <span class="n">resonance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">eigenvalues</span><span class="p">))</span>
</span><span id="UniversalMiner-151"><a href="#UniversalMiner-151"><span class="linenos">151</span></a>        <span class="k">return</span> <span class="n">resonance</span><span class="p">,</span> <span class="n">eigenvalues</span>
</span><span id="UniversalMiner-152"><a href="#UniversalMiner-152"><span class="linenos">152</span></a>    
</span><span id="UniversalMiner-153"><a href="#UniversalMiner-153"><span class="linenos">153</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_golden_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eigenvalues</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="UniversalMiner-154"><a href="#UniversalMiner-154"><span class="linenos">154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Verifica presencia del ratio Ã¡ureo en el espectro.&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-155"><a href="#UniversalMiner-155"><span class="linenos">155</span></a>        <span class="n">magnitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">eigenvalues</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="UniversalMiner-156"><a href="#UniversalMiner-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">magnitudes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="UniversalMiner-157"><a href="#UniversalMiner-157"><span class="linenos">157</span></a>            <span class="k">return</span> <span class="mf">0.0</span>
</span><span id="UniversalMiner-158"><a href="#UniversalMiner-158"><span class="linenos">158</span></a>        
</span><span id="UniversalMiner-159"><a href="#UniversalMiner-159"><span class="linenos">159</span></a>        <span class="c1"># Buscar ratios cercanos a phi</span>
</span><span id="UniversalMiner-160"><a href="#UniversalMiner-160"><span class="linenos">160</span></a>        <span class="n">ratios</span> <span class="o">=</span> <span class="n">magnitudes</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">magnitudes</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">)</span>
</span><span id="UniversalMiner-161"><a href="#UniversalMiner-161"><span class="linenos">161</span></a>        <span class="n">phi_distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">ratios</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">PHI</span><span class="p">)</span>
</span><span id="UniversalMiner-162"><a href="#UniversalMiner-162"><span class="linenos">162</span></a>        <span class="n">golden_score</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">phi_distances</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span>
</span><span id="UniversalMiner-163"><a href="#UniversalMiner-163"><span class="linenos">163</span></a>        <span class="k">return</span> <span class="n">golden_score</span>
</span><span id="UniversalMiner-164"><a href="#UniversalMiner-164"><span class="linenos">164</span></a>    
</span><span id="UniversalMiner-165"><a href="#UniversalMiner-165"><span class="linenos">165</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_harmonic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eigenvalues</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="UniversalMiner-166"><a href="#UniversalMiner-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Verifica patrones armÃ³nicos en el espectro.&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-167"><a href="#UniversalMiner-167"><span class="linenos">167</span></a>        <span class="n">phases</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">eigenvalues</span><span class="p">)</span>
</span><span id="UniversalMiner-168"><a href="#UniversalMiner-168"><span class="linenos">168</span></a>        <span class="c1"># Buscar distribuciÃ³n uniforme de fases (armonÃ­a)</span>
</span><span id="UniversalMiner-169"><a href="#UniversalMiner-169"><span class="linenos">169</span></a>        <span class="n">hist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">phases</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
</span><span id="UniversalMiner-170"><a href="#UniversalMiner-170"><span class="linenos">170</span></a>        <span class="n">uniformity</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">)</span>
</span><span id="UniversalMiner-171"><a href="#UniversalMiner-171"><span class="linenos">171</span></a>        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">uniformity</span><span class="p">)</span>
</span><span id="UniversalMiner-172"><a href="#UniversalMiner-172"><span class="linenos">172</span></a>    
</span><span id="UniversalMiner-173"><a href="#UniversalMiner-173"><span class="linenos">173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">excavate</span><span class="p">(</span>
</span><span id="UniversalMiner-174"><a href="#UniversalMiner-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner-175"><a href="#UniversalMiner-175"><span class="linenos">175</span></a>        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1_000_000</span><span class="p">,</span>
</span><span id="UniversalMiner-176"><a href="#UniversalMiner-176"><span class="linenos">176</span></a>        <span class="n">starting_seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="UniversalMiner-177"><a href="#UniversalMiner-177"><span class="linenos">177</span></a>        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="UniversalMiner-178"><a href="#UniversalMiner-178"><span class="linenos">178</span></a>        <span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="UniversalMiner-179"><a href="#UniversalMiner-179"><span class="linenos">179</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExcavationResult</span><span class="p">:</span>
</span><span id="UniversalMiner-180"><a href="#UniversalMiner-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-181"><a href="#UniversalMiner-181"><span class="linenos">181</span></a><span class="sd">        Excava en el espacio latente buscando inteligencia resonante.</span>
</span><span id="UniversalMiner-182"><a href="#UniversalMiner-182"><span class="linenos">182</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-183"><a href="#UniversalMiner-183"><span class="linenos">183</span></a><span class="sd">        No entrenamos. Buscamos en el &#39;Akasha&#39; matemÃ¡tico una configuraciÃ³n</span>
</span><span id="UniversalMiner-184"><a href="#UniversalMiner-184"><span class="linenos">184</span></a><span class="sd">        que ya sea inteligente de forma nativa.</span>
</span><span id="UniversalMiner-185"><a href="#UniversalMiner-185"><span class="linenos">185</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-186"><a href="#UniversalMiner-186"><span class="linenos">186</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner-187"><a href="#UniversalMiner-187"><span class="linenos">187</span></a><span class="sd">            max_attempts: MÃ¡ximo de semillas a explorar</span>
</span><span id="UniversalMiner-188"><a href="#UniversalMiner-188"><span class="linenos">188</span></a><span class="sd">            starting_seed: Semilla inicial para comenzar la bÃºsqueda</span>
</span><span id="UniversalMiner-189"><a href="#UniversalMiner-189"><span class="linenos">189</span></a><span class="sd">            verbose: Si mostrar progreso</span>
</span><span id="UniversalMiner-190"><a href="#UniversalMiner-190"><span class="linenos">190</span></a><span class="sd">            callback: FunciÃ³n opcional (seed, resonance) llamada en cada paso</span>
</span><span id="UniversalMiner-191"><a href="#UniversalMiner-191"><span class="linenos">191</span></a><span class="sd">            </span>
</span><span id="UniversalMiner-192"><a href="#UniversalMiner-192"><span class="linenos">192</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner-193"><a href="#UniversalMiner-193"><span class="linenos">193</span></a><span class="sd">            ExcavationResult con la estructura descubierta</span>
</span><span id="UniversalMiner-194"><a href="#UniversalMiner-194"><span class="linenos">194</span></a><span class="sd">            </span>
</span><span id="UniversalMiner-195"><a href="#UniversalMiner-195"><span class="linenos">195</span></a><span class="sd">        Raises:</span>
</span><span id="UniversalMiner-196"><a href="#UniversalMiner-196"><span class="linenos">196</span></a><span class="sd">            ExcavationError: Si no se encuentra inteligencia en el rango</span>
</span><span id="UniversalMiner-197"><a href="#UniversalMiner-197"><span class="linenos">197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner-198"><a href="#UniversalMiner-198"><span class="linenos">198</span></a>        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
</span><span id="UniversalMiner-199"><a href="#UniversalMiner-199"><span class="linenos">199</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-200"><a href="#UniversalMiner-200"><span class="linenos">200</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â     INICIANDO EXCAVACIÃN EN EL ESPACIO LATENTE        â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-201"><a href="#UniversalMiner-201"><span class="linenos">201</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â âââââââââââââââââââââââââââââââââââââââââââââââââââââââââ£&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-202"><a href="#UniversalMiner-202"><span class="linenos">202</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Resonance Type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span><span class="si">:</span><span class="s2">&lt;30</span><span class="si">}</span><span class="s2">     â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-203"><a href="#UniversalMiner-203"><span class="linenos">203</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Target Range: [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">]&quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">22</span> <span class="o">+</span> <span class="s2">&quot;â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-204"><a href="#UniversalMiner-204"><span class="linenos">204</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Reservoir Size: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="si">:</span><span class="s2">&lt;30</span><span class="si">}</span><span class="s2">    â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-205"><a href="#UniversalMiner-205"><span class="linenos">205</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-206"><a href="#UniversalMiner-206"><span class="linenos">206</span></a>        
</span><span id="UniversalMiner-207"><a href="#UniversalMiner-207"><span class="linenos">207</span></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="UniversalMiner-208"><a href="#UniversalMiner-208"><span class="linenos">208</span></a>        <span class="n">min_res</span><span class="p">,</span> <span class="n">max_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span>
</span><span id="UniversalMiner-209"><a href="#UniversalMiner-209"><span class="linenos">209</span></a>        
</span><span id="UniversalMiner-210"><a href="#UniversalMiner-210"><span class="linenos">210</span></a>        <span class="n">best_seed</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="UniversalMiner-211"><a href="#UniversalMiner-211"><span class="linenos">211</span></a>        <span class="n">best_resonance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
</span><span id="UniversalMiner-212"><a href="#UniversalMiner-212"><span class="linenos">212</span></a>        <span class="n">best_distance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
</span><span id="UniversalMiner-213"><a href="#UniversalMiner-213"><span class="linenos">213</span></a>        
</span><span id="UniversalMiner-214"><a href="#UniversalMiner-214"><span class="linenos">214</span></a>        <span class="k">for</span> <span class="n">attempt</span><span class="p">,</span> <span class="n">seed</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">starting_seed</span><span class="p">,</span> <span class="n">starting_seed</span> <span class="o">+</span> <span class="n">max_attempts</span><span class="p">)):</span>
</span><span id="UniversalMiner-215"><a href="#UniversalMiner-215"><span class="linenos">215</span></a>            <span class="c1"># 1. Muestreo del Caos - revelar la matriz</span>
</span><span id="UniversalMiner-216"><a href="#UniversalMiner-216"><span class="linenos">216</span></a>            <span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chaos_sample</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
</span><span id="UniversalMiner-217"><a href="#UniversalMiner-217"><span class="linenos">217</span></a>            
</span><span id="UniversalMiner-218"><a href="#UniversalMiner-218"><span class="linenos">218</span></a>            <span class="c1"># 2. Medir resonancia natural</span>
</span><span id="UniversalMiner-219"><a href="#UniversalMiner-219"><span class="linenos">219</span></a>            <span class="n">resonance</span><span class="p">,</span> <span class="n">eigenspectrum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_resonance</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner-220"><a href="#UniversalMiner-220"><span class="linenos">220</span></a>            
</span><span id="UniversalMiner-221"><a href="#UniversalMiner-221"><span class="linenos">221</span></a>            <span class="c1"># 3. Calcular distancia al objetivo</span>
</span><span id="UniversalMiner-222"><a href="#UniversalMiner-222"><span class="linenos">222</span></a>            <span class="n">target_center</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_res</span> <span class="o">+</span> <span class="n">max_res</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="UniversalMiner-223"><a href="#UniversalMiner-223"><span class="linenos">223</span></a>            <span class="n">distance</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">resonance</span> <span class="o">-</span> <span class="n">target_center</span><span class="p">)</span>
</span><span id="UniversalMiner-224"><a href="#UniversalMiner-224"><span class="linenos">224</span></a>            
</span><span id="UniversalMiner-225"><a href="#UniversalMiner-225"><span class="linenos">225</span></a>            <span class="c1"># Registrar mejor candidato</span>
</span><span id="UniversalMiner-226"><a href="#UniversalMiner-226"><span class="linenos">226</span></a>            <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">best_distance</span><span class="p">:</span>
</span><span id="UniversalMiner-227"><a href="#UniversalMiner-227"><span class="linenos">227</span></a>                <span class="n">best_distance</span> <span class="o">=</span> <span class="n">distance</span>
</span><span id="UniversalMiner-228"><a href="#UniversalMiner-228"><span class="linenos">228</span></a>                <span class="n">best_seed</span> <span class="o">=</span> <span class="n">seed</span>
</span><span id="UniversalMiner-229"><a href="#UniversalMiner-229"><span class="linenos">229</span></a>                <span class="n">best_resonance</span> <span class="o">=</span> <span class="n">resonance</span>
</span><span id="UniversalMiner-230"><a href="#UniversalMiner-230"><span class="linenos">230</span></a>            
</span><span id="UniversalMiner-231"><a href="#UniversalMiner-231"><span class="linenos">231</span></a>            <span class="c1"># Callback opcional</span>
</span><span id="UniversalMiner-232"><a href="#UniversalMiner-232"><span class="linenos">232</span></a>            <span class="k">if</span> <span class="n">callback</span><span class="p">:</span>
</span><span id="UniversalMiner-233"><a href="#UniversalMiner-233"><span class="linenos">233</span></a>                <span class="n">callback</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="n">resonance</span><span class="p">)</span>
</span><span id="UniversalMiner-234"><a href="#UniversalMiner-234"><span class="linenos">234</span></a>            
</span><span id="UniversalMiner-235"><a href="#UniversalMiner-235"><span class="linenos">235</span></a>            <span class="c1"># Progreso cada 10000 intentos</span>
</span><span id="UniversalMiner-236"><a href="#UniversalMiner-236"><span class="linenos">236</span></a>            <span class="k">if</span> <span class="n">verbose</span> <span class="ow">and</span> <span class="p">(</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10000</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="UniversalMiner-237"><a href="#UniversalMiner-237"><span class="linenos">237</span></a>                <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="UniversalMiner-238"><a href="#UniversalMiner-238"><span class="linenos">238</span></a>                <span class="n">rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">elapsed</span>
</span><span id="UniversalMiner-239"><a href="#UniversalMiner-239"><span class="linenos">239</span></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  âï¸  Excavando... </span><span class="si">{</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> semillas | &quot;</span>
</span><span id="UniversalMiner-240"><a href="#UniversalMiner-240"><span class="linenos">240</span></a>                            <span class="sa">f</span><span class="s2">&quot;Mejor: seed=</span><span class="si">{</span><span class="n">best_seed</span><span class="si">}</span><span class="s2">, resonance=</span><span class="si">{</span><span class="n">best_resonance</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> | &quot;</span>
</span><span id="UniversalMiner-241"><a href="#UniversalMiner-241"><span class="linenos">241</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rate</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> seeds/s&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-242"><a href="#UniversalMiner-242"><span class="linenos">242</span></a>            
</span><span id="UniversalMiner-243"><a href="#UniversalMiner-243"><span class="linenos">243</span></a>            <span class="c1"># 4. Â¿Encontramos inteligencia resonante?</span>
</span><span id="UniversalMiner-244"><a href="#UniversalMiner-244"><span class="linenos">244</span></a>            <span class="k">if</span> <span class="n">min_res</span> <span class="o">&lt;=</span> <span class="n">resonance</span> <span class="o">&lt;=</span> <span class="n">max_res</span><span class="p">:</span>
</span><span id="UniversalMiner-245"><a href="#UniversalMiner-245"><span class="linenos">245</span></a>                <span class="c1"># Verificaciones adicionales segÃºn tipo</span>
</span><span id="UniversalMiner-246"><a href="#UniversalMiner-246"><span class="linenos">246</span></a>                <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="UniversalMiner-247"><a href="#UniversalMiner-247"><span class="linenos">247</span></a>                
</span><span id="UniversalMiner-248"><a href="#UniversalMiner-248"><span class="linenos">248</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span> <span class="o">==</span> <span class="n">ResonanceType</span><span class="o">.</span><span class="n">GOLDEN</span><span class="p">:</span>
</span><span id="UniversalMiner-249"><a href="#UniversalMiner-249"><span class="linenos">249</span></a>                    <span class="n">golden_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_golden_ratio</span><span class="p">(</span><span class="n">eigenspectrum</span><span class="p">)</span>
</span><span id="UniversalMiner-250"><a href="#UniversalMiner-250"><span class="linenos">250</span></a>                    <span class="n">is_valid</span> <span class="o">=</span> <span class="n">golden_score</span> <span class="o">&gt;</span> <span class="mf">0.1</span>
</span><span id="UniversalMiner-251"><a href="#UniversalMiner-251"><span class="linenos">251</span></a>                    
</span><span id="UniversalMiner-252"><a href="#UniversalMiner-252"><span class="linenos">252</span></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span> <span class="o">==</span> <span class="n">ResonanceType</span><span class="o">.</span><span class="n">HARMONIC</span><span class="p">:</span>
</span><span id="UniversalMiner-253"><a href="#UniversalMiner-253"><span class="linenos">253</span></a>                    <span class="n">harmonic_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_harmonic</span><span class="p">(</span><span class="n">eigenspectrum</span><span class="p">)</span>
</span><span id="UniversalMiner-254"><a href="#UniversalMiner-254"><span class="linenos">254</span></a>                    <span class="n">is_valid</span> <span class="o">=</span> <span class="n">harmonic_score</span> <span class="o">&gt;</span> <span class="mf">0.5</span>
</span><span id="UniversalMiner-255"><a href="#UniversalMiner-255"><span class="linenos">255</span></a>                
</span><span id="UniversalMiner-256"><a href="#UniversalMiner-256"><span class="linenos">256</span></a>                <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span>
</span><span id="UniversalMiner-257"><a href="#UniversalMiner-257"><span class="linenos">257</span></a>                    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="UniversalMiner-258"><a href="#UniversalMiner-258"><span class="linenos">258</span></a>                    
</span><span id="UniversalMiner-259"><a href="#UniversalMiner-259"><span class="linenos">259</span></a>                    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
</span><span id="UniversalMiner-260"><a href="#UniversalMiner-260"><span class="linenos">260</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-261"><a href="#UniversalMiner-261"><span class="linenos">261</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-262"><a href="#UniversalMiner-262"><span class="linenos">262</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â  â¨ ESTRUCTURA INTELIGENTE DESCUBIERTA â¨              â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-263"><a href="#UniversalMiner-263"><span class="linenos">263</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â âââââââââââââââââââââââââââââââââââââââââââââââââââââââââ£&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-264"><a href="#UniversalMiner-264"><span class="linenos">264</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Sacred Seed: </span><span class="si">{</span><span class="n">seed</span><span class="si">:</span><span class="s2">&lt;38</span><span class="si">}</span><span class="s2">   â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-265"><a href="#UniversalMiner-265"><span class="linenos">265</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Natural Resonance: </span><span class="si">{</span><span class="n">resonance</span><span class="si">:</span><span class="s2">&lt;32.6f</span><span class="si">}</span><span class="s2"> â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-266"><a href="#UniversalMiner-266"><span class="linenos">266</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Excavation Depth: </span><span class="si">{</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">&lt;33,</span><span class="si">}</span><span class="s2"> â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-267"><a href="#UniversalMiner-267"><span class="linenos">267</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Time Elapsed: </span><span class="si">{</span><span class="n">elapsed</span><span class="si">:</span><span class="s2">&lt;35.2f</span><span class="si">}</span><span class="s2">s â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-268"><a href="#UniversalMiner-268"><span class="linenos">268</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-269"><a href="#UniversalMiner-269"><span class="linenos">269</span></a>                    
</span><span id="UniversalMiner-270"><a href="#UniversalMiner-270"><span class="linenos">270</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="n">ExcavationResult</span><span class="p">(</span>
</span><span id="UniversalMiner-271"><a href="#UniversalMiner-271"><span class="linenos">271</span></a>                        <span class="n">sacred_seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
</span><span id="UniversalMiner-272"><a href="#UniversalMiner-272"><span class="linenos">272</span></a>                        <span class="n">divine_matrix</span><span class="o">=</span><span class="n">matrix</span><span class="p">,</span>
</span><span id="UniversalMiner-273"><a href="#UniversalMiner-273"><span class="linenos">273</span></a>                        <span class="n">resonance</span><span class="o">=</span><span class="n">resonance</span><span class="p">,</span>
</span><span id="UniversalMiner-274"><a href="#UniversalMiner-274"><span class="linenos">274</span></a>                        <span class="n">resonance_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span><span class="p">,</span>
</span><span id="UniversalMiner-275"><a href="#UniversalMiner-275"><span class="linenos">275</span></a>                        <span class="n">excavation_depth</span><span class="o">=</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="UniversalMiner-276"><a href="#UniversalMiner-276"><span class="linenos">276</span></a>                        <span class="n">excavation_time</span><span class="o">=</span><span class="n">elapsed</span><span class="p">,</span>
</span><span id="UniversalMiner-277"><a href="#UniversalMiner-277"><span class="linenos">277</span></a>                        <span class="n">eigenspectrum</span><span class="o">=</span><span class="n">eigenspectrum</span>
</span><span id="UniversalMiner-278"><a href="#UniversalMiner-278"><span class="linenos">278</span></a>                    <span class="p">)</span>
</span><span id="UniversalMiner-279"><a href="#UniversalMiner-279"><span class="linenos">279</span></a>                    
</span><span id="UniversalMiner-280"><a href="#UniversalMiner-280"><span class="linenos">280</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_excavation_log</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="UniversalMiner-281"><a href="#UniversalMiner-281"><span class="linenos">281</span></a>                        <span class="s1">&#39;seed&#39;</span><span class="p">:</span> <span class="n">seed</span><span class="p">,</span>
</span><span id="UniversalMiner-282"><a href="#UniversalMiner-282"><span class="linenos">282</span></a>                        <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="n">resonance</span><span class="p">,</span>
</span><span id="UniversalMiner-283"><a href="#UniversalMiner-283"><span class="linenos">283</span></a>                        <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="UniversalMiner-284"><a href="#UniversalMiner-284"><span class="linenos">284</span></a>                    <span class="p">})</span>
</span><span id="UniversalMiner-285"><a href="#UniversalMiner-285"><span class="linenos">285</span></a>                    
</span><span id="UniversalMiner-286"><a href="#UniversalMiner-286"><span class="linenos">286</span></a>                    <span class="k">return</span> <span class="n">result</span>
</span><span id="UniversalMiner-287"><a href="#UniversalMiner-287"><span class="linenos">287</span></a>        
</span><span id="UniversalMiner-288"><a href="#UniversalMiner-288"><span class="linenos">288</span></a>        <span class="c1"># No encontramos nada - usar el mejor candidato</span>
</span><span id="UniversalMiner-289"><a href="#UniversalMiner-289"><span class="linenos">289</span></a>        <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="UniversalMiner-290"><a href="#UniversalMiner-290"><span class="linenos">290</span></a>        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
</span><span id="UniversalMiner-291"><a href="#UniversalMiner-291"><span class="linenos">291</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;â ï¸  ExcavaciÃ³n completa. Usando mejor candidato encontrado.&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-292"><a href="#UniversalMiner-292"><span class="linenos">292</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Seed: </span><span class="si">{</span><span class="n">best_seed</span><span class="si">}</span><span class="s2">, Resonance: </span><span class="si">{</span><span class="n">best_resonance</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner-293"><a href="#UniversalMiner-293"><span class="linenos">293</span></a>        
</span><span id="UniversalMiner-294"><a href="#UniversalMiner-294"><span class="linenos">294</span></a>        <span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chaos_sample</span><span class="p">(</span><span class="n">best_seed</span><span class="p">)</span>
</span><span id="UniversalMiner-295"><a href="#UniversalMiner-295"><span class="linenos">295</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">eigenspectrum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_resonance</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner-296"><a href="#UniversalMiner-296"><span class="linenos">296</span></a>        
</span><span id="UniversalMiner-297"><a href="#UniversalMiner-297"><span class="linenos">297</span></a>        <span class="k">return</span> <span class="n">ExcavationResult</span><span class="p">(</span>
</span><span id="UniversalMiner-298"><a href="#UniversalMiner-298"><span class="linenos">298</span></a>            <span class="n">sacred_seed</span><span class="o">=</span><span class="n">best_seed</span><span class="p">,</span>
</span><span id="UniversalMiner-299"><a href="#UniversalMiner-299"><span class="linenos">299</span></a>            <span class="n">divine_matrix</span><span class="o">=</span><span class="n">matrix</span><span class="p">,</span>
</span><span id="UniversalMiner-300"><a href="#UniversalMiner-300"><span class="linenos">300</span></a>            <span class="n">resonance</span><span class="o">=</span><span class="n">best_resonance</span><span class="p">,</span>
</span><span id="UniversalMiner-301"><a href="#UniversalMiner-301"><span class="linenos">301</span></a>            <span class="n">resonance_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span><span class="p">,</span>
</span><span id="UniversalMiner-302"><a href="#UniversalMiner-302"><span class="linenos">302</span></a>            <span class="n">excavation_depth</span><span class="o">=</span><span class="n">max_attempts</span><span class="p">,</span>
</span><span id="UniversalMiner-303"><a href="#UniversalMiner-303"><span class="linenos">303</span></a>            <span class="n">excavation_time</span><span class="o">=</span><span class="n">elapsed</span><span class="p">,</span>
</span><span id="UniversalMiner-304"><a href="#UniversalMiner-304"><span class="linenos">304</span></a>            <span class="n">eigenspectrum</span><span class="o">=</span><span class="n">eigenspectrum</span>
</span><span id="UniversalMiner-305"><a href="#UniversalMiner-305"><span class="linenos">305</span></a>        <span class="p">)</span>
</span><span id="UniversalMiner-306"><a href="#UniversalMiner-306"><span class="linenos">306</span></a>    
</span><span id="UniversalMiner-307"><a href="#UniversalMiner-307"><span class="linenos">307</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">excavate_fast</span><span class="p">(</span>
</span><span id="UniversalMiner-308"><a href="#UniversalMiner-308"><span class="linenos">308</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner-309"><a href="#UniversalMiner-309"><span class="linenos">309</span></a>        <span class="n">target_resonance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span id="UniversalMiner-310"><a href="#UniversalMiner-310"><span class="linenos">310</span></a>        <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="UniversalMiner-311"><a href="#UniversalMiner-311"><span class="linenos">311</span></a>        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100_000</span>
</span><span id="UniversalMiner-312"><a href="#UniversalMiner-312"><span class="linenos">312</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExcavationResult</span><span class="p">:</span>
</span><span id="UniversalMiner-313"><a href="#UniversalMiner-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-314"><a href="#UniversalMiner-314"><span class="linenos">314</span></a><span class="sd">        ExcavaciÃ³n rÃ¡pida con tolerancia especÃ­fica.</span>
</span><span id="UniversalMiner-315"><a href="#UniversalMiner-315"><span class="linenos">315</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-316"><a href="#UniversalMiner-316"><span class="linenos">316</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner-317"><a href="#UniversalMiner-317"><span class="linenos">317</span></a><span class="sd">            target_resonance: Resonancia objetivo exacta</span>
</span><span id="UniversalMiner-318"><a href="#UniversalMiner-318"><span class="linenos">318</span></a><span class="sd">            tolerance: Tolerancia aceptable (+/-)</span>
</span><span id="UniversalMiner-319"><a href="#UniversalMiner-319"><span class="linenos">319</span></a><span class="sd">            max_attempts: MÃ¡ximo de intentos</span>
</span><span id="UniversalMiner-320"><a href="#UniversalMiner-320"><span class="linenos">320</span></a><span class="sd">            </span>
</span><span id="UniversalMiner-321"><a href="#UniversalMiner-321"><span class="linenos">321</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner-322"><a href="#UniversalMiner-322"><span class="linenos">322</span></a><span class="sd">            ExcavationResult con la estructura mÃ¡s cercana</span>
</span><span id="UniversalMiner-323"><a href="#UniversalMiner-323"><span class="linenos">323</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner-324"><a href="#UniversalMiner-324"><span class="linenos">324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="UniversalMiner-325"><a href="#UniversalMiner-325"><span class="linenos">325</span></a>            <span class="n">target_resonance</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">,</span>
</span><span id="UniversalMiner-326"><a href="#UniversalMiner-326"><span class="linenos">326</span></a>            <span class="n">target_resonance</span> <span class="o">+</span> <span class="n">tolerance</span>
</span><span id="UniversalMiner-327"><a href="#UniversalMiner-327"><span class="linenos">327</span></a>        <span class="p">)</span>
</span><span id="UniversalMiner-328"><a href="#UniversalMiner-328"><span class="linenos">328</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavate</span><span class="p">(</span><span class="n">max_attempts</span><span class="o">=</span><span class="n">max_attempts</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="UniversalMiner-329"><a href="#UniversalMiner-329"><span class="linenos">329</span></a>    
</span><span id="UniversalMiner-330"><a href="#UniversalMiner-330"><span class="linenos">330</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scale_to_resonance</span><span class="p">(</span>
</span><span id="UniversalMiner-331"><a href="#UniversalMiner-331"><span class="linenos">331</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner-332"><a href="#UniversalMiner-332"><span class="linenos">332</span></a>        <span class="n">matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
</span><span id="UniversalMiner-333"><a href="#UniversalMiner-333"><span class="linenos">333</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.95</span>
</span><span id="UniversalMiner-334"><a href="#UniversalMiner-334"><span class="linenos">334</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="UniversalMiner-335"><a href="#UniversalMiner-335"><span class="linenos">335</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-336"><a href="#UniversalMiner-336"><span class="linenos">336</span></a><span class="sd">        Sintoniza (tune) una matriz a una resonancia especÃ­fica.</span>
</span><span id="UniversalMiner-337"><a href="#UniversalMiner-337"><span class="linenos">337</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-338"><a href="#UniversalMiner-338"><span class="linenos">338</span></a><span class="sd">        Esto NO es entrenamiento - es ajuste de escala preservando</span>
</span><span id="UniversalMiner-339"><a href="#UniversalMiner-339"><span class="linenos">339</span></a><span class="sd">        la estructura interna que fue revelada.</span>
</span><span id="UniversalMiner-340"><a href="#UniversalMiner-340"><span class="linenos">340</span></a><span class="sd">        </span>
</span><span id="UniversalMiner-341"><a href="#UniversalMiner-341"><span class="linenos">341</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner-342"><a href="#UniversalMiner-342"><span class="linenos">342</span></a><span class="sd">            matrix: Matriz revelada a sintonizar</span>
</span><span id="UniversalMiner-343"><a href="#UniversalMiner-343"><span class="linenos">343</span></a><span class="sd">            target: Resonancia objetivo</span>
</span><span id="UniversalMiner-344"><a href="#UniversalMiner-344"><span class="linenos">344</span></a><span class="sd">            </span>
</span><span id="UniversalMiner-345"><a href="#UniversalMiner-345"><span class="linenos">345</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner-346"><a href="#UniversalMiner-346"><span class="linenos">346</span></a><span class="sd">            Matriz sintonizada</span>
</span><span id="UniversalMiner-347"><a href="#UniversalMiner-347"><span class="linenos">347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner-348"><a href="#UniversalMiner-348"><span class="linenos">348</span></a>        <span class="n">current_resonance</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_resonance</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner-349"><a href="#UniversalMiner-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="n">current_resonance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="UniversalMiner-350"><a href="#UniversalMiner-350"><span class="linenos">350</span></a>            <span class="n">scale_factor</span> <span class="o">=</span> <span class="n">target</span> <span class="o">/</span> <span class="n">current_resonance</span>
</span><span id="UniversalMiner-351"><a href="#UniversalMiner-351"><span class="linenos">351</span></a>            <span class="k">return</span> <span class="n">matrix</span> <span class="o">*</span> <span class="n">scale_factor</span>
</span><span id="UniversalMiner-352"><a href="#UniversalMiner-352"><span class="linenos">352</span></a>        <span class="k">return</span> <span class="n">matrix</span>
</span><span id="UniversalMiner-353"><a href="#UniversalMiner-353"><span class="linenos">353</span></a>    
</span><span id="UniversalMiner-354"><a href="#UniversalMiner-354"><span class="linenos">354</span></a>    <span class="nd">@property</span>
</span><span id="UniversalMiner-355"><a href="#UniversalMiner-355"><span class="linenos">355</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">excavation_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="UniversalMiner-356"><a href="#UniversalMiner-356"><span class="linenos">356</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Historial de todas las excavaciones exitosas.&quot;&quot;&quot;</span>
</span><span id="UniversalMiner-357"><a href="#UniversalMiner-357"><span class="linenos">357</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excavation_log</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Minero Universal: Excavador del Espacio Latente MatemÃ¡tico.</p>

<p>No entrenamos. Buscamos en el 'Akasha' matemÃ¡tico (el generador de nÃºmeros)
una configuraciÃ³n que ya sea inteligente de forma nativa.</p>

<p>"El universo ya contiene todas las soluciones posibles.
 Nosotros solo iluminamos las que resuenan con nuestro problema."</p>

<p>Attributes:
    reservoir_size: TamaÃ±o del reservorio a descubrir
    target_resonance: Rango de resonancia objetivo (min, max)
    resonance_type: Tipo de resonancia a buscar</p>
</div>


                            <div id="UniversalMiner.__init__" class="classattr">
                                        <input id="UniversalMiner.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">UniversalMiner</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">reservoir_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span>,</span><span class="param">	<span class="n">target_resonance</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">)</span>,</span><span class="param">	<span class="n">resonance_type</span><span class="p">:</span> <span class="n"><a href="#ResonanceType">ResonanceType</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n"><a href="#ResonanceType.EDGE_OF_CHAOS">ResonanceType.EDGE_OF_CHAOS</a></span><span class="p">:</span> <span class="s1">&#39;edge_of_chaos&#39;</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">sparsity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span></span>)</span>

                <label class="view-source-button" for="UniversalMiner.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner.__init__-87"><a href="#UniversalMiner.__init__-87"><span class="linenos"> 87</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="UniversalMiner.__init__-88"><a href="#UniversalMiner.__init__-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner.__init__-89"><a href="#UniversalMiner.__init__-89"><span class="linenos"> 89</span></a>        <span class="n">reservoir_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="UniversalMiner.__init__-90"><a href="#UniversalMiner.__init__-90"><span class="linenos"> 90</span></a>        <span class="n">target_resonance</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">),</span>
</span><span id="UniversalMiner.__init__-91"><a href="#UniversalMiner.__init__-91"><span class="linenos"> 91</span></a>        <span class="n">resonance_type</span><span class="p">:</span> <span class="n">ResonanceType</span> <span class="o">=</span> <span class="n">ResonanceType</span><span class="o">.</span><span class="n">EDGE_OF_CHAOS</span><span class="p">,</span>
</span><span id="UniversalMiner.__init__-92"><a href="#UniversalMiner.__init__-92"><span class="linenos"> 92</span></a>        <span class="n">sparsity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="UniversalMiner.__init__-93"><a href="#UniversalMiner.__init__-93"><span class="linenos"> 93</span></a>    <span class="p">):</span>
</span><span id="UniversalMiner.__init__-94"><a href="#UniversalMiner.__init__-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner.__init__-95"><a href="#UniversalMiner.__init__-95"><span class="linenos"> 95</span></a><span class="sd">        Inicializa el Minero Universal.</span>
</span><span id="UniversalMiner.__init__-96"><a href="#UniversalMiner.__init__-96"><span class="linenos"> 96</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.__init__-97"><a href="#UniversalMiner.__init__-97"><span class="linenos"> 97</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner.__init__-98"><a href="#UniversalMiner.__init__-98"><span class="linenos"> 98</span></a><span class="sd">            reservoir_size: DimensiÃ³n del reservorio a revelar</span>
</span><span id="UniversalMiner.__init__-99"><a href="#UniversalMiner.__init__-99"><span class="linenos"> 99</span></a><span class="sd">            target_resonance: Rango (min, max) de resonancia aceptable</span>
</span><span id="UniversalMiner.__init__-100"><a href="#UniversalMiner.__init__-100"><span class="linenos">100</span></a><span class="sd">            resonance_type: Tipo de patrÃ³n a buscar</span>
</span><span id="UniversalMiner.__init__-101"><a href="#UniversalMiner.__init__-101"><span class="linenos">101</span></a><span class="sd">            sparsity: Densidad de conexiones (1.0 = denso, 0.1 = sparse)</span>
</span><span id="UniversalMiner.__init__-102"><a href="#UniversalMiner.__init__-102"><span class="linenos">102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner.__init__-103"><a href="#UniversalMiner.__init__-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span> <span class="o">=</span> <span class="n">reservoir_size</span>
</span><span id="UniversalMiner.__init__-104"><a href="#UniversalMiner.__init__-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span> <span class="o">=</span> <span class="n">target_resonance</span>
</span><span id="UniversalMiner.__init__-105"><a href="#UniversalMiner.__init__-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span> <span class="o">=</span> <span class="n">resonance_type</span>
</span><span id="UniversalMiner.__init__-106"><a href="#UniversalMiner.__init__-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sparsity</span> <span class="o">=</span> <span class="n">sparsity</span>
</span><span id="UniversalMiner.__init__-107"><a href="#UniversalMiner.__init__-107"><span class="linenos">107</span></a>        
</span><span id="UniversalMiner.__init__-108"><a href="#UniversalMiner.__init__-108"><span class="linenos">108</span></a>        <span class="c1"># Registro de excavaciÃ³n</span>
</span><span id="UniversalMiner.__init__-109"><a href="#UniversalMiner.__init__-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_excavation_log</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Inicializa el Minero Universal.</p>

<p>Args:
    reservoir_size: DimensiÃ³n del reservorio a revelar
    target_resonance: Rango (min, max) de resonancia aceptable
    resonance_type: Tipo de patrÃ³n a buscar
    sparsity: Densidad de conexiones (1.0 = denso, 0.1 = sparse)</p>
</div>


                            </div>
                            <div id="UniversalMiner.PHI" class="classattr">
                                <div class="attr variable">
            <span class="name">PHI</span>        =
<span class="default_value">np.float64(1.618033988749895)</span>

        
    </div>
    <a class="headerlink" href="#UniversalMiner.PHI"></a>
    
    

                            </div>
                            <div id="UniversalMiner.FIBONACCI" class="classattr">
                                <div class="attr variable">
            <span class="name">FIBONACCI</span>        =
<span class="default_value">[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144]</span>

        
    </div>
    <a class="headerlink" href="#UniversalMiner.FIBONACCI"></a>
    
    

                            </div>
                            <div id="UniversalMiner.PRIMES" class="classattr">
                                <div class="attr variable">
            <span class="name">PRIMES</span>        =
<span class="default_value">[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]</span>

        
    </div>
    <a class="headerlink" href="#UniversalMiner.PRIMES"></a>
    
    

                            </div>
                            <div id="UniversalMiner.reservoir_size" class="classattr">
                                <div class="attr variable">
            <span class="name">reservoir_size</span>

        
    </div>
    <a class="headerlink" href="#UniversalMiner.reservoir_size"></a>
    
    

                            </div>
                            <div id="UniversalMiner.target_resonance" class="classattr">
                                <div class="attr variable">
            <span class="name">target_resonance</span>

        
    </div>
    <a class="headerlink" href="#UniversalMiner.target_resonance"></a>
    
    

                            </div>
                            <div id="UniversalMiner.resonance_type" class="classattr">
                                <div class="attr variable">
            <span class="name">resonance_type</span>

        
    </div>
    <a class="headerlink" href="#UniversalMiner.resonance_type"></a>
    
    

                            </div>
                            <div id="UniversalMiner.sparsity" class="classattr">
                                <div class="attr variable">
            <span class="name">sparsity</span>

        
    </div>
    <a class="headerlink" href="#UniversalMiner.sparsity"></a>
    
    

                            </div>
                            <div id="UniversalMiner.chaos_sample" class="classattr">
                                        <input id="UniversalMiner.chaos_sample-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chaos_sample</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">seed</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>:</span></span>

                <label class="view-source-button" for="UniversalMiner.chaos_sample-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner.chaos_sample"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner.chaos_sample-111"><a href="#UniversalMiner.chaos_sample-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chaos_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="UniversalMiner.chaos_sample-112"><a href="#UniversalMiner.chaos_sample-112"><span class="linenos">112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner.chaos_sample-113"><a href="#UniversalMiner.chaos_sample-113"><span class="linenos">113</span></a><span class="sd">        Muestreo del Caos: Revela una matriz desde una semilla.</span>
</span><span id="UniversalMiner.chaos_sample-114"><a href="#UniversalMiner.chaos_sample-114"><span class="linenos">114</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.chaos_sample-115"><a href="#UniversalMiner.chaos_sample-115"><span class="linenos">115</span></a><span class="sd">        No es &quot;inicializaciÃ³n aleatoria&quot; - es acceder a una coordenada</span>
</span><span id="UniversalMiner.chaos_sample-116"><a href="#UniversalMiner.chaos_sample-116"><span class="linenos">116</span></a><span class="sd">        especÃ­fica en el espacio infinito de configuraciones posibles.</span>
</span><span id="UniversalMiner.chaos_sample-117"><a href="#UniversalMiner.chaos_sample-117"><span class="linenos">117</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.chaos_sample-118"><a href="#UniversalMiner.chaos_sample-118"><span class="linenos">118</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner.chaos_sample-119"><a href="#UniversalMiner.chaos_sample-119"><span class="linenos">119</span></a><span class="sd">            seed: Coordenada en el espacio matemÃ¡tico universal</span>
</span><span id="UniversalMiner.chaos_sample-120"><a href="#UniversalMiner.chaos_sample-120"><span class="linenos">120</span></a><span class="sd">            </span>
</span><span id="UniversalMiner.chaos_sample-121"><a href="#UniversalMiner.chaos_sample-121"><span class="linenos">121</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner.chaos_sample-122"><a href="#UniversalMiner.chaos_sample-122"><span class="linenos">122</span></a><span class="sd">            Matriz del reservorio revelada desde esa coordenada</span>
</span><span id="UniversalMiner.chaos_sample-123"><a href="#UniversalMiner.chaos_sample-123"><span class="linenos">123</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner.chaos_sample-124"><a href="#UniversalMiner.chaos_sample-124"><span class="linenos">124</span></a>        <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
</span><span id="UniversalMiner.chaos_sample-125"><a href="#UniversalMiner.chaos_sample-125"><span class="linenos">125</span></a>        
</span><span id="UniversalMiner.chaos_sample-126"><a href="#UniversalMiner.chaos_sample-126"><span class="linenos">126</span></a>        <span class="c1"># Revelar la matriz base</span>
</span><span id="UniversalMiner.chaos_sample-127"><a href="#UniversalMiner.chaos_sample-127"><span class="linenos">127</span></a>        <span class="n">matrix</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">))</span>
</span><span id="UniversalMiner.chaos_sample-128"><a href="#UniversalMiner.chaos_sample-128"><span class="linenos">128</span></a>        
</span><span id="UniversalMiner.chaos_sample-129"><a href="#UniversalMiner.chaos_sample-129"><span class="linenos">129</span></a>        <span class="c1"># Aplicar mÃ¡scara de sparsity (conexiones sparse)</span>
</span><span id="UniversalMiner.chaos_sample-130"><a href="#UniversalMiner.chaos_sample-130"><span class="linenos">130</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="p">))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sparsity</span>
</span><span id="UniversalMiner.chaos_sample-131"><a href="#UniversalMiner.chaos_sample-131"><span class="linenos">131</span></a>        <span class="n">matrix</span> <span class="o">=</span> <span class="n">matrix</span> <span class="o">*</span> <span class="n">mask</span>
</span><span id="UniversalMiner.chaos_sample-132"><a href="#UniversalMiner.chaos_sample-132"><span class="linenos">132</span></a>        
</span><span id="UniversalMiner.chaos_sample-133"><a href="#UniversalMiner.chaos_sample-133"><span class="linenos">133</span></a>        <span class="k">return</span> <span class="n">matrix</span>
</span></pre></div>


            <div class="docstring"><p>Muestreo del Caos: Revela una matriz desde una semilla.</p>

<p>No es "inicializaciÃ³n aleatoria" - es acceder a una coordenada
especÃ­fica en el espacio infinito de configuraciones posibles.</p>

<p>Args:
    seed: Coordenada en el espacio matemÃ¡tico universal</p>

<p>Returns:
    Matriz del reservorio revelada desde esa coordenada</p>
</div>


                            </div>
                            <div id="UniversalMiner.measure_resonance" class="classattr">
                                        <input id="UniversalMiner.measure_resonance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">measure_resonance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="UniversalMiner.measure_resonance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner.measure_resonance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner.measure_resonance-135"><a href="#UniversalMiner.measure_resonance-135"><span class="linenos">135</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">measure_resonance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="UniversalMiner.measure_resonance-136"><a href="#UniversalMiner.measure_resonance-136"><span class="linenos">136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner.measure_resonance-137"><a href="#UniversalMiner.measure_resonance-137"><span class="linenos">137</span></a><span class="sd">        Mide la resonancia natural de una matriz.</span>
</span><span id="UniversalMiner.measure_resonance-138"><a href="#UniversalMiner.measure_resonance-138"><span class="linenos">138</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.measure_resonance-139"><a href="#UniversalMiner.measure_resonance-139"><span class="linenos">139</span></a><span class="sd">        La resonancia es el radio espectral - el eigenvalue mÃ¡ximo.</span>
</span><span id="UniversalMiner.measure_resonance-140"><a href="#UniversalMiner.measure_resonance-140"><span class="linenos">140</span></a><span class="sd">        Una resonancia cercana a 1.0 indica &quot;borde del caos&quot; -</span>
</span><span id="UniversalMiner.measure_resonance-141"><a href="#UniversalMiner.measure_resonance-141"><span class="linenos">141</span></a><span class="sd">        el estado donde emerge la computaciÃ³n mÃ¡s rica.</span>
</span><span id="UniversalMiner.measure_resonance-142"><a href="#UniversalMiner.measure_resonance-142"><span class="linenos">142</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.measure_resonance-143"><a href="#UniversalMiner.measure_resonance-143"><span class="linenos">143</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner.measure_resonance-144"><a href="#UniversalMiner.measure_resonance-144"><span class="linenos">144</span></a><span class="sd">            matrix: Matriz del reservorio a medir</span>
</span><span id="UniversalMiner.measure_resonance-145"><a href="#UniversalMiner.measure_resonance-145"><span class="linenos">145</span></a><span class="sd">            </span>
</span><span id="UniversalMiner.measure_resonance-146"><a href="#UniversalMiner.measure_resonance-146"><span class="linenos">146</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner.measure_resonance-147"><a href="#UniversalMiner.measure_resonance-147"><span class="linenos">147</span></a><span class="sd">            Tuple de (resonancia, espectro completo de eigenvalues)</span>
</span><span id="UniversalMiner.measure_resonance-148"><a href="#UniversalMiner.measure_resonance-148"><span class="linenos">148</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner.measure_resonance-149"><a href="#UniversalMiner.measure_resonance-149"><span class="linenos">149</span></a>        <span class="n">eigenvalues</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigvals</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner.measure_resonance-150"><a href="#UniversalMiner.measure_resonance-150"><span class="linenos">150</span></a>        <span class="n">resonance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">eigenvalues</span><span class="p">))</span>
</span><span id="UniversalMiner.measure_resonance-151"><a href="#UniversalMiner.measure_resonance-151"><span class="linenos">151</span></a>        <span class="k">return</span> <span class="n">resonance</span><span class="p">,</span> <span class="n">eigenvalues</span>
</span></pre></div>


            <div class="docstring"><p>Mide la resonancia natural de una matriz.</p>

<p>La resonancia es el radio espectral - el eigenvalue mÃ¡ximo.
Una resonancia cercana a 1.0 indica "borde del caos" -
el estado donde emerge la computaciÃ³n mÃ¡s rica.</p>

<p>Args:
    matrix: Matriz del reservorio a medir</p>

<p>Returns:
    Tuple de (resonancia, espectro completo de eigenvalues)</p>
</div>


                            </div>
                            <div id="UniversalMiner.excavate" class="classattr">
                                        <input id="UniversalMiner.excavate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">excavate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000000</span>,</span><span class="param">	<span class="n">starting_seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#ExcavationResult">ExcavationResult</a></span>:</span></span>

                <label class="view-source-button" for="UniversalMiner.excavate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner.excavate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner.excavate-173"><a href="#UniversalMiner.excavate-173"><span class="linenos">173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">excavate</span><span class="p">(</span>
</span><span id="UniversalMiner.excavate-174"><a href="#UniversalMiner.excavate-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-175"><a href="#UniversalMiner.excavate-175"><span class="linenos">175</span></a>        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1_000_000</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-176"><a href="#UniversalMiner.excavate-176"><span class="linenos">176</span></a>        <span class="n">starting_seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-177"><a href="#UniversalMiner.excavate-177"><span class="linenos">177</span></a>        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-178"><a href="#UniversalMiner.excavate-178"><span class="linenos">178</span></a>        <span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="UniversalMiner.excavate-179"><a href="#UniversalMiner.excavate-179"><span class="linenos">179</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExcavationResult</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-180"><a href="#UniversalMiner.excavate-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner.excavate-181"><a href="#UniversalMiner.excavate-181"><span class="linenos">181</span></a><span class="sd">        Excava en el espacio latente buscando inteligencia resonante.</span>
</span><span id="UniversalMiner.excavate-182"><a href="#UniversalMiner.excavate-182"><span class="linenos">182</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.excavate-183"><a href="#UniversalMiner.excavate-183"><span class="linenos">183</span></a><span class="sd">        No entrenamos. Buscamos en el &#39;Akasha&#39; matemÃ¡tico una configuraciÃ³n</span>
</span><span id="UniversalMiner.excavate-184"><a href="#UniversalMiner.excavate-184"><span class="linenos">184</span></a><span class="sd">        que ya sea inteligente de forma nativa.</span>
</span><span id="UniversalMiner.excavate-185"><a href="#UniversalMiner.excavate-185"><span class="linenos">185</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.excavate-186"><a href="#UniversalMiner.excavate-186"><span class="linenos">186</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner.excavate-187"><a href="#UniversalMiner.excavate-187"><span class="linenos">187</span></a><span class="sd">            max_attempts: MÃ¡ximo de semillas a explorar</span>
</span><span id="UniversalMiner.excavate-188"><a href="#UniversalMiner.excavate-188"><span class="linenos">188</span></a><span class="sd">            starting_seed: Semilla inicial para comenzar la bÃºsqueda</span>
</span><span id="UniversalMiner.excavate-189"><a href="#UniversalMiner.excavate-189"><span class="linenos">189</span></a><span class="sd">            verbose: Si mostrar progreso</span>
</span><span id="UniversalMiner.excavate-190"><a href="#UniversalMiner.excavate-190"><span class="linenos">190</span></a><span class="sd">            callback: FunciÃ³n opcional (seed, resonance) llamada en cada paso</span>
</span><span id="UniversalMiner.excavate-191"><a href="#UniversalMiner.excavate-191"><span class="linenos">191</span></a><span class="sd">            </span>
</span><span id="UniversalMiner.excavate-192"><a href="#UniversalMiner.excavate-192"><span class="linenos">192</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner.excavate-193"><a href="#UniversalMiner.excavate-193"><span class="linenos">193</span></a><span class="sd">            ExcavationResult con la estructura descubierta</span>
</span><span id="UniversalMiner.excavate-194"><a href="#UniversalMiner.excavate-194"><span class="linenos">194</span></a><span class="sd">            </span>
</span><span id="UniversalMiner.excavate-195"><a href="#UniversalMiner.excavate-195"><span class="linenos">195</span></a><span class="sd">        Raises:</span>
</span><span id="UniversalMiner.excavate-196"><a href="#UniversalMiner.excavate-196"><span class="linenos">196</span></a><span class="sd">            ExcavationError: Si no se encuentra inteligencia en el rango</span>
</span><span id="UniversalMiner.excavate-197"><a href="#UniversalMiner.excavate-197"><span class="linenos">197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner.excavate-198"><a href="#UniversalMiner.excavate-198"><span class="linenos">198</span></a>        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-199"><a href="#UniversalMiner.excavate-199"><span class="linenos">199</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-200"><a href="#UniversalMiner.excavate-200"><span class="linenos">200</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â     INICIANDO EXCAVACIÃN EN EL ESPACIO LATENTE        â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-201"><a href="#UniversalMiner.excavate-201"><span class="linenos">201</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â âââââââââââââââââââââââââââââââââââââââââââââââââââââââââ£&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-202"><a href="#UniversalMiner.excavate-202"><span class="linenos">202</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Resonance Type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span><span class="si">:</span><span class="s2">&lt;30</span><span class="si">}</span><span class="s2">     â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-203"><a href="#UniversalMiner.excavate-203"><span class="linenos">203</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Target Range: [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">]&quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">22</span> <span class="o">+</span> <span class="s2">&quot;â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-204"><a href="#UniversalMiner.excavate-204"><span class="linenos">204</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Reservoir Size: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">reservoir_size</span><span class="si">:</span><span class="s2">&lt;30</span><span class="si">}</span><span class="s2">    â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-205"><a href="#UniversalMiner.excavate-205"><span class="linenos">205</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-206"><a href="#UniversalMiner.excavate-206"><span class="linenos">206</span></a>        
</span><span id="UniversalMiner.excavate-207"><a href="#UniversalMiner.excavate-207"><span class="linenos">207</span></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="UniversalMiner.excavate-208"><a href="#UniversalMiner.excavate-208"><span class="linenos">208</span></a>        <span class="n">min_res</span><span class="p">,</span> <span class="n">max_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span>
</span><span id="UniversalMiner.excavate-209"><a href="#UniversalMiner.excavate-209"><span class="linenos">209</span></a>        
</span><span id="UniversalMiner.excavate-210"><a href="#UniversalMiner.excavate-210"><span class="linenos">210</span></a>        <span class="n">best_seed</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="UniversalMiner.excavate-211"><a href="#UniversalMiner.excavate-211"><span class="linenos">211</span></a>        <span class="n">best_resonance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-212"><a href="#UniversalMiner.excavate-212"><span class="linenos">212</span></a>        <span class="n">best_distance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-213"><a href="#UniversalMiner.excavate-213"><span class="linenos">213</span></a>        
</span><span id="UniversalMiner.excavate-214"><a href="#UniversalMiner.excavate-214"><span class="linenos">214</span></a>        <span class="k">for</span> <span class="n">attempt</span><span class="p">,</span> <span class="n">seed</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">starting_seed</span><span class="p">,</span> <span class="n">starting_seed</span> <span class="o">+</span> <span class="n">max_attempts</span><span class="p">)):</span>
</span><span id="UniversalMiner.excavate-215"><a href="#UniversalMiner.excavate-215"><span class="linenos">215</span></a>            <span class="c1"># 1. Muestreo del Caos - revelar la matriz</span>
</span><span id="UniversalMiner.excavate-216"><a href="#UniversalMiner.excavate-216"><span class="linenos">216</span></a>            <span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chaos_sample</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-217"><a href="#UniversalMiner.excavate-217"><span class="linenos">217</span></a>            
</span><span id="UniversalMiner.excavate-218"><a href="#UniversalMiner.excavate-218"><span class="linenos">218</span></a>            <span class="c1"># 2. Medir resonancia natural</span>
</span><span id="UniversalMiner.excavate-219"><a href="#UniversalMiner.excavate-219"><span class="linenos">219</span></a>            <span class="n">resonance</span><span class="p">,</span> <span class="n">eigenspectrum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_resonance</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-220"><a href="#UniversalMiner.excavate-220"><span class="linenos">220</span></a>            
</span><span id="UniversalMiner.excavate-221"><a href="#UniversalMiner.excavate-221"><span class="linenos">221</span></a>            <span class="c1"># 3. Calcular distancia al objetivo</span>
</span><span id="UniversalMiner.excavate-222"><a href="#UniversalMiner.excavate-222"><span class="linenos">222</span></a>            <span class="n">target_center</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_res</span> <span class="o">+</span> <span class="n">max_res</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="UniversalMiner.excavate-223"><a href="#UniversalMiner.excavate-223"><span class="linenos">223</span></a>            <span class="n">distance</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">resonance</span> <span class="o">-</span> <span class="n">target_center</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-224"><a href="#UniversalMiner.excavate-224"><span class="linenos">224</span></a>            
</span><span id="UniversalMiner.excavate-225"><a href="#UniversalMiner.excavate-225"><span class="linenos">225</span></a>            <span class="c1"># Registrar mejor candidato</span>
</span><span id="UniversalMiner.excavate-226"><a href="#UniversalMiner.excavate-226"><span class="linenos">226</span></a>            <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">best_distance</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-227"><a href="#UniversalMiner.excavate-227"><span class="linenos">227</span></a>                <span class="n">best_distance</span> <span class="o">=</span> <span class="n">distance</span>
</span><span id="UniversalMiner.excavate-228"><a href="#UniversalMiner.excavate-228"><span class="linenos">228</span></a>                <span class="n">best_seed</span> <span class="o">=</span> <span class="n">seed</span>
</span><span id="UniversalMiner.excavate-229"><a href="#UniversalMiner.excavate-229"><span class="linenos">229</span></a>                <span class="n">best_resonance</span> <span class="o">=</span> <span class="n">resonance</span>
</span><span id="UniversalMiner.excavate-230"><a href="#UniversalMiner.excavate-230"><span class="linenos">230</span></a>            
</span><span id="UniversalMiner.excavate-231"><a href="#UniversalMiner.excavate-231"><span class="linenos">231</span></a>            <span class="c1"># Callback opcional</span>
</span><span id="UniversalMiner.excavate-232"><a href="#UniversalMiner.excavate-232"><span class="linenos">232</span></a>            <span class="k">if</span> <span class="n">callback</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-233"><a href="#UniversalMiner.excavate-233"><span class="linenos">233</span></a>                <span class="n">callback</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="n">resonance</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-234"><a href="#UniversalMiner.excavate-234"><span class="linenos">234</span></a>            
</span><span id="UniversalMiner.excavate-235"><a href="#UniversalMiner.excavate-235"><span class="linenos">235</span></a>            <span class="c1"># Progreso cada 10000 intentos</span>
</span><span id="UniversalMiner.excavate-236"><a href="#UniversalMiner.excavate-236"><span class="linenos">236</span></a>            <span class="k">if</span> <span class="n">verbose</span> <span class="ow">and</span> <span class="p">(</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10000</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-237"><a href="#UniversalMiner.excavate-237"><span class="linenos">237</span></a>                <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="UniversalMiner.excavate-238"><a href="#UniversalMiner.excavate-238"><span class="linenos">238</span></a>                <span class="n">rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">elapsed</span>
</span><span id="UniversalMiner.excavate-239"><a href="#UniversalMiner.excavate-239"><span class="linenos">239</span></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  âï¸  Excavando... </span><span class="si">{</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> semillas | &quot;</span>
</span><span id="UniversalMiner.excavate-240"><a href="#UniversalMiner.excavate-240"><span class="linenos">240</span></a>                            <span class="sa">f</span><span class="s2">&quot;Mejor: seed=</span><span class="si">{</span><span class="n">best_seed</span><span class="si">}</span><span class="s2">, resonance=</span><span class="si">{</span><span class="n">best_resonance</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> | &quot;</span>
</span><span id="UniversalMiner.excavate-241"><a href="#UniversalMiner.excavate-241"><span class="linenos">241</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rate</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> seeds/s&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-242"><a href="#UniversalMiner.excavate-242"><span class="linenos">242</span></a>            
</span><span id="UniversalMiner.excavate-243"><a href="#UniversalMiner.excavate-243"><span class="linenos">243</span></a>            <span class="c1"># 4. Â¿Encontramos inteligencia resonante?</span>
</span><span id="UniversalMiner.excavate-244"><a href="#UniversalMiner.excavate-244"><span class="linenos">244</span></a>            <span class="k">if</span> <span class="n">min_res</span> <span class="o">&lt;=</span> <span class="n">resonance</span> <span class="o">&lt;=</span> <span class="n">max_res</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-245"><a href="#UniversalMiner.excavate-245"><span class="linenos">245</span></a>                <span class="c1"># Verificaciones adicionales segÃºn tipo</span>
</span><span id="UniversalMiner.excavate-246"><a href="#UniversalMiner.excavate-246"><span class="linenos">246</span></a>                <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="UniversalMiner.excavate-247"><a href="#UniversalMiner.excavate-247"><span class="linenos">247</span></a>                
</span><span id="UniversalMiner.excavate-248"><a href="#UniversalMiner.excavate-248"><span class="linenos">248</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span> <span class="o">==</span> <span class="n">ResonanceType</span><span class="o">.</span><span class="n">GOLDEN</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-249"><a href="#UniversalMiner.excavate-249"><span class="linenos">249</span></a>                    <span class="n">golden_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_golden_ratio</span><span class="p">(</span><span class="n">eigenspectrum</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-250"><a href="#UniversalMiner.excavate-250"><span class="linenos">250</span></a>                    <span class="n">is_valid</span> <span class="o">=</span> <span class="n">golden_score</span> <span class="o">&gt;</span> <span class="mf">0.1</span>
</span><span id="UniversalMiner.excavate-251"><a href="#UniversalMiner.excavate-251"><span class="linenos">251</span></a>                    
</span><span id="UniversalMiner.excavate-252"><a href="#UniversalMiner.excavate-252"><span class="linenos">252</span></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span> <span class="o">==</span> <span class="n">ResonanceType</span><span class="o">.</span><span class="n">HARMONIC</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-253"><a href="#UniversalMiner.excavate-253"><span class="linenos">253</span></a>                    <span class="n">harmonic_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_harmonic</span><span class="p">(</span><span class="n">eigenspectrum</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-254"><a href="#UniversalMiner.excavate-254"><span class="linenos">254</span></a>                    <span class="n">is_valid</span> <span class="o">=</span> <span class="n">harmonic_score</span> <span class="o">&gt;</span> <span class="mf">0.5</span>
</span><span id="UniversalMiner.excavate-255"><a href="#UniversalMiner.excavate-255"><span class="linenos">255</span></a>                
</span><span id="UniversalMiner.excavate-256"><a href="#UniversalMiner.excavate-256"><span class="linenos">256</span></a>                <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-257"><a href="#UniversalMiner.excavate-257"><span class="linenos">257</span></a>                    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="UniversalMiner.excavate-258"><a href="#UniversalMiner.excavate-258"><span class="linenos">258</span></a>                    
</span><span id="UniversalMiner.excavate-259"><a href="#UniversalMiner.excavate-259"><span class="linenos">259</span></a>                    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-260"><a href="#UniversalMiner.excavate-260"><span class="linenos">260</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-261"><a href="#UniversalMiner.excavate-261"><span class="linenos">261</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-262"><a href="#UniversalMiner.excavate-262"><span class="linenos">262</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â  â¨ ESTRUCTURA INTELIGENTE DESCUBIERTA â¨              â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-263"><a href="#UniversalMiner.excavate-263"><span class="linenos">263</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;â âââââââââââââââââââââââââââââââââââââââââââââââââââââââââ£&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-264"><a href="#UniversalMiner.excavate-264"><span class="linenos">264</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Sacred Seed: </span><span class="si">{</span><span class="n">seed</span><span class="si">:</span><span class="s2">&lt;38</span><span class="si">}</span><span class="s2">   â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-265"><a href="#UniversalMiner.excavate-265"><span class="linenos">265</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Natural Resonance: </span><span class="si">{</span><span class="n">resonance</span><span class="si">:</span><span class="s2">&lt;32.6f</span><span class="si">}</span><span class="s2"> â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-266"><a href="#UniversalMiner.excavate-266"><span class="linenos">266</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Excavation Depth: </span><span class="si">{</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">&lt;33,</span><span class="si">}</span><span class="s2"> â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-267"><a href="#UniversalMiner.excavate-267"><span class="linenos">267</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â  Time Elapsed: </span><span class="si">{</span><span class="n">elapsed</span><span class="si">:</span><span class="s2">&lt;35.2f</span><span class="si">}</span><span class="s2">s â&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-268"><a href="#UniversalMiner.excavate-268"><span class="linenos">268</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-269"><a href="#UniversalMiner.excavate-269"><span class="linenos">269</span></a>                    
</span><span id="UniversalMiner.excavate-270"><a href="#UniversalMiner.excavate-270"><span class="linenos">270</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="n">ExcavationResult</span><span class="p">(</span>
</span><span id="UniversalMiner.excavate-271"><a href="#UniversalMiner.excavate-271"><span class="linenos">271</span></a>                        <span class="n">sacred_seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-272"><a href="#UniversalMiner.excavate-272"><span class="linenos">272</span></a>                        <span class="n">divine_matrix</span><span class="o">=</span><span class="n">matrix</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-273"><a href="#UniversalMiner.excavate-273"><span class="linenos">273</span></a>                        <span class="n">resonance</span><span class="o">=</span><span class="n">resonance</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-274"><a href="#UniversalMiner.excavate-274"><span class="linenos">274</span></a>                        <span class="n">resonance_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-275"><a href="#UniversalMiner.excavate-275"><span class="linenos">275</span></a>                        <span class="n">excavation_depth</span><span class="o">=</span><span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-276"><a href="#UniversalMiner.excavate-276"><span class="linenos">276</span></a>                        <span class="n">excavation_time</span><span class="o">=</span><span class="n">elapsed</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-277"><a href="#UniversalMiner.excavate-277"><span class="linenos">277</span></a>                        <span class="n">eigenspectrum</span><span class="o">=</span><span class="n">eigenspectrum</span>
</span><span id="UniversalMiner.excavate-278"><a href="#UniversalMiner.excavate-278"><span class="linenos">278</span></a>                    <span class="p">)</span>
</span><span id="UniversalMiner.excavate-279"><a href="#UniversalMiner.excavate-279"><span class="linenos">279</span></a>                    
</span><span id="UniversalMiner.excavate-280"><a href="#UniversalMiner.excavate-280"><span class="linenos">280</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_excavation_log</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="UniversalMiner.excavate-281"><a href="#UniversalMiner.excavate-281"><span class="linenos">281</span></a>                        <span class="s1">&#39;seed&#39;</span><span class="p">:</span> <span class="n">seed</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-282"><a href="#UniversalMiner.excavate-282"><span class="linenos">282</span></a>                        <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="n">resonance</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-283"><a href="#UniversalMiner.excavate-283"><span class="linenos">283</span></a>                        <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="UniversalMiner.excavate-284"><a href="#UniversalMiner.excavate-284"><span class="linenos">284</span></a>                    <span class="p">})</span>
</span><span id="UniversalMiner.excavate-285"><a href="#UniversalMiner.excavate-285"><span class="linenos">285</span></a>                    
</span><span id="UniversalMiner.excavate-286"><a href="#UniversalMiner.excavate-286"><span class="linenos">286</span></a>                    <span class="k">return</span> <span class="n">result</span>
</span><span id="UniversalMiner.excavate-287"><a href="#UniversalMiner.excavate-287"><span class="linenos">287</span></a>        
</span><span id="UniversalMiner.excavate-288"><a href="#UniversalMiner.excavate-288"><span class="linenos">288</span></a>        <span class="c1"># No encontramos nada - usar el mejor candidato</span>
</span><span id="UniversalMiner.excavate-289"><a href="#UniversalMiner.excavate-289"><span class="linenos">289</span></a>        <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="UniversalMiner.excavate-290"><a href="#UniversalMiner.excavate-290"><span class="linenos">290</span></a>        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate-291"><a href="#UniversalMiner.excavate-291"><span class="linenos">291</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;â ï¸  ExcavaciÃ³n completa. Usando mejor candidato encontrado.&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-292"><a href="#UniversalMiner.excavate-292"><span class="linenos">292</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Seed: </span><span class="si">{</span><span class="n">best_seed</span><span class="si">}</span><span class="s2">, Resonance: </span><span class="si">{</span><span class="n">best_resonance</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-293"><a href="#UniversalMiner.excavate-293"><span class="linenos">293</span></a>        
</span><span id="UniversalMiner.excavate-294"><a href="#UniversalMiner.excavate-294"><span class="linenos">294</span></a>        <span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chaos_sample</span><span class="p">(</span><span class="n">best_seed</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-295"><a href="#UniversalMiner.excavate-295"><span class="linenos">295</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">eigenspectrum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_resonance</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner.excavate-296"><a href="#UniversalMiner.excavate-296"><span class="linenos">296</span></a>        
</span><span id="UniversalMiner.excavate-297"><a href="#UniversalMiner.excavate-297"><span class="linenos">297</span></a>        <span class="k">return</span> <span class="n">ExcavationResult</span><span class="p">(</span>
</span><span id="UniversalMiner.excavate-298"><a href="#UniversalMiner.excavate-298"><span class="linenos">298</span></a>            <span class="n">sacred_seed</span><span class="o">=</span><span class="n">best_seed</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-299"><a href="#UniversalMiner.excavate-299"><span class="linenos">299</span></a>            <span class="n">divine_matrix</span><span class="o">=</span><span class="n">matrix</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-300"><a href="#UniversalMiner.excavate-300"><span class="linenos">300</span></a>            <span class="n">resonance</span><span class="o">=</span><span class="n">best_resonance</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-301"><a href="#UniversalMiner.excavate-301"><span class="linenos">301</span></a>            <span class="n">resonance_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-302"><a href="#UniversalMiner.excavate-302"><span class="linenos">302</span></a>            <span class="n">excavation_depth</span><span class="o">=</span><span class="n">max_attempts</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-303"><a href="#UniversalMiner.excavate-303"><span class="linenos">303</span></a>            <span class="n">excavation_time</span><span class="o">=</span><span class="n">elapsed</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate-304"><a href="#UniversalMiner.excavate-304"><span class="linenos">304</span></a>            <span class="n">eigenspectrum</span><span class="o">=</span><span class="n">eigenspectrum</span>
</span><span id="UniversalMiner.excavate-305"><a href="#UniversalMiner.excavate-305"><span class="linenos">305</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Excava en el espacio latente buscando inteligencia resonante.</p>

<p>No entrenamos. Buscamos en el 'Akasha' matemÃ¡tico una configuraciÃ³n
que ya sea inteligente de forma nativa.</p>

<p>Args:
    max_attempts: MÃ¡ximo de semillas a explorar
    starting_seed: Semilla inicial para comenzar la bÃºsqueda
    verbose: Si mostrar progreso
    callback: FunciÃ³n opcional (seed, resonance) llamada en cada paso</p>

<p>Returns:
    ExcavationResult con la estructura descubierta</p>

<p>Raises:
    ExcavationError: Si no se encuentra inteligencia en el rango</p>
</div>


                            </div>
                            <div id="UniversalMiner.excavate_fast" class="classattr">
                                        <input id="UniversalMiner.excavate_fast-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">excavate_fast</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">target_resonance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>,</span><span class="param">	<span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span>,</span><span class="param">	<span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100000</span></span><span class="return-annotation">) -> <span class="n"><a href="#ExcavationResult">ExcavationResult</a></span>:</span></span>

                <label class="view-source-button" for="UniversalMiner.excavate_fast-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner.excavate_fast"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner.excavate_fast-307"><a href="#UniversalMiner.excavate_fast-307"><span class="linenos">307</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">excavate_fast</span><span class="p">(</span>
</span><span id="UniversalMiner.excavate_fast-308"><a href="#UniversalMiner.excavate_fast-308"><span class="linenos">308</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate_fast-309"><a href="#UniversalMiner.excavate_fast-309"><span class="linenos">309</span></a>        <span class="n">target_resonance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate_fast-310"><a href="#UniversalMiner.excavate_fast-310"><span class="linenos">310</span></a>        <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate_fast-311"><a href="#UniversalMiner.excavate_fast-311"><span class="linenos">311</span></a>        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100_000</span>
</span><span id="UniversalMiner.excavate_fast-312"><a href="#UniversalMiner.excavate_fast-312"><span class="linenos">312</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExcavationResult</span><span class="p">:</span>
</span><span id="UniversalMiner.excavate_fast-313"><a href="#UniversalMiner.excavate_fast-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner.excavate_fast-314"><a href="#UniversalMiner.excavate_fast-314"><span class="linenos">314</span></a><span class="sd">        ExcavaciÃ³n rÃ¡pida con tolerancia especÃ­fica.</span>
</span><span id="UniversalMiner.excavate_fast-315"><a href="#UniversalMiner.excavate_fast-315"><span class="linenos">315</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.excavate_fast-316"><a href="#UniversalMiner.excavate_fast-316"><span class="linenos">316</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner.excavate_fast-317"><a href="#UniversalMiner.excavate_fast-317"><span class="linenos">317</span></a><span class="sd">            target_resonance: Resonancia objetivo exacta</span>
</span><span id="UniversalMiner.excavate_fast-318"><a href="#UniversalMiner.excavate_fast-318"><span class="linenos">318</span></a><span class="sd">            tolerance: Tolerancia aceptable (+/-)</span>
</span><span id="UniversalMiner.excavate_fast-319"><a href="#UniversalMiner.excavate_fast-319"><span class="linenos">319</span></a><span class="sd">            max_attempts: MÃ¡ximo de intentos</span>
</span><span id="UniversalMiner.excavate_fast-320"><a href="#UniversalMiner.excavate_fast-320"><span class="linenos">320</span></a><span class="sd">            </span>
</span><span id="UniversalMiner.excavate_fast-321"><a href="#UniversalMiner.excavate_fast-321"><span class="linenos">321</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner.excavate_fast-322"><a href="#UniversalMiner.excavate_fast-322"><span class="linenos">322</span></a><span class="sd">            ExcavationResult con la estructura mÃ¡s cercana</span>
</span><span id="UniversalMiner.excavate_fast-323"><a href="#UniversalMiner.excavate_fast-323"><span class="linenos">323</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner.excavate_fast-324"><a href="#UniversalMiner.excavate_fast-324"><span class="linenos">324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">target_resonance</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="UniversalMiner.excavate_fast-325"><a href="#UniversalMiner.excavate_fast-325"><span class="linenos">325</span></a>            <span class="n">target_resonance</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">,</span>
</span><span id="UniversalMiner.excavate_fast-326"><a href="#UniversalMiner.excavate_fast-326"><span class="linenos">326</span></a>            <span class="n">target_resonance</span> <span class="o">+</span> <span class="n">tolerance</span>
</span><span id="UniversalMiner.excavate_fast-327"><a href="#UniversalMiner.excavate_fast-327"><span class="linenos">327</span></a>        <span class="p">)</span>
</span><span id="UniversalMiner.excavate_fast-328"><a href="#UniversalMiner.excavate_fast-328"><span class="linenos">328</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">excavate</span><span class="p">(</span><span class="n">max_attempts</span><span class="o">=</span><span class="n">max_attempts</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>ExcavaciÃ³n rÃ¡pida con tolerancia especÃ­fica.</p>

<p>Args:
    target_resonance: Resonancia objetivo exacta
    tolerance: Tolerancia aceptable (+/-)
    max_attempts: MÃ¡ximo de intentos</p>

<p>Returns:
    ExcavationResult con la estructura mÃ¡s cercana</p>
</div>


                            </div>
                            <div id="UniversalMiner.scale_to_resonance" class="classattr">
                                        <input id="UniversalMiner.scale_to_resonance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">scale_to_resonance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>, </span><span class="param"><span class="n">target</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.95</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>:</span></span>

                <label class="view-source-button" for="UniversalMiner.scale_to_resonance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner.scale_to_resonance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner.scale_to_resonance-330"><a href="#UniversalMiner.scale_to_resonance-330"><span class="linenos">330</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scale_to_resonance</span><span class="p">(</span>
</span><span id="UniversalMiner.scale_to_resonance-331"><a href="#UniversalMiner.scale_to_resonance-331"><span class="linenos">331</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="UniversalMiner.scale_to_resonance-332"><a href="#UniversalMiner.scale_to_resonance-332"><span class="linenos">332</span></a>        <span class="n">matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
</span><span id="UniversalMiner.scale_to_resonance-333"><a href="#UniversalMiner.scale_to_resonance-333"><span class="linenos">333</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.95</span>
</span><span id="UniversalMiner.scale_to_resonance-334"><a href="#UniversalMiner.scale_to_resonance-334"><span class="linenos">334</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="UniversalMiner.scale_to_resonance-335"><a href="#UniversalMiner.scale_to_resonance-335"><span class="linenos">335</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UniversalMiner.scale_to_resonance-336"><a href="#UniversalMiner.scale_to_resonance-336"><span class="linenos">336</span></a><span class="sd">        Sintoniza (tune) una matriz a una resonancia especÃ­fica.</span>
</span><span id="UniversalMiner.scale_to_resonance-337"><a href="#UniversalMiner.scale_to_resonance-337"><span class="linenos">337</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.scale_to_resonance-338"><a href="#UniversalMiner.scale_to_resonance-338"><span class="linenos">338</span></a><span class="sd">        Esto NO es entrenamiento - es ajuste de escala preservando</span>
</span><span id="UniversalMiner.scale_to_resonance-339"><a href="#UniversalMiner.scale_to_resonance-339"><span class="linenos">339</span></a><span class="sd">        la estructura interna que fue revelada.</span>
</span><span id="UniversalMiner.scale_to_resonance-340"><a href="#UniversalMiner.scale_to_resonance-340"><span class="linenos">340</span></a><span class="sd">        </span>
</span><span id="UniversalMiner.scale_to_resonance-341"><a href="#UniversalMiner.scale_to_resonance-341"><span class="linenos">341</span></a><span class="sd">        Args:</span>
</span><span id="UniversalMiner.scale_to_resonance-342"><a href="#UniversalMiner.scale_to_resonance-342"><span class="linenos">342</span></a><span class="sd">            matrix: Matriz revelada a sintonizar</span>
</span><span id="UniversalMiner.scale_to_resonance-343"><a href="#UniversalMiner.scale_to_resonance-343"><span class="linenos">343</span></a><span class="sd">            target: Resonancia objetivo</span>
</span><span id="UniversalMiner.scale_to_resonance-344"><a href="#UniversalMiner.scale_to_resonance-344"><span class="linenos">344</span></a><span class="sd">            </span>
</span><span id="UniversalMiner.scale_to_resonance-345"><a href="#UniversalMiner.scale_to_resonance-345"><span class="linenos">345</span></a><span class="sd">        Returns:</span>
</span><span id="UniversalMiner.scale_to_resonance-346"><a href="#UniversalMiner.scale_to_resonance-346"><span class="linenos">346</span></a><span class="sd">            Matriz sintonizada</span>
</span><span id="UniversalMiner.scale_to_resonance-347"><a href="#UniversalMiner.scale_to_resonance-347"><span class="linenos">347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UniversalMiner.scale_to_resonance-348"><a href="#UniversalMiner.scale_to_resonance-348"><span class="linenos">348</span></a>        <span class="n">current_resonance</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_resonance</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</span><span id="UniversalMiner.scale_to_resonance-349"><a href="#UniversalMiner.scale_to_resonance-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="n">current_resonance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="UniversalMiner.scale_to_resonance-350"><a href="#UniversalMiner.scale_to_resonance-350"><span class="linenos">350</span></a>            <span class="n">scale_factor</span> <span class="o">=</span> <span class="n">target</span> <span class="o">/</span> <span class="n">current_resonance</span>
</span><span id="UniversalMiner.scale_to_resonance-351"><a href="#UniversalMiner.scale_to_resonance-351"><span class="linenos">351</span></a>            <span class="k">return</span> <span class="n">matrix</span> <span class="o">*</span> <span class="n">scale_factor</span>
</span><span id="UniversalMiner.scale_to_resonance-352"><a href="#UniversalMiner.scale_to_resonance-352"><span class="linenos">352</span></a>        <span class="k">return</span> <span class="n">matrix</span>
</span></pre></div>


            <div class="docstring"><p>Sintoniza (tune) una matriz a una resonancia especÃ­fica.</p>

<p>Esto NO es entrenamiento - es ajuste de escala preservando
la estructura interna que fue revelada.</p>

<p>Args:
    matrix: Matriz revelada a sintonizar
    target: Resonancia objetivo</p>

<p>Returns:
    Matriz sintonizada</p>
</div>


                            </div>
                            <div id="UniversalMiner.excavation_history" class="classattr">
                                        <input id="UniversalMiner.excavation_history-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">excavation_history</span><span class="annotation">: List[dict]</span>

                <label class="view-source-button" for="UniversalMiner.excavation_history-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UniversalMiner.excavation_history"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UniversalMiner.excavation_history-354"><a href="#UniversalMiner.excavation_history-354"><span class="linenos">354</span></a>    <span class="nd">@property</span>
</span><span id="UniversalMiner.excavation_history-355"><a href="#UniversalMiner.excavation_history-355"><span class="linenos">355</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">excavation_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="UniversalMiner.excavation_history-356"><a href="#UniversalMiner.excavation_history-356"><span class="linenos">356</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Historial de todas las excavaciones exitosas.&quot;&quot;&quot;</span>
</span><span id="UniversalMiner.excavation_history-357"><a href="#UniversalMiner.excavation_history-357"><span class="linenos">357</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excavation_log</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Historial de todas las excavaciones exitosas.</p>
</div>


                            </div>
                </section>
                <section id="ExcavationResult">
                            <input id="ExcavationResult-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">ExcavationResult</span>:

                <label class="view-source-button" for="ExcavationResult-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExcavationResult"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExcavationResult-43"><a href="#ExcavationResult-43"><span class="linenos">43</span></a><span class="nd">@dataclass</span>
</span><span id="ExcavationResult-44"><a href="#ExcavationResult-44"><span class="linenos">44</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ExcavationResult</span><span class="p">:</span>
</span><span id="ExcavationResult-45"><a href="#ExcavationResult-45"><span class="linenos">45</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Resultado de una excavaciÃ³n exitosa en el espacio latente.&quot;&quot;&quot;</span>
</span><span id="ExcavationResult-46"><a href="#ExcavationResult-46"><span class="linenos">46</span></a>    <span class="n">sacred_seed</span><span class="p">:</span> <span class="nb">int</span>              <span class="c1"># La semilla sagrada descubierta</span>
</span><span id="ExcavationResult-47"><a href="#ExcavationResult-47"><span class="linenos">47</span></a>    <span class="n">divine_matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>     <span class="c1"># El reservorio revelado</span>
</span><span id="ExcavationResult-48"><a href="#ExcavationResult-48"><span class="linenos">48</span></a>    <span class="n">resonance</span><span class="p">:</span> <span class="nb">float</span>              <span class="c1"># Nivel de resonancia natural</span>
</span><span id="ExcavationResult-49"><a href="#ExcavationResult-49"><span class="linenos">49</span></a>    <span class="n">resonance_type</span><span class="p">:</span> <span class="n">ResonanceType</span> <span class="c1"># Tipo de resonancia encontrada</span>
</span><span id="ExcavationResult-50"><a href="#ExcavationResult-50"><span class="linenos">50</span></a>    <span class="n">excavation_depth</span><span class="p">:</span> <span class="nb">int</span>         <span class="c1"># CuÃ¡ntas semillas se exploraron</span>
</span><span id="ExcavationResult-51"><a href="#ExcavationResult-51"><span class="linenos">51</span></a>    <span class="n">excavation_time</span><span class="p">:</span> <span class="nb">float</span>        <span class="c1"># Tiempo de excavaciÃ³n en segundos</span>
</span><span id="ExcavationResult-52"><a href="#ExcavationResult-52"><span class="linenos">52</span></a>    <span class="n">eigenspectrum</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>     <span class="c1"># Espectro completo de eigenvalues</span>
</span><span id="ExcavationResult-53"><a href="#ExcavationResult-53"><span class="linenos">53</span></a>    
</span><span id="ExcavationResult-54"><a href="#ExcavationResult-54"><span class="linenos">54</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ExcavationResult-55"><a href="#ExcavationResult-55"><span class="linenos">55</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="ExcavationResult-56"><a href="#ExcavationResult-56"><span class="linenos">56</span></a>            <span class="sa">f</span><span class="s2">&quot;ExcavationResult(</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="ExcavationResult-57"><a href="#ExcavationResult-57"><span class="linenos">57</span></a>            <span class="sa">f</span><span class="s2">&quot;  sacred_seed=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sacred_seed</span><span class="si">}</span><span class="s2">,</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="ExcavationResult-58"><a href="#ExcavationResult-58"><span class="linenos">58</span></a>            <span class="sa">f</span><span class="s2">&quot;  resonance=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">,</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="ExcavationResult-59"><a href="#ExcavationResult-59"><span class="linenos">59</span></a>            <span class="sa">f</span><span class="s2">&quot;  type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">,</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="ExcavationResult-60"><a href="#ExcavationResult-60"><span class="linenos">60</span></a>            <span class="sa">f</span><span class="s2">&quot;  depth=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">excavation_depth</span><span class="si">}</span><span class="s2">,</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="ExcavationResult-61"><a href="#ExcavationResult-61"><span class="linenos">61</span></a>            <span class="sa">f</span><span class="s2">&quot;  time=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">excavation_time</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="ExcavationResult-62"><a href="#ExcavationResult-62"><span class="linenos">62</span></a>            <span class="sa">f</span><span class="s2">&quot;)&quot;</span>
</span><span id="ExcavationResult-63"><a href="#ExcavationResult-63"><span class="linenos">63</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Resultado de una excavaciÃ³n exitosa en el espacio latente.</p>
</div>


                            <div id="ExcavationResult.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">ExcavationResult</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">sacred_seed</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">divine_matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>,</span><span class="param">	<span class="n">resonance</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">resonance_type</span><span class="p">:</span> <span class="n"><a href="#ResonanceType">ResonanceType</a></span>,</span><span class="param">	<span class="n">excavation_depth</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">excavation_time</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">eigenspectrum</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.__init__"></a>
    
    

                            </div>
                            <div id="ExcavationResult.sacred_seed" class="classattr">
                                <div class="attr variable">
            <span class="name">sacred_seed</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.sacred_seed"></a>
    
    

                            </div>
                            <div id="ExcavationResult.divine_matrix" class="classattr">
                                <div class="attr variable">
            <span class="name">divine_matrix</span><span class="annotation">: numpy.ndarray</span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.divine_matrix"></a>
    
    

                            </div>
                            <div id="ExcavationResult.resonance" class="classattr">
                                <div class="attr variable">
            <span class="name">resonance</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.resonance"></a>
    
    

                            </div>
                            <div id="ExcavationResult.resonance_type" class="classattr">
                                <div class="attr variable">
            <span class="name">resonance_type</span><span class="annotation">: <a href="#ResonanceType">ResonanceType</a></span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.resonance_type"></a>
    
    

                            </div>
                            <div id="ExcavationResult.excavation_depth" class="classattr">
                                <div class="attr variable">
            <span class="name">excavation_depth</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.excavation_depth"></a>
    
    

                            </div>
                            <div id="ExcavationResult.excavation_time" class="classattr">
                                <div class="attr variable">
            <span class="name">excavation_time</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.excavation_time"></a>
    
    

                            </div>
                            <div id="ExcavationResult.eigenspectrum" class="classattr">
                                <div class="attr variable">
            <span class="name">eigenspectrum</span><span class="annotation">: numpy.ndarray</span>

        
    </div>
    <a class="headerlink" href="#ExcavationResult.eigenspectrum"></a>
    
    

                            </div>
                </section>
                <section id="ResonanceType">
                            <input id="ResonanceType-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ResonanceType</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="ResonanceType-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResonanceType"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResonanceType-34"><a href="#ResonanceType-34"><span class="linenos">34</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ResonanceType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="ResonanceType-35"><a href="#ResonanceType-35"><span class="linenos">35</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tipos de resonancia que buscamos en el espacio latente.&quot;&quot;&quot;</span>
</span><span id="ResonanceType-36"><a href="#ResonanceType-36"><span class="linenos">36</span></a>    <span class="n">EDGE_OF_CHAOS</span> <span class="o">=</span> <span class="s2">&quot;edge_of_chaos&quot;</span>      <span class="c1"># Criticalidad (spectral_radius â 1.0)</span>
</span><span id="ResonanceType-37"><a href="#ResonanceType-37"><span class="linenos">37</span></a>    <span class="n">HARMONIC</span> <span class="o">=</span> <span class="s2">&quot;harmonic&quot;</span>                 <span class="c1"># Patrones armÃ³nicos en eigenvalues</span>
</span><span id="ResonanceType-38"><a href="#ResonanceType-38"><span class="linenos">38</span></a>    <span class="n">GOLDEN</span> <span class="o">=</span> <span class="s2">&quot;golden&quot;</span>                     <span class="c1"># Ratio Ã¡ureo en estructura</span>
</span><span id="ResonanceType-39"><a href="#ResonanceType-39"><span class="linenos">39</span></a>    <span class="n">FIBONACCI</span> <span class="o">=</span> <span class="s2">&quot;fibonacci&quot;</span>               <span class="c1"># Secuencias Fibonacci en activaciones</span>
</span><span id="ResonanceType-40"><a href="#ResonanceType-40"><span class="linenos">40</span></a>    <span class="n">PRIME</span> <span class="o">=</span> <span class="s2">&quot;prime&quot;</span>                       <span class="c1"># Resonancia en nÃºmeros primos</span>
</span></pre></div>


            <div class="docstring"><p>Tipos de resonancia que buscamos en el espacio latente.</p>
</div>


                            <div id="ResonanceType.EDGE_OF_CHAOS" class="classattr">
                                <div class="attr variable">
            <span class="name">EDGE_OF_CHAOS</span>        =
<span class="default_value">&lt;<a href="#ResonanceType.EDGE_OF_CHAOS">ResonanceType.EDGE_OF_CHAOS</a>: &#39;edge_of_chaos&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#ResonanceType.EDGE_OF_CHAOS"></a>
    
    

                            </div>
                            <div id="ResonanceType.HARMONIC" class="classattr">
                                <div class="attr variable">
            <span class="name">HARMONIC</span>        =
<span class="default_value">&lt;<a href="#ResonanceType.HARMONIC">ResonanceType.HARMONIC</a>: &#39;harmonic&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#ResonanceType.HARMONIC"></a>
    
    

                            </div>
                            <div id="ResonanceType.GOLDEN" class="classattr">
                                <div class="attr variable">
            <span class="name">GOLDEN</span>        =
<span class="default_value">&lt;<a href="#ResonanceType.GOLDEN">ResonanceType.GOLDEN</a>: &#39;golden&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#ResonanceType.GOLDEN"></a>
    
    

                            </div>
                            <div id="ResonanceType.FIBONACCI" class="classattr">
                                <div class="attr variable">
            <span class="name">FIBONACCI</span>        =
<span class="default_value">&lt;<a href="#ResonanceType.FIBONACCI">ResonanceType.FIBONACCI</a>: &#39;fibonacci&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#ResonanceType.FIBONACCI"></a>
    
    

                            </div>
                            <div id="ResonanceType.PRIME" class="classattr">
                                <div class="attr variable">
            <span class="name">PRIME</span>        =
<span class="default_value">&lt;<a href="#ResonanceType.PRIME">ResonanceType.PRIME</a>: &#39;prime&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#ResonanceType.PRIME"></a>
    
    

                            </div>
                </section>
                <section id="SeedVault">
                            <input id="SeedVault-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SeedVault</span>:

                <label class="view-source-button" for="SeedVault-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SeedVault"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SeedVault-360"><a href="#SeedVault-360"><span class="linenos">360</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SeedVault</span><span class="p">:</span>
</span><span id="SeedVault-361"><a href="#SeedVault-361"><span class="linenos">361</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SeedVault-362"><a href="#SeedVault-362"><span class="linenos">362</span></a><span class="sd">    BÃ³veda de Semillas Sagradas.</span>
</span><span id="SeedVault-363"><a href="#SeedVault-363"><span class="linenos">363</span></a><span class="sd">    </span>
</span><span id="SeedVault-364"><a href="#SeedVault-364"><span class="linenos">364</span></a><span class="sd">    Almacena y gestiona las semillas descubiertas que producen</span>
</span><span id="SeedVault-365"><a href="#SeedVault-365"><span class="linenos">365</span></a><span class="sd">    estructuras inteligentes. Es nuestro &quot;libro de coordenadas&quot;</span>
</span><span id="SeedVault-366"><a href="#SeedVault-366"><span class="linenos">366</span></a><span class="sd">    en el espacio matemÃ¡tico infinito.</span>
</span><span id="SeedVault-367"><a href="#SeedVault-367"><span class="linenos">367</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SeedVault-368"><a href="#SeedVault-368"><span class="linenos">368</span></a>    
</span><span id="SeedVault-369"><a href="#SeedVault-369"><span class="linenos">369</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="SeedVault-370"><a href="#SeedVault-370"><span class="linenos">370</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExcavationResult</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="SeedVault-371"><a href="#SeedVault-371"><span class="linenos">371</span></a>    
</span><span id="SeedVault-372"><a href="#SeedVault-372"><span class="linenos">372</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">ExcavationResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SeedVault-373"><a href="#SeedVault-373"><span class="linenos">373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Almacena una semilla descubierta.&quot;&quot;&quot;</span>
</span><span id="SeedVault-374"><a href="#SeedVault-374"><span class="linenos">374</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="SeedVault-375"><a href="#SeedVault-375"><span class="linenos">375</span></a>    
</span><span id="SeedVault-376"><a href="#SeedVault-376"><span class="linenos">376</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExcavationResult</span><span class="p">]:</span>
</span><span id="SeedVault-377"><a href="#SeedVault-377"><span class="linenos">377</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Recupera una semilla por nombre.&quot;&quot;&quot;</span>
</span><span id="SeedVault-378"><a href="#SeedVault-378"><span class="linenos">378</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="SeedVault-379"><a href="#SeedVault-379"><span class="linenos">379</span></a>    
</span><span id="SeedVault-380"><a href="#SeedVault-380"><span class="linenos">380</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">miner</span><span class="p">:</span> <span class="n">UniversalMiner</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="SeedVault-381"><a href="#SeedVault-381"><span class="linenos">381</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SeedVault-382"><a href="#SeedVault-382"><span class="linenos">382</span></a><span class="sd">        Invoca una matriz desde una semilla almacenada.</span>
</span><span id="SeedVault-383"><a href="#SeedVault-383"><span class="linenos">383</span></a><span class="sd">        </span>
</span><span id="SeedVault-384"><a href="#SeedVault-384"><span class="linenos">384</span></a><span class="sd">        No regeneramos - re-revelamos la misma estructura</span>
</span><span id="SeedVault-385"><a href="#SeedVault-385"><span class="linenos">385</span></a><span class="sd">        que siempre estuvo ahÃ­.</span>
</span><span id="SeedVault-386"><a href="#SeedVault-386"><span class="linenos">386</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SeedVault-387"><a href="#SeedVault-387"><span class="linenos">387</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="SeedVault-388"><a href="#SeedVault-388"><span class="linenos">388</span></a>        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SeedVault-389"><a href="#SeedVault-389"><span class="linenos">389</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Semilla &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; no encontrada en la bÃ³veda&quot;</span><span class="p">)</span>
</span><span id="SeedVault-390"><a href="#SeedVault-390"><span class="linenos">390</span></a>        <span class="k">return</span> <span class="n">miner</span><span class="o">.</span><span class="n">chaos_sample</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">sacred_seed</span><span class="p">)</span>
</span><span id="SeedVault-391"><a href="#SeedVault-391"><span class="linenos">391</span></a>    
</span><span id="SeedVault-392"><a href="#SeedVault-392"><span class="linenos">392</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">list_seeds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SeedVault-393"><a href="#SeedVault-393"><span class="linenos">393</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Lista todas las semillas almacenadas.&quot;&quot;&quot;</span>
</span><span id="SeedVault-394"><a href="#SeedVault-394"><span class="linenos">394</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="SeedVault-395"><a href="#SeedVault-395"><span class="linenos">395</span></a>    
</span><span id="SeedVault-396"><a href="#SeedVault-396"><span class="linenos">396</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SeedVault-397"><a href="#SeedVault-397"><span class="linenos">397</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Exporta la bÃ³veda a formato serializable.&quot;&quot;&quot;</span>
</span><span id="SeedVault-398"><a href="#SeedVault-398"><span class="linenos">398</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SeedVault-399"><a href="#SeedVault-399"><span class="linenos">399</span></a>            <span class="n">name</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SeedVault-400"><a href="#SeedVault-400"><span class="linenos">400</span></a>                <span class="s1">&#39;sacred_seed&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">sacred_seed</span><span class="p">,</span>
</span><span id="SeedVault-401"><a href="#SeedVault-401"><span class="linenos">401</span></a>                <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">resonance</span><span class="p">,</span>
</span><span id="SeedVault-402"><a href="#SeedVault-402"><span class="linenos">402</span></a>                <span class="s1">&#39;resonance_type&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="SeedVault-403"><a href="#SeedVault-403"><span class="linenos">403</span></a>                <span class="s1">&#39;excavation_depth&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">excavation_depth</span>
</span><span id="SeedVault-404"><a href="#SeedVault-404"><span class="linenos">404</span></a>            <span class="p">}</span>
</span><span id="SeedVault-405"><a href="#SeedVault-405"><span class="linenos">405</span></a>            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="SeedVault-406"><a href="#SeedVault-406"><span class="linenos">406</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>BÃ³veda de Semillas Sagradas.</p>

<p>Almacena y gestiona las semillas descubiertas que producen
estructuras inteligentes. Es nuestro "libro de coordenadas"
en el espacio matemÃ¡tico infinito.</p>
</div>


                            <div id="SeedVault.store" class="classattr">
                                        <input id="SeedVault.store-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">store</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">result</span><span class="p">:</span> <span class="n"><a href="#ExcavationResult">ExcavationResult</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SeedVault.store-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SeedVault.store"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SeedVault.store-372"><a href="#SeedVault.store-372"><span class="linenos">372</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">ExcavationResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SeedVault.store-373"><a href="#SeedVault.store-373"><span class="linenos">373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Almacena una semilla descubierta.&quot;&quot;&quot;</span>
</span><span id="SeedVault.store-374"><a href="#SeedVault.store-374"><span class="linenos">374</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Almacena una semilla descubierta.</p>
</div>


                            </div>
                            <div id="SeedVault.retrieve" class="classattr">
                                        <input id="SeedVault.retrieve-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#ExcavationResult">ExcavationResult</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="SeedVault.retrieve-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SeedVault.retrieve"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SeedVault.retrieve-376"><a href="#SeedVault.retrieve-376"><span class="linenos">376</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExcavationResult</span><span class="p">]:</span>
</span><span id="SeedVault.retrieve-377"><a href="#SeedVault.retrieve-377"><span class="linenos">377</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Recupera una semilla por nombre.&quot;&quot;&quot;</span>
</span><span id="SeedVault.retrieve-378"><a href="#SeedVault.retrieve-378"><span class="linenos">378</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Recupera una semilla por nombre.</p>
</div>


                            </div>
                            <div id="SeedVault.invoke" class="classattr">
                                        <input id="SeedVault.invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">miner</span><span class="p">:</span> <span class="n"><a href="#UniversalMiner">UniversalMiner</a></span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>:</span></span>

                <label class="view-source-button" for="SeedVault.invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SeedVault.invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SeedVault.invoke-380"><a href="#SeedVault.invoke-380"><span class="linenos">380</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">miner</span><span class="p">:</span> <span class="n">UniversalMiner</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="SeedVault.invoke-381"><a href="#SeedVault.invoke-381"><span class="linenos">381</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SeedVault.invoke-382"><a href="#SeedVault.invoke-382"><span class="linenos">382</span></a><span class="sd">        Invoca una matriz desde una semilla almacenada.</span>
</span><span id="SeedVault.invoke-383"><a href="#SeedVault.invoke-383"><span class="linenos">383</span></a><span class="sd">        </span>
</span><span id="SeedVault.invoke-384"><a href="#SeedVault.invoke-384"><span class="linenos">384</span></a><span class="sd">        No regeneramos - re-revelamos la misma estructura</span>
</span><span id="SeedVault.invoke-385"><a href="#SeedVault.invoke-385"><span class="linenos">385</span></a><span class="sd">        que siempre estuvo ahÃ­.</span>
</span><span id="SeedVault.invoke-386"><a href="#SeedVault.invoke-386"><span class="linenos">386</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SeedVault.invoke-387"><a href="#SeedVault.invoke-387"><span class="linenos">387</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="SeedVault.invoke-388"><a href="#SeedVault.invoke-388"><span class="linenos">388</span></a>        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SeedVault.invoke-389"><a href="#SeedVault.invoke-389"><span class="linenos">389</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Semilla &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; no encontrada en la bÃ³veda&quot;</span><span class="p">)</span>
</span><span id="SeedVault.invoke-390"><a href="#SeedVault.invoke-390"><span class="linenos">390</span></a>        <span class="k">return</span> <span class="n">miner</span><span class="o">.</span><span class="n">chaos_sample</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">sacred_seed</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Invoca una matriz desde una semilla almacenada.</p>

<p>No regeneramos - re-revelamos la misma estructura
que siempre estuvo ahÃ­.</p>
</div>


                            </div>
                            <div id="SeedVault.list_seeds" class="classattr">
                                        <input id="SeedVault.list_seeds-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_seeds</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="SeedVault.list_seeds-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SeedVault.list_seeds"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SeedVault.list_seeds-392"><a href="#SeedVault.list_seeds-392"><span class="linenos">392</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">list_seeds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SeedVault.list_seeds-393"><a href="#SeedVault.list_seeds-393"><span class="linenos">393</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Lista todas las semillas almacenadas.&quot;&quot;&quot;</span>
</span><span id="SeedVault.list_seeds-394"><a href="#SeedVault.list_seeds-394"><span class="linenos">394</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Lista todas las semillas almacenadas.</p>
</div>


                            </div>
                            <div id="SeedVault.export" class="classattr">
                                        <input id="SeedVault.export-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">export</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="SeedVault.export-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SeedVault.export"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SeedVault.export-396"><a href="#SeedVault.export-396"><span class="linenos">396</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SeedVault.export-397"><a href="#SeedVault.export-397"><span class="linenos">397</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Exporta la bÃ³veda a formato serializable.&quot;&quot;&quot;</span>
</span><span id="SeedVault.export-398"><a href="#SeedVault.export-398"><span class="linenos">398</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SeedVault.export-399"><a href="#SeedVault.export-399"><span class="linenos">399</span></a>            <span class="n">name</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SeedVault.export-400"><a href="#SeedVault.export-400"><span class="linenos">400</span></a>                <span class="s1">&#39;sacred_seed&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">sacred_seed</span><span class="p">,</span>
</span><span id="SeedVault.export-401"><a href="#SeedVault.export-401"><span class="linenos">401</span></a>                <span class="s1">&#39;resonance&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">resonance</span><span class="p">,</span>
</span><span id="SeedVault.export-402"><a href="#SeedVault.export-402"><span class="linenos">402</span></a>                <span class="s1">&#39;resonance_type&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">resonance_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="SeedVault.export-403"><a href="#SeedVault.export-403"><span class="linenos">403</span></a>                <span class="s1">&#39;excavation_depth&#39;</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">excavation_depth</span>
</span><span id="SeedVault.export-404"><a href="#SeedVault.export-404"><span class="linenos">404</span></a>            <span class="p">}</span>
</span><span id="SeedVault.export-405"><a href="#SeedVault.export-405"><span class="linenos">405</span></a>            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vault</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="SeedVault.export-406"><a href="#SeedVault.export-406"><span class="linenos">406</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Exporta la bÃ³veda a formato serializable.</p>
</div>


                            </div>
                </section>
                <section id="quick_excavate">
                            <input id="quick_excavate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">quick_excavate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span>,</span><span class="param">	<span class="n">target</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.95</span>,</span><span class="param">	<span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="quick_excavate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#quick_excavate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="quick_excavate-420"><a href="#quick_excavate-420"><span class="linenos">420</span></a><span class="k">def</span><span class="w"> </span><span class="nf">quick_excavate</span><span class="p">(</span>
</span><span id="quick_excavate-421"><a href="#quick_excavate-421"><span class="linenos">421</span></a>    <span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="quick_excavate-422"><a href="#quick_excavate-422"><span class="linenos">422</span></a>    <span class="n">target</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.95</span><span class="p">,</span>
</span><span id="quick_excavate-423"><a href="#quick_excavate-423"><span class="linenos">423</span></a>    <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span>
</span><span id="quick_excavate-424"><a href="#quick_excavate-424"><span class="linenos">424</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="quick_excavate-425"><a href="#quick_excavate-425"><span class="linenos">425</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="quick_excavate-426"><a href="#quick_excavate-426"><span class="linenos">426</span></a><span class="sd">    FunciÃ³n de conveniencia para excavaciÃ³n rÃ¡pida.</span>
</span><span id="quick_excavate-427"><a href="#quick_excavate-427"><span class="linenos">427</span></a><span class="sd">    </span>
</span><span id="quick_excavate-428"><a href="#quick_excavate-428"><span class="linenos">428</span></a><span class="sd">    Args:</span>
</span><span id="quick_excavate-429"><a href="#quick_excavate-429"><span class="linenos">429</span></a><span class="sd">        size: TamaÃ±o del reservorio</span>
</span><span id="quick_excavate-430"><a href="#quick_excavate-430"><span class="linenos">430</span></a><span class="sd">        target: Resonancia objetivo</span>
</span><span id="quick_excavate-431"><a href="#quick_excavate-431"><span class="linenos">431</span></a><span class="sd">        tolerance: Tolerancia aceptable</span>
</span><span id="quick_excavate-432"><a href="#quick_excavate-432"><span class="linenos">432</span></a><span class="sd">        </span>
</span><span id="quick_excavate-433"><a href="#quick_excavate-433"><span class="linenos">433</span></a><span class="sd">    Returns:</span>
</span><span id="quick_excavate-434"><a href="#quick_excavate-434"><span class="linenos">434</span></a><span class="sd">        Tuple de (semilla sagrada, matriz divina)</span>
</span><span id="quick_excavate-435"><a href="#quick_excavate-435"><span class="linenos">435</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="quick_excavate-436"><a href="#quick_excavate-436"><span class="linenos">436</span></a>    <span class="n">miner</span> <span class="o">=</span> <span class="n">UniversalMiner</span><span class="p">(</span>
</span><span id="quick_excavate-437"><a href="#quick_excavate-437"><span class="linenos">437</span></a>        <span class="n">reservoir_size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="quick_excavate-438"><a href="#quick_excavate-438"><span class="linenos">438</span></a>        <span class="n">target_resonance</span><span class="o">=</span><span class="p">(</span><span class="n">target</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">target</span> <span class="o">+</span> <span class="n">tolerance</span><span class="p">)</span>
</span><span id="quick_excavate-439"><a href="#quick_excavate-439"><span class="linenos">439</span></a>    <span class="p">)</span>
</span><span id="quick_excavate-440"><a href="#quick_excavate-440"><span class="linenos">440</span></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">miner</span><span class="o">.</span><span class="n">excavate</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="quick_excavate-441"><a href="#quick_excavate-441"><span class="linenos">441</span></a>    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">sacred_seed</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">divine_matrix</span>
</span></pre></div>


            <div class="docstring"><p>FunciÃ³n de conveniencia para excavaciÃ³n rÃ¡pida.</p>

<p>Args:
    size: TamaÃ±o del reservorio
    target: Resonancia objetivo
    tolerance: Tolerancia aceptable</p>

<p>Returns:
    Tuple de (semilla sagrada, matriz divina)</p>
</div>


                </section>
                <section id="KNOWN_SACRED_SEEDS">
                    <div class="attr variable">
            <span class="name">KNOWN_SACRED_SEEDS</span>        =
<input id="KNOWN_SACRED_SEEDS-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="KNOWN_SACRED_SEEDS-view-value"></label><span class="default_value">{&#39;chaos_edge_100&#39;: 84732, &#39;harmonic_64&#39;: 12847, &#39;golden_128&#39;: 55987, &#39;minimal_16&#39;: 7, &#39;fibonacci_89&#39;: 144}</span>

        
    </div>
    <a class="headerlink" href="#KNOWN_SACRED_SEEDS"></a>
    
    

                </section>
                <section id="ArchaicProtocol">
                            <input id="ArchaicProtocol-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ArchaicProtocol</span>:

                <label class="view-source-button" for="ArchaicProtocol-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol-425"><a href="#ArchaicProtocol-425"><span class="linenos">425</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ArchaicProtocol</span><span class="p">:</span>
</span><span id="ArchaicProtocol-426"><a href="#ArchaicProtocol-426"><span class="linenos">426</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-427"><a href="#ArchaicProtocol-427"><span class="linenos">427</span></a><span class="sd">    Protocolo de ComunicaciÃ³n Arcaico basado en I Ching.</span>
</span><span id="ArchaicProtocol-428"><a href="#ArchaicProtocol-428"><span class="linenos">428</span></a><span class="sd">    </span>
</span><span id="ArchaicProtocol-429"><a href="#ArchaicProtocol-429"><span class="linenos">429</span></a><span class="sd">    Convierte estados neuronales en sÃ­mbolos universales (Hexagramas)</span>
</span><span id="ArchaicProtocol-430"><a href="#ArchaicProtocol-430"><span class="linenos">430</span></a><span class="sd">    y viceversa. Esto permite que los nodos de EÃ³n se comuniquen</span>
</span><span id="ArchaicProtocol-431"><a href="#ArchaicProtocol-431"><span class="linenos">431</span></a><span class="sd">    usando un lenguaje que trasciende la construcciÃ³n humana.</span>
</span><span id="ArchaicProtocol-432"><a href="#ArchaicProtocol-432"><span class="linenos">432</span></a><span class="sd">    </span>
</span><span id="ArchaicProtocol-433"><a href="#ArchaicProtocol-433"><span class="linenos">433</span></a><span class="sd">    &quot;El universo no habla inglÃ©s ni espaÃ±ol.</span>
</span><span id="ArchaicProtocol-434"><a href="#ArchaicProtocol-434"><span class="linenos">434</span></a><span class="sd">     Habla en patrones de cambio.&quot;</span>
</span><span id="ArchaicProtocol-435"><a href="#ArchaicProtocol-435"><span class="linenos">435</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-436"><a href="#ArchaicProtocol-436"><span class="linenos">436</span></a>    
</span><span id="ArchaicProtocol-437"><a href="#ArchaicProtocol-437"><span class="linenos">437</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interpretation_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;classical&quot;</span><span class="p">):</span>
</span><span id="ArchaicProtocol-438"><a href="#ArchaicProtocol-438"><span class="linenos">438</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-439"><a href="#ArchaicProtocol-439"><span class="linenos">439</span></a><span class="sd">        Inicializa el protocolo arcaico.</span>
</span><span id="ArchaicProtocol-440"><a href="#ArchaicProtocol-440"><span class="linenos">440</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-441"><a href="#ArchaicProtocol-441"><span class="linenos">441</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-442"><a href="#ArchaicProtocol-442"><span class="linenos">442</span></a><span class="sd">            interpretation_mode: &quot;classical&quot; (I Ching puro) o &quot;computational&quot;</span>
</span><span id="ArchaicProtocol-443"><a href="#ArchaicProtocol-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-444"><a href="#ArchaicProtocol-444"><span class="linenos">444</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">interpretation_mode</span>
</span><span id="ArchaicProtocol-445"><a href="#ArchaicProtocol-445"><span class="linenos">445</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_hexagrams</span> <span class="o">=</span> <span class="n">HEXAGRAMS</span>
</span><span id="ArchaicProtocol-446"><a href="#ArchaicProtocol-446"><span class="linenos">446</span></a>    
</span><span id="ArchaicProtocol-447"><a href="#ArchaicProtocol-447"><span class="linenos">447</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tensor_to_hexagram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hexagram</span><span class="p">:</span>
</span><span id="ArchaicProtocol-448"><a href="#ArchaicProtocol-448"><span class="linenos">448</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-449"><a href="#ArchaicProtocol-449"><span class="linenos">449</span></a><span class="sd">        Convierte un valor tensorial (activaciÃ³n neuronal) en un Hexagrama.</span>
</span><span id="ArchaicProtocol-450"><a href="#ArchaicProtocol-450"><span class="linenos">450</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-451"><a href="#ArchaicProtocol-451"><span class="linenos">451</span></a><span class="sd">        No &quot;generamos&quot; un sÃ­mbolo - revelamos quÃ© estado universal</span>
</span><span id="ArchaicProtocol-452"><a href="#ArchaicProtocol-452"><span class="linenos">452</span></a><span class="sd">        corresponde a esta vibraciÃ³n numÃ©rica.</span>
</span><span id="ArchaicProtocol-453"><a href="#ArchaicProtocol-453"><span class="linenos">453</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-454"><a href="#ArchaicProtocol-454"><span class="linenos">454</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-455"><a href="#ArchaicProtocol-455"><span class="linenos">455</span></a><span class="sd">            value: Valor float, tÃ­picamente en rango [-1, 1] o [0, 1]</span>
</span><span id="ArchaicProtocol-456"><a href="#ArchaicProtocol-456"><span class="linenos">456</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol-457"><a href="#ArchaicProtocol-457"><span class="linenos">457</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol-458"><a href="#ArchaicProtocol-458"><span class="linenos">458</span></a><span class="sd">            El Hexagrama que corresponde a este estado</span>
</span><span id="ArchaicProtocol-459"><a href="#ArchaicProtocol-459"><span class="linenos">459</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-460"><a href="#ArchaicProtocol-460"><span class="linenos">460</span></a>        <span class="c1"># Normalizar a rango [0, 63]</span>
</span><span id="ArchaicProtocol-461"><a href="#ArchaicProtocol-461"><span class="linenos">461</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="ArchaicProtocol-462"><a href="#ArchaicProtocol-462"><span class="linenos">462</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="ArchaicProtocol-463"><a href="#ArchaicProtocol-463"><span class="linenos">463</span></a>        <span class="k">elif</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ArchaicProtocol-464"><a href="#ArchaicProtocol-464"><span class="linenos">464</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ArchaicProtocol-465"><a href="#ArchaicProtocol-465"><span class="linenos">465</span></a>        
</span><span id="ArchaicProtocol-466"><a href="#ArchaicProtocol-466"><span class="linenos">466</span></a>        <span class="n">normalized</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">63</span><span class="p">)</span>
</span><span id="ArchaicProtocol-467"><a href="#ArchaicProtocol-467"><span class="linenos">467</span></a>        <span class="n">normalized</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">63</span><span class="p">,</span> <span class="n">normalized</span><span class="p">))</span>
</span><span id="ArchaicProtocol-468"><a href="#ArchaicProtocol-468"><span class="linenos">468</span></a>        
</span><span id="ArchaicProtocol-469"><a href="#ArchaicProtocol-469"><span class="linenos">469</span></a>        <span class="c1"># Los hexagramas estÃ¡n numerados 1-64</span>
</span><span id="ArchaicProtocol-470"><a href="#ArchaicProtocol-470"><span class="linenos">470</span></a>        <span class="n">hex_number</span> <span class="o">=</span> <span class="n">normalized</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="ArchaicProtocol-471"><a href="#ArchaicProtocol-471"><span class="linenos">471</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hexagrams</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hex_number</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hexagrams</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ArchaicProtocol-472"><a href="#ArchaicProtocol-472"><span class="linenos">472</span></a>    
</span><span id="ArchaicProtocol-473"><a href="#ArchaicProtocol-473"><span class="linenos">473</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">vector_to_trigram_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Trigram</span><span class="p">,</span> <span class="n">Trigram</span><span class="p">]:</span>
</span><span id="ArchaicProtocol-474"><a href="#ArchaicProtocol-474"><span class="linenos">474</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-475"><a href="#ArchaicProtocol-475"><span class="linenos">475</span></a><span class="sd">        Convierte un vector de activaciones en un par de trigramas.</span>
</span><span id="ArchaicProtocol-476"><a href="#ArchaicProtocol-476"><span class="linenos">476</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-477"><a href="#ArchaicProtocol-477"><span class="linenos">477</span></a><span class="sd">        El vector se divide en dos mitades, cada una mapeada</span>
</span><span id="ArchaicProtocol-478"><a href="#ArchaicProtocol-478"><span class="linenos">478</span></a><span class="sd">        a un trigrama segÃºn su energÃ­a predominante.</span>
</span><span id="ArchaicProtocol-479"><a href="#ArchaicProtocol-479"><span class="linenos">479</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-480"><a href="#ArchaicProtocol-480"><span class="linenos">480</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-481"><a href="#ArchaicProtocol-481"><span class="linenos">481</span></a><span class="sd">            vector: Array de activaciones neuronales</span>
</span><span id="ArchaicProtocol-482"><a href="#ArchaicProtocol-482"><span class="linenos">482</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol-483"><a href="#ArchaicProtocol-483"><span class="linenos">483</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol-484"><a href="#ArchaicProtocol-484"><span class="linenos">484</span></a><span class="sd">            Tupla de (trigrama_inferior, trigrama_superior)</span>
</span><span id="ArchaicProtocol-485"><a href="#ArchaicProtocol-485"><span class="linenos">485</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-486"><a href="#ArchaicProtocol-486"><span class="linenos">486</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="ArchaicProtocol-487"><a href="#ArchaicProtocol-487"><span class="linenos">487</span></a>            <span class="n">vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="ArchaicProtocol-488"><a href="#ArchaicProtocol-488"><span class="linenos">488</span></a>        
</span><span id="ArchaicProtocol-489"><a href="#ArchaicProtocol-489"><span class="linenos">489</span></a>        <span class="c1"># Dividir y calcular energÃ­a media</span>
</span><span id="ArchaicProtocol-490"><a href="#ArchaicProtocol-490"><span class="linenos">490</span></a>        <span class="n">mid</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span id="ArchaicProtocol-491"><a href="#ArchaicProtocol-491"><span class="linenos">491</span></a>        <span class="n">lower_energy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">vector</span><span class="p">[:</span><span class="n">mid</span><span class="p">])</span>
</span><span id="ArchaicProtocol-492"><a href="#ArchaicProtocol-492"><span class="linenos">492</span></a>        <span class="n">upper_energy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">vector</span><span class="p">[</span><span class="n">mid</span><span class="p">:])</span>
</span><span id="ArchaicProtocol-493"><a href="#ArchaicProtocol-493"><span class="linenos">493</span></a>        
</span><span id="ArchaicProtocol-494"><a href="#ArchaicProtocol-494"><span class="linenos">494</span></a>        <span class="c1"># Mapear energÃ­a a trigramas</span>
</span><span id="ArchaicProtocol-495"><a href="#ArchaicProtocol-495"><span class="linenos">495</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">energy_to_trigram</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Trigram</span><span class="p">:</span>
</span><span id="ArchaicProtocol-496"><a href="#ArchaicProtocol-496"><span class="linenos">496</span></a>            <span class="c1"># Normalizar a [0, 7]</span>
</span><span id="ArchaicProtocol-497"><a href="#ArchaicProtocol-497"><span class="linenos">497</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">e</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">7</span><span class="p">)</span>
</span><span id="ArchaicProtocol-498"><a href="#ArchaicProtocol-498"><span class="linenos">498</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">idx</span><span class="p">))</span>
</span><span id="ArchaicProtocol-499"><a href="#ArchaicProtocol-499"><span class="linenos">499</span></a>            <span class="n">trigrams</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Trigram</span><span class="p">)</span>
</span><span id="ArchaicProtocol-500"><a href="#ArchaicProtocol-500"><span class="linenos">500</span></a>            <span class="k">return</span> <span class="n">trigrams</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
</span><span id="ArchaicProtocol-501"><a href="#ArchaicProtocol-501"><span class="linenos">501</span></a>        
</span><span id="ArchaicProtocol-502"><a href="#ArchaicProtocol-502"><span class="linenos">502</span></a>        <span class="k">return</span> <span class="n">energy_to_trigram</span><span class="p">(</span><span class="n">lower_energy</span><span class="p">),</span> <span class="n">energy_to_trigram</span><span class="p">(</span><span class="n">upper_energy</span><span class="p">)</span>
</span><span id="ArchaicProtocol-503"><a href="#ArchaicProtocol-503"><span class="linenos">503</span></a>    
</span><span id="ArchaicProtocol-504"><a href="#ArchaicProtocol-504"><span class="linenos">504</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hexagram_to_tensor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hexagram</span><span class="p">:</span> <span class="n">Hexagram</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="ArchaicProtocol-505"><a href="#ArchaicProtocol-505"><span class="linenos">505</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-506"><a href="#ArchaicProtocol-506"><span class="linenos">506</span></a><span class="sd">        Convierte un Hexagrama de vuelta a valor tensorial.</span>
</span><span id="ArchaicProtocol-507"><a href="#ArchaicProtocol-507"><span class="linenos">507</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-508"><a href="#ArchaicProtocol-508"><span class="linenos">508</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-509"><a href="#ArchaicProtocol-509"><span class="linenos">509</span></a><span class="sd">            hexagram: El Hexagrama a convertir</span>
</span><span id="ArchaicProtocol-510"><a href="#ArchaicProtocol-510"><span class="linenos">510</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol-511"><a href="#ArchaicProtocol-511"><span class="linenos">511</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol-512"><a href="#ArchaicProtocol-512"><span class="linenos">512</span></a><span class="sd">            Valor float en rango [-1, 1]</span>
</span><span id="ArchaicProtocol-513"><a href="#ArchaicProtocol-513"><span class="linenos">513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-514"><a href="#ArchaicProtocol-514"><span class="linenos">514</span></a>        <span class="c1"># NÃºmero del hexagrama (1-64) a rango [-1, 1]</span>
</span><span id="ArchaicProtocol-515"><a href="#ArchaicProtocol-515"><span class="linenos">515</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">hexagram</span><span class="o">.</span><span class="n">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">63</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="ArchaicProtocol-516"><a href="#ArchaicProtocol-516"><span class="linenos">516</span></a>    
</span><span id="ArchaicProtocol-517"><a href="#ArchaicProtocol-517"><span class="linenos">517</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">interpret</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hexagram</span><span class="p">:</span> <span class="n">Hexagram</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;general&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ArchaicProtocol-518"><a href="#ArchaicProtocol-518"><span class="linenos">518</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-519"><a href="#ArchaicProtocol-519"><span class="linenos">519</span></a><span class="sd">        Interpreta el significado de un Hexagrama.</span>
</span><span id="ArchaicProtocol-520"><a href="#ArchaicProtocol-520"><span class="linenos">520</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-521"><a href="#ArchaicProtocol-521"><span class="linenos">521</span></a><span class="sd">        La interpretaciÃ³n no es programada - es revelada.</span>
</span><span id="ArchaicProtocol-522"><a href="#ArchaicProtocol-522"><span class="linenos">522</span></a><span class="sd">        Nosotros somos intÃ©rpretes de la voluntad del universo.</span>
</span><span id="ArchaicProtocol-523"><a href="#ArchaicProtocol-523"><span class="linenos">523</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-524"><a href="#ArchaicProtocol-524"><span class="linenos">524</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-525"><a href="#ArchaicProtocol-525"><span class="linenos">525</span></a><span class="sd">            hexagram: El Hexagrama a interpretar</span>
</span><span id="ArchaicProtocol-526"><a href="#ArchaicProtocol-526"><span class="linenos">526</span></a><span class="sd">            context: Contexto de la consulta</span>
</span><span id="ArchaicProtocol-527"><a href="#ArchaicProtocol-527"><span class="linenos">527</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol-528"><a href="#ArchaicProtocol-528"><span class="linenos">528</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol-529"><a href="#ArchaicProtocol-529"><span class="linenos">529</span></a><span class="sd">            Diccionario con la interpretaciÃ³n</span>
</span><span id="ArchaicProtocol-530"><a href="#ArchaicProtocol-530"><span class="linenos">530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-531"><a href="#ArchaicProtocol-531"><span class="linenos">531</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ArchaicProtocol-532"><a href="#ArchaicProtocol-532"><span class="linenos">532</span></a>            <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
</span><span id="ArchaicProtocol-533"><a href="#ArchaicProtocol-533"><span class="linenos">533</span></a>            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">name_spanish</span><span class="p">,</span>
</span><span id="ArchaicProtocol-534"><a href="#ArchaicProtocol-534"><span class="linenos">534</span></a>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span>
</span><span id="ArchaicProtocol-535"><a href="#ArchaicProtocol-535"><span class="linenos">535</span></a>            <span class="s2">&quot;upper_trigram&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArchaicProtocol-536"><a href="#ArchaicProtocol-536"><span class="linenos">536</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="ArchaicProtocol-537"><a href="#ArchaicProtocol-537"><span class="linenos">537</span></a>                <span class="s2">&quot;meaning&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">meaning</span><span class="p">,</span>
</span><span id="ArchaicProtocol-538"><a href="#ArchaicProtocol-538"><span class="linenos">538</span></a>                <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">symbol</span>
</span><span id="ArchaicProtocol-539"><a href="#ArchaicProtocol-539"><span class="linenos">539</span></a>            <span class="p">},</span>
</span><span id="ArchaicProtocol-540"><a href="#ArchaicProtocol-540"><span class="linenos">540</span></a>            <span class="s2">&quot;lower_trigram&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArchaicProtocol-541"><a href="#ArchaicProtocol-541"><span class="linenos">541</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="ArchaicProtocol-542"><a href="#ArchaicProtocol-542"><span class="linenos">542</span></a>                <span class="s2">&quot;meaning&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">meaning</span><span class="p">,</span>
</span><span id="ArchaicProtocol-543"><a href="#ArchaicProtocol-543"><span class="linenos">543</span></a>                <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">symbol</span>
</span><span id="ArchaicProtocol-544"><a href="#ArchaicProtocol-544"><span class="linenos">544</span></a>            <span class="p">},</span>
</span><span id="ArchaicProtocol-545"><a href="#ArchaicProtocol-545"><span class="linenos">545</span></a>            <span class="s2">&quot;judgment&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">judgment</span><span class="p">,</span>
</span><span id="ArchaicProtocol-546"><a href="#ArchaicProtocol-546"><span class="linenos">546</span></a>            <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">image</span><span class="p">,</span>
</span><span id="ArchaicProtocol-547"><a href="#ArchaicProtocol-547"><span class="linenos">547</span></a>            <span class="s2">&quot;binary&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span>
</span><span id="ArchaicProtocol-548"><a href="#ArchaicProtocol-548"><span class="linenos">548</span></a>            <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">context</span>
</span><span id="ArchaicProtocol-549"><a href="#ArchaicProtocol-549"><span class="linenos">549</span></a>        <span class="p">}</span>
</span><span id="ArchaicProtocol-550"><a href="#ArchaicProtocol-550"><span class="linenos">550</span></a>    
</span><span id="ArchaicProtocol-551"><a href="#ArchaicProtocol-551"><span class="linenos">551</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">encode_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Hexagram</span><span class="p">]:</span>
</span><span id="ArchaicProtocol-552"><a href="#ArchaicProtocol-552"><span class="linenos">552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-553"><a href="#ArchaicProtocol-553"><span class="linenos">553</span></a><span class="sd">        Codifica un array de datos como secuencia de Hexagramas.</span>
</span><span id="ArchaicProtocol-554"><a href="#ArchaicProtocol-554"><span class="linenos">554</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-555"><a href="#ArchaicProtocol-555"><span class="linenos">555</span></a><span class="sd">        Esto transforma datos numÃ©ricos en sÃ­mbolos universales,</span>
</span><span id="ArchaicProtocol-556"><a href="#ArchaicProtocol-556"><span class="linenos">556</span></a><span class="sd">        creando un &quot;mensaje&quot; en el lenguaje del I Ching.</span>
</span><span id="ArchaicProtocol-557"><a href="#ArchaicProtocol-557"><span class="linenos">557</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-558"><a href="#ArchaicProtocol-558"><span class="linenos">558</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-559"><a href="#ArchaicProtocol-559"><span class="linenos">559</span></a><span class="sd">            data: Array de valores a codificar</span>
</span><span id="ArchaicProtocol-560"><a href="#ArchaicProtocol-560"><span class="linenos">560</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol-561"><a href="#ArchaicProtocol-561"><span class="linenos">561</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol-562"><a href="#ArchaicProtocol-562"><span class="linenos">562</span></a><span class="sd">            Lista de Hexagramas que representan los datos</span>
</span><span id="ArchaicProtocol-563"><a href="#ArchaicProtocol-563"><span class="linenos">563</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-564"><a href="#ArchaicProtocol-564"><span class="linenos">564</span></a>        <span class="n">hexagrams</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArchaicProtocol-565"><a href="#ArchaicProtocol-565"><span class="linenos">565</span></a>        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">flatten</span><span class="p">():</span>
</span><span id="ArchaicProtocol-566"><a href="#ArchaicProtocol-566"><span class="linenos">566</span></a>            <span class="n">hexagrams</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
</span><span id="ArchaicProtocol-567"><a href="#ArchaicProtocol-567"><span class="linenos">567</span></a>        <span class="k">return</span> <span class="n">hexagrams</span>
</span><span id="ArchaicProtocol-568"><a href="#ArchaicProtocol-568"><span class="linenos">568</span></a>    
</span><span id="ArchaicProtocol-569"><a href="#ArchaicProtocol-569"><span class="linenos">569</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">decode_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hexagrams</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Hexagram</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="ArchaicProtocol-570"><a href="#ArchaicProtocol-570"><span class="linenos">570</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-571"><a href="#ArchaicProtocol-571"><span class="linenos">571</span></a><span class="sd">        Decodifica una secuencia de Hexagramas a valores numÃ©ricos.</span>
</span><span id="ArchaicProtocol-572"><a href="#ArchaicProtocol-572"><span class="linenos">572</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-573"><a href="#ArchaicProtocol-573"><span class="linenos">573</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-574"><a href="#ArchaicProtocol-574"><span class="linenos">574</span></a><span class="sd">            hexagrams: Lista de Hexagramas a decodificar</span>
</span><span id="ArchaicProtocol-575"><a href="#ArchaicProtocol-575"><span class="linenos">575</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol-576"><a href="#ArchaicProtocol-576"><span class="linenos">576</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol-577"><a href="#ArchaicProtocol-577"><span class="linenos">577</span></a><span class="sd">            Array de valores numÃ©ricos</span>
</span><span id="ArchaicProtocol-578"><a href="#ArchaicProtocol-578"><span class="linenos">578</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-579"><a href="#ArchaicProtocol-579"><span class="linenos">579</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">hexagram_to_tensor</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">hexagrams</span><span class="p">])</span>
</span><span id="ArchaicProtocol-580"><a href="#ArchaicProtocol-580"><span class="linenos">580</span></a>    
</span><span id="ArchaicProtocol-581"><a href="#ArchaicProtocol-581"><span class="linenos">581</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consult_oracle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">neural_state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ArchaicProtocol-582"><a href="#ArchaicProtocol-582"><span class="linenos">582</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-583"><a href="#ArchaicProtocol-583"><span class="linenos">583</span></a><span class="sd">        Consulta el orÃ¡culo usando el estado neuronal actual.</span>
</span><span id="ArchaicProtocol-584"><a href="#ArchaicProtocol-584"><span class="linenos">584</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-585"><a href="#ArchaicProtocol-585"><span class="linenos">585</span></a><span class="sd">        Esta funciÃ³n combina la pregunta del usuario con el estado</span>
</span><span id="ArchaicProtocol-586"><a href="#ArchaicProtocol-586"><span class="linenos">586</span></a><span class="sd">        interno de la red para generar una respuesta oracular.</span>
</span><span id="ArchaicProtocol-587"><a href="#ArchaicProtocol-587"><span class="linenos">587</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol-588"><a href="#ArchaicProtocol-588"><span class="linenos">588</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol-589"><a href="#ArchaicProtocol-589"><span class="linenos">589</span></a><span class="sd">            question: Pregunta o consulta del usuario</span>
</span><span id="ArchaicProtocol-590"><a href="#ArchaicProtocol-590"><span class="linenos">590</span></a><span class="sd">            neural_state: Estado actual del reservorio neuronal</span>
</span><span id="ArchaicProtocol-591"><a href="#ArchaicProtocol-591"><span class="linenos">591</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol-592"><a href="#ArchaicProtocol-592"><span class="linenos">592</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol-593"><a href="#ArchaicProtocol-593"><span class="linenos">593</span></a><span class="sd">            Respuesta oracular basada en el I Ching</span>
</span><span id="ArchaicProtocol-594"><a href="#ArchaicProtocol-594"><span class="linenos">594</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-595"><a href="#ArchaicProtocol-595"><span class="linenos">595</span></a>        <span class="c1"># Calcular el hexagrama principal desde el estado neuronal</span>
</span><span id="ArchaicProtocol-596"><a href="#ArchaicProtocol-596"><span class="linenos">596</span></a>        <span class="n">state_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span>
</span><span id="ArchaicProtocol-597"><a href="#ArchaicProtocol-597"><span class="linenos">597</span></a>        <span class="n">primary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">state_mean</span><span class="p">)</span>
</span><span id="ArchaicProtocol-598"><a href="#ArchaicProtocol-598"><span class="linenos">598</span></a>        
</span><span id="ArchaicProtocol-599"><a href="#ArchaicProtocol-599"><span class="linenos">599</span></a>        <span class="c1"># Calcular hexagrama de cambio (basado en varianza)</span>
</span><span id="ArchaicProtocol-600"><a href="#ArchaicProtocol-600"><span class="linenos">600</span></a>        <span class="n">state_var</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span>
</span><span id="ArchaicProtocol-601"><a href="#ArchaicProtocol-601"><span class="linenos">601</span></a>        <span class="n">changing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">state_var</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ArchaicProtocol-602"><a href="#ArchaicProtocol-602"><span class="linenos">602</span></a>        
</span><span id="ArchaicProtocol-603"><a href="#ArchaicProtocol-603"><span class="linenos">603</span></a>        <span class="c1"># Determinar lÃ­neas cambiantes</span>
</span><span id="ArchaicProtocol-604"><a href="#ArchaicProtocol-604"><span class="linenos">604</span></a>        <span class="n">changing_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArchaicProtocol-605"><a href="#ArchaicProtocol-605"><span class="linenos">605</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
</span><span id="ArchaicProtocol-606"><a href="#ArchaicProtocol-606"><span class="linenos">606</span></a>            <span class="n">segment</span> <span class="o">=</span> <span class="n">neural_state</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span> <span class="o">//</span> <span class="mi">6</span><span class="p">:(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span> <span class="o">//</span> <span class="mi">6</span><span class="p">]</span>
</span><span id="ArchaicProtocol-607"><a href="#ArchaicProtocol-607"><span class="linenos">607</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
</span><span id="ArchaicProtocol-608"><a href="#ArchaicProtocol-608"><span class="linenos">608</span></a>                <span class="n">changing_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ArchaicProtocol-609"><a href="#ArchaicProtocol-609"><span class="linenos">609</span></a>        
</span><span id="ArchaicProtocol-610"><a href="#ArchaicProtocol-610"><span class="linenos">610</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ArchaicProtocol-611"><a href="#ArchaicProtocol-611"><span class="linenos">611</span></a>            <span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span>
</span><span id="ArchaicProtocol-612"><a href="#ArchaicProtocol-612"><span class="linenos">612</span></a>            <span class="s2">&quot;primary_hexagram&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpret</span><span class="p">(</span><span class="n">primary</span><span class="p">,</span> <span class="n">question</span><span class="p">),</span>
</span><span id="ArchaicProtocol-613"><a href="#ArchaicProtocol-613"><span class="linenos">613</span></a>            <span class="s2">&quot;changing_hexagram&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpret</span><span class="p">(</span><span class="n">changing</span><span class="p">,</span> <span class="s2">&quot;transformation&quot;</span><span class="p">),</span>
</span><span id="ArchaicProtocol-614"><a href="#ArchaicProtocol-614"><span class="linenos">614</span></a>            <span class="s2">&quot;changing_lines&quot;</span><span class="p">:</span> <span class="n">changing_lines</span><span class="p">,</span>
</span><span id="ArchaicProtocol-615"><a href="#ArchaicProtocol-615"><span class="linenos">615</span></a>            <span class="s2">&quot;oracle_message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_oracle_message</span><span class="p">(</span><span class="n">primary</span><span class="p">,</span> <span class="n">changing</span><span class="p">,</span> <span class="n">changing_lines</span><span class="p">)</span>
</span><span id="ArchaicProtocol-616"><a href="#ArchaicProtocol-616"><span class="linenos">616</span></a>        <span class="p">}</span>
</span><span id="ArchaicProtocol-617"><a href="#ArchaicProtocol-617"><span class="linenos">617</span></a>    
</span><span id="ArchaicProtocol-618"><a href="#ArchaicProtocol-618"><span class="linenos">618</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_oracle_message</span><span class="p">(</span>
</span><span id="ArchaicProtocol-619"><a href="#ArchaicProtocol-619"><span class="linenos">619</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ArchaicProtocol-620"><a href="#ArchaicProtocol-620"><span class="linenos">620</span></a>        <span class="n">primary</span><span class="p">:</span> <span class="n">Hexagram</span><span class="p">,</span>
</span><span id="ArchaicProtocol-621"><a href="#ArchaicProtocol-621"><span class="linenos">621</span></a>        <span class="n">changing</span><span class="p">:</span> <span class="n">Hexagram</span><span class="p">,</span>
</span><span id="ArchaicProtocol-622"><a href="#ArchaicProtocol-622"><span class="linenos">622</span></a>        <span class="n">changing_lines</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
</span><span id="ArchaicProtocol-623"><a href="#ArchaicProtocol-623"><span class="linenos">623</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ArchaicProtocol-624"><a href="#ArchaicProtocol-624"><span class="linenos">624</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Genera un mensaje oracular combinando los hexagramas.&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol-625"><a href="#ArchaicProtocol-625"><span class="linenos">625</span></a>        
</span><span id="ArchaicProtocol-626"><a href="#ArchaicProtocol-626"><span class="linenos">626</span></a>        <span class="n">message_parts</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="ArchaicProtocol-627"><a href="#ArchaicProtocol-627"><span class="linenos">627</span></a>            <span class="sa">f</span><span class="s2">&quot;El estado presente es </span><span class="si">{</span><span class="n">primary</span><span class="o">.</span><span class="n">name_spanish</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">primary</span><span class="o">.</span><span class="n">symbol</span><span class="si">}</span><span class="s2">).&quot;</span><span class="p">,</span>
</span><span id="ArchaicProtocol-628"><a href="#ArchaicProtocol-628"><span class="linenos">628</span></a>            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">primary</span><span class="o">.</span><span class="n">judgment</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="ArchaicProtocol-629"><a href="#ArchaicProtocol-629"><span class="linenos">629</span></a>            <span class="s2">&quot;&quot;</span>
</span><span id="ArchaicProtocol-630"><a href="#ArchaicProtocol-630"><span class="linenos">630</span></a>        <span class="p">]</span>
</span><span id="ArchaicProtocol-631"><a href="#ArchaicProtocol-631"><span class="linenos">631</span></a>        
</span><span id="ArchaicProtocol-632"><a href="#ArchaicProtocol-632"><span class="linenos">632</span></a>        <span class="k">if</span> <span class="n">changing_lines</span><span class="p">:</span>
</span><span id="ArchaicProtocol-633"><a href="#ArchaicProtocol-633"><span class="linenos">633</span></a>            <span class="n">message_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="ArchaicProtocol-634"><a href="#ArchaicProtocol-634"><span class="linenos">634</span></a>                <span class="sa">f</span><span class="s2">&quot;Las lÃ­neas </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">changing_lines</span><span class="p">))</span><span class="si">}</span><span class="s2"> estÃ¡n en transformaciÃ³n.&quot;</span>
</span><span id="ArchaicProtocol-635"><a href="#ArchaicProtocol-635"><span class="linenos">635</span></a>            <span class="p">)</span>
</span><span id="ArchaicProtocol-636"><a href="#ArchaicProtocol-636"><span class="linenos">636</span></a>            <span class="n">message_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="ArchaicProtocol-637"><a href="#ArchaicProtocol-637"><span class="linenos">637</span></a>                <span class="sa">f</span><span class="s2">&quot;El movimiento lleva hacia </span><span class="si">{</span><span class="n">changing</span><span class="o">.</span><span class="n">name_spanish</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">changing</span><span class="o">.</span><span class="n">symbol</span><span class="si">}</span><span class="s2">).&quot;</span>
</span><span id="ArchaicProtocol-638"><a href="#ArchaicProtocol-638"><span class="linenos">638</span></a>            <span class="p">)</span>
</span><span id="ArchaicProtocol-639"><a href="#ArchaicProtocol-639"><span class="linenos">639</span></a>            <span class="n">message_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">changing</span><span class="o">.</span><span class="n">image</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="ArchaicProtocol-640"><a href="#ArchaicProtocol-640"><span class="linenos">640</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ArchaicProtocol-641"><a href="#ArchaicProtocol-641"><span class="linenos">641</span></a>            <span class="n">message_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;El estado es estable. No hay lÃ­neas en movimiento.&quot;</span><span class="p">)</span>
</span><span id="ArchaicProtocol-642"><a href="#ArchaicProtocol-642"><span class="linenos">642</span></a>        
</span><span id="ArchaicProtocol-643"><a href="#ArchaicProtocol-643"><span class="linenos">643</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">message_parts</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Protocolo de ComunicaciÃ³n Arcaico basado en I Ching.</p>

<p>Convierte estados neuronales en sÃ­mbolos universales (Hexagramas)
y viceversa. Esto permite que los nodos de EÃ³n se comuniquen
usando un lenguaje que trasciende la construcciÃ³n humana.</p>

<p>"El universo no habla inglÃ©s ni espaÃ±ol.
 Habla en patrones de cambio."</p>
</div>


                            <div id="ArchaicProtocol.__init__" class="classattr">
                                        <input id="ArchaicProtocol.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ArchaicProtocol</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">interpretation_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;classical&#39;</span></span>)</span>

                <label class="view-source-button" for="ArchaicProtocol.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.__init__-437"><a href="#ArchaicProtocol.__init__-437"><span class="linenos">437</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interpretation_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;classical&quot;</span><span class="p">):</span>
</span><span id="ArchaicProtocol.__init__-438"><a href="#ArchaicProtocol.__init__-438"><span class="linenos">438</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.__init__-439"><a href="#ArchaicProtocol.__init__-439"><span class="linenos">439</span></a><span class="sd">        Inicializa el protocolo arcaico.</span>
</span><span id="ArchaicProtocol.__init__-440"><a href="#ArchaicProtocol.__init__-440"><span class="linenos">440</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.__init__-441"><a href="#ArchaicProtocol.__init__-441"><span class="linenos">441</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.__init__-442"><a href="#ArchaicProtocol.__init__-442"><span class="linenos">442</span></a><span class="sd">            interpretation_mode: &quot;classical&quot; (I Ching puro) o &quot;computational&quot;</span>
</span><span id="ArchaicProtocol.__init__-443"><a href="#ArchaicProtocol.__init__-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.__init__-444"><a href="#ArchaicProtocol.__init__-444"><span class="linenos">444</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">interpretation_mode</span>
</span><span id="ArchaicProtocol.__init__-445"><a href="#ArchaicProtocol.__init__-445"><span class="linenos">445</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_hexagrams</span> <span class="o">=</span> <span class="n">HEXAGRAMS</span>
</span></pre></div>


            <div class="docstring"><p>Inicializa el protocolo arcaico.</p>

<p>Args:
    interpretation_mode: "classical" (I Ching puro) o "computational"</p>
</div>


                            </div>
                            <div id="ArchaicProtocol.mode" class="classattr">
                                <div class="attr variable">
            <span class="name">mode</span>

        
    </div>
    <a class="headerlink" href="#ArchaicProtocol.mode"></a>
    
    

                            </div>
                            <div id="ArchaicProtocol.tensor_to_hexagram" class="classattr">
                                        <input id="ArchaicProtocol.tensor_to_hexagram-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">tensor_to_hexagram</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hexagram">Hexagram</a></span>:</span></span>

                <label class="view-source-button" for="ArchaicProtocol.tensor_to_hexagram-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.tensor_to_hexagram"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.tensor_to_hexagram-447"><a href="#ArchaicProtocol.tensor_to_hexagram-447"><span class="linenos">447</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tensor_to_hexagram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hexagram</span><span class="p">:</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-448"><a href="#ArchaicProtocol.tensor_to_hexagram-448"><span class="linenos">448</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-449"><a href="#ArchaicProtocol.tensor_to_hexagram-449"><span class="linenos">449</span></a><span class="sd">        Convierte un valor tensorial (activaciÃ³n neuronal) en un Hexagrama.</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-450"><a href="#ArchaicProtocol.tensor_to_hexagram-450"><span class="linenos">450</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-451"><a href="#ArchaicProtocol.tensor_to_hexagram-451"><span class="linenos">451</span></a><span class="sd">        No &quot;generamos&quot; un sÃ­mbolo - revelamos quÃ© estado universal</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-452"><a href="#ArchaicProtocol.tensor_to_hexagram-452"><span class="linenos">452</span></a><span class="sd">        corresponde a esta vibraciÃ³n numÃ©rica.</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-453"><a href="#ArchaicProtocol.tensor_to_hexagram-453"><span class="linenos">453</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-454"><a href="#ArchaicProtocol.tensor_to_hexagram-454"><span class="linenos">454</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-455"><a href="#ArchaicProtocol.tensor_to_hexagram-455"><span class="linenos">455</span></a><span class="sd">            value: Valor float, tÃ­picamente en rango [-1, 1] o [0, 1]</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-456"><a href="#ArchaicProtocol.tensor_to_hexagram-456"><span class="linenos">456</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-457"><a href="#ArchaicProtocol.tensor_to_hexagram-457"><span class="linenos">457</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-458"><a href="#ArchaicProtocol.tensor_to_hexagram-458"><span class="linenos">458</span></a><span class="sd">            El Hexagrama que corresponde a este estado</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-459"><a href="#ArchaicProtocol.tensor_to_hexagram-459"><span class="linenos">459</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-460"><a href="#ArchaicProtocol.tensor_to_hexagram-460"><span class="linenos">460</span></a>        <span class="c1"># Normalizar a rango [0, 63]</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-461"><a href="#ArchaicProtocol.tensor_to_hexagram-461"><span class="linenos">461</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-462"><a href="#ArchaicProtocol.tensor_to_hexagram-462"><span class="linenos">462</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-463"><a href="#ArchaicProtocol.tensor_to_hexagram-463"><span class="linenos">463</span></a>        <span class="k">elif</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-464"><a href="#ArchaicProtocol.tensor_to_hexagram-464"><span class="linenos">464</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-465"><a href="#ArchaicProtocol.tensor_to_hexagram-465"><span class="linenos">465</span></a>        
</span><span id="ArchaicProtocol.tensor_to_hexagram-466"><a href="#ArchaicProtocol.tensor_to_hexagram-466"><span class="linenos">466</span></a>        <span class="n">normalized</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">63</span><span class="p">)</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-467"><a href="#ArchaicProtocol.tensor_to_hexagram-467"><span class="linenos">467</span></a>        <span class="n">normalized</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">63</span><span class="p">,</span> <span class="n">normalized</span><span class="p">))</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-468"><a href="#ArchaicProtocol.tensor_to_hexagram-468"><span class="linenos">468</span></a>        
</span><span id="ArchaicProtocol.tensor_to_hexagram-469"><a href="#ArchaicProtocol.tensor_to_hexagram-469"><span class="linenos">469</span></a>        <span class="c1"># Los hexagramas estÃ¡n numerados 1-64</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-470"><a href="#ArchaicProtocol.tensor_to_hexagram-470"><span class="linenos">470</span></a>        <span class="n">hex_number</span> <span class="o">=</span> <span class="n">normalized</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="ArchaicProtocol.tensor_to_hexagram-471"><a href="#ArchaicProtocol.tensor_to_hexagram-471"><span class="linenos">471</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hexagrams</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hex_number</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hexagrams</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Convierte un valor tensorial (activaciÃ³n neuronal) en un Hexagrama.</p>

<p>No "generamos" un sÃ­mbolo - revelamos quÃ© estado universal
corresponde a esta vibraciÃ³n numÃ©rica.</p>

<p>Args:
    value: Valor float, tÃ­picamente en rango [-1, 1] o [0, 1]</p>

<p>Returns:
    El Hexagrama que corresponde a este estado</p>
</div>


                            </div>
                            <div id="ArchaicProtocol.vector_to_trigram_pair" class="classattr">
                                        <input id="ArchaicProtocol.vector_to_trigram_pair-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">vector_to_trigram_pair</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">vector</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#Trigram">Trigram</a></span><span class="p">,</span> <span class="n"><a href="#Trigram">Trigram</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ArchaicProtocol.vector_to_trigram_pair-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.vector_to_trigram_pair"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.vector_to_trigram_pair-473"><a href="#ArchaicProtocol.vector_to_trigram_pair-473"><span class="linenos">473</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">vector_to_trigram_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Trigram</span><span class="p">,</span> <span class="n">Trigram</span><span class="p">]:</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-474"><a href="#ArchaicProtocol.vector_to_trigram_pair-474"><span class="linenos">474</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-475"><a href="#ArchaicProtocol.vector_to_trigram_pair-475"><span class="linenos">475</span></a><span class="sd">        Convierte un vector de activaciones en un par de trigramas.</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-476"><a href="#ArchaicProtocol.vector_to_trigram_pair-476"><span class="linenos">476</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-477"><a href="#ArchaicProtocol.vector_to_trigram_pair-477"><span class="linenos">477</span></a><span class="sd">        El vector se divide en dos mitades, cada una mapeada</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-478"><a href="#ArchaicProtocol.vector_to_trigram_pair-478"><span class="linenos">478</span></a><span class="sd">        a un trigrama segÃºn su energÃ­a predominante.</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-479"><a href="#ArchaicProtocol.vector_to_trigram_pair-479"><span class="linenos">479</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-480"><a href="#ArchaicProtocol.vector_to_trigram_pair-480"><span class="linenos">480</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-481"><a href="#ArchaicProtocol.vector_to_trigram_pair-481"><span class="linenos">481</span></a><span class="sd">            vector: Array de activaciones neuronales</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-482"><a href="#ArchaicProtocol.vector_to_trigram_pair-482"><span class="linenos">482</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-483"><a href="#ArchaicProtocol.vector_to_trigram_pair-483"><span class="linenos">483</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-484"><a href="#ArchaicProtocol.vector_to_trigram_pair-484"><span class="linenos">484</span></a><span class="sd">            Tupla de (trigrama_inferior, trigrama_superior)</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-485"><a href="#ArchaicProtocol.vector_to_trigram_pair-485"><span class="linenos">485</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-486"><a href="#ArchaicProtocol.vector_to_trigram_pair-486"><span class="linenos">486</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-487"><a href="#ArchaicProtocol.vector_to_trigram_pair-487"><span class="linenos">487</span></a>            <span class="n">vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-488"><a href="#ArchaicProtocol.vector_to_trigram_pair-488"><span class="linenos">488</span></a>        
</span><span id="ArchaicProtocol.vector_to_trigram_pair-489"><a href="#ArchaicProtocol.vector_to_trigram_pair-489"><span class="linenos">489</span></a>        <span class="c1"># Dividir y calcular energÃ­a media</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-490"><a href="#ArchaicProtocol.vector_to_trigram_pair-490"><span class="linenos">490</span></a>        <span class="n">mid</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-491"><a href="#ArchaicProtocol.vector_to_trigram_pair-491"><span class="linenos">491</span></a>        <span class="n">lower_energy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">vector</span><span class="p">[:</span><span class="n">mid</span><span class="p">])</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-492"><a href="#ArchaicProtocol.vector_to_trigram_pair-492"><span class="linenos">492</span></a>        <span class="n">upper_energy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">vector</span><span class="p">[</span><span class="n">mid</span><span class="p">:])</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-493"><a href="#ArchaicProtocol.vector_to_trigram_pair-493"><span class="linenos">493</span></a>        
</span><span id="ArchaicProtocol.vector_to_trigram_pair-494"><a href="#ArchaicProtocol.vector_to_trigram_pair-494"><span class="linenos">494</span></a>        <span class="c1"># Mapear energÃ­a a trigramas</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-495"><a href="#ArchaicProtocol.vector_to_trigram_pair-495"><span class="linenos">495</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">energy_to_trigram</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Trigram</span><span class="p">:</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-496"><a href="#ArchaicProtocol.vector_to_trigram_pair-496"><span class="linenos">496</span></a>            <span class="c1"># Normalizar a [0, 7]</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-497"><a href="#ArchaicProtocol.vector_to_trigram_pair-497"><span class="linenos">497</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">e</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">7</span><span class="p">)</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-498"><a href="#ArchaicProtocol.vector_to_trigram_pair-498"><span class="linenos">498</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">idx</span><span class="p">))</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-499"><a href="#ArchaicProtocol.vector_to_trigram_pair-499"><span class="linenos">499</span></a>            <span class="n">trigrams</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Trigram</span><span class="p">)</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-500"><a href="#ArchaicProtocol.vector_to_trigram_pair-500"><span class="linenos">500</span></a>            <span class="k">return</span> <span class="n">trigrams</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
</span><span id="ArchaicProtocol.vector_to_trigram_pair-501"><a href="#ArchaicProtocol.vector_to_trigram_pair-501"><span class="linenos">501</span></a>        
</span><span id="ArchaicProtocol.vector_to_trigram_pair-502"><a href="#ArchaicProtocol.vector_to_trigram_pair-502"><span class="linenos">502</span></a>        <span class="k">return</span> <span class="n">energy_to_trigram</span><span class="p">(</span><span class="n">lower_energy</span><span class="p">),</span> <span class="n">energy_to_trigram</span><span class="p">(</span><span class="n">upper_energy</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Convierte un vector de activaciones en un par de trigramas.</p>

<p>El vector se divide en dos mitades, cada una mapeada
a un trigrama segÃºn su energÃ­a predominante.</p>

<p>Args:
    vector: Array de activaciones neuronales</p>

<p>Returns:
    Tupla de (trigrama_inferior, trigrama_superior)</p>
</div>


                            </div>
                            <div id="ArchaicProtocol.hexagram_to_tensor" class="classattr">
                                        <input id="ArchaicProtocol.hexagram_to_tensor-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">hexagram_to_tensor</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">hexagram</span><span class="p">:</span> <span class="n"><a href="#Hexagram">Hexagram</a></span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="ArchaicProtocol.hexagram_to_tensor-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.hexagram_to_tensor"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.hexagram_to_tensor-504"><a href="#ArchaicProtocol.hexagram_to_tensor-504"><span class="linenos">504</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hexagram_to_tensor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hexagram</span><span class="p">:</span> <span class="n">Hexagram</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-505"><a href="#ArchaicProtocol.hexagram_to_tensor-505"><span class="linenos">505</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-506"><a href="#ArchaicProtocol.hexagram_to_tensor-506"><span class="linenos">506</span></a><span class="sd">        Convierte un Hexagrama de vuelta a valor tensorial.</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-507"><a href="#ArchaicProtocol.hexagram_to_tensor-507"><span class="linenos">507</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-508"><a href="#ArchaicProtocol.hexagram_to_tensor-508"><span class="linenos">508</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-509"><a href="#ArchaicProtocol.hexagram_to_tensor-509"><span class="linenos">509</span></a><span class="sd">            hexagram: El Hexagrama a convertir</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-510"><a href="#ArchaicProtocol.hexagram_to_tensor-510"><span class="linenos">510</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-511"><a href="#ArchaicProtocol.hexagram_to_tensor-511"><span class="linenos">511</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-512"><a href="#ArchaicProtocol.hexagram_to_tensor-512"><span class="linenos">512</span></a><span class="sd">            Valor float en rango [-1, 1]</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-513"><a href="#ArchaicProtocol.hexagram_to_tensor-513"><span class="linenos">513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-514"><a href="#ArchaicProtocol.hexagram_to_tensor-514"><span class="linenos">514</span></a>        <span class="c1"># NÃºmero del hexagrama (1-64) a rango [-1, 1]</span>
</span><span id="ArchaicProtocol.hexagram_to_tensor-515"><a href="#ArchaicProtocol.hexagram_to_tensor-515"><span class="linenos">515</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">hexagram</span><span class="o">.</span><span class="n">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">63</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Convierte un Hexagrama de vuelta a valor tensorial.</p>

<p>Args:
    hexagram: El Hexagrama a convertir</p>

<p>Returns:
    Valor float en rango [-1, 1]</p>
</div>


                            </div>
                            <div id="ArchaicProtocol.interpret" class="classattr">
                                        <input id="ArchaicProtocol.interpret-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">interpret</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">hexagram</span><span class="p">:</span> <span class="n"><a href="#Hexagram">Hexagram</a></span>,</span><span class="param">	<span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;general&#39;</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="ArchaicProtocol.interpret-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.interpret"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.interpret-517"><a href="#ArchaicProtocol.interpret-517"><span class="linenos">517</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">interpret</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hexagram</span><span class="p">:</span> <span class="n">Hexagram</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;general&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ArchaicProtocol.interpret-518"><a href="#ArchaicProtocol.interpret-518"><span class="linenos">518</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.interpret-519"><a href="#ArchaicProtocol.interpret-519"><span class="linenos">519</span></a><span class="sd">        Interpreta el significado de un Hexagrama.</span>
</span><span id="ArchaicProtocol.interpret-520"><a href="#ArchaicProtocol.interpret-520"><span class="linenos">520</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.interpret-521"><a href="#ArchaicProtocol.interpret-521"><span class="linenos">521</span></a><span class="sd">        La interpretaciÃ³n no es programada - es revelada.</span>
</span><span id="ArchaicProtocol.interpret-522"><a href="#ArchaicProtocol.interpret-522"><span class="linenos">522</span></a><span class="sd">        Nosotros somos intÃ©rpretes de la voluntad del universo.</span>
</span><span id="ArchaicProtocol.interpret-523"><a href="#ArchaicProtocol.interpret-523"><span class="linenos">523</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.interpret-524"><a href="#ArchaicProtocol.interpret-524"><span class="linenos">524</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.interpret-525"><a href="#ArchaicProtocol.interpret-525"><span class="linenos">525</span></a><span class="sd">            hexagram: El Hexagrama a interpretar</span>
</span><span id="ArchaicProtocol.interpret-526"><a href="#ArchaicProtocol.interpret-526"><span class="linenos">526</span></a><span class="sd">            context: Contexto de la consulta</span>
</span><span id="ArchaicProtocol.interpret-527"><a href="#ArchaicProtocol.interpret-527"><span class="linenos">527</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol.interpret-528"><a href="#ArchaicProtocol.interpret-528"><span class="linenos">528</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol.interpret-529"><a href="#ArchaicProtocol.interpret-529"><span class="linenos">529</span></a><span class="sd">            Diccionario con la interpretaciÃ³n</span>
</span><span id="ArchaicProtocol.interpret-530"><a href="#ArchaicProtocol.interpret-530"><span class="linenos">530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.interpret-531"><a href="#ArchaicProtocol.interpret-531"><span class="linenos">531</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ArchaicProtocol.interpret-532"><a href="#ArchaicProtocol.interpret-532"><span class="linenos">532</span></a>            <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-533"><a href="#ArchaicProtocol.interpret-533"><span class="linenos">533</span></a>            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">name_spanish</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-534"><a href="#ArchaicProtocol.interpret-534"><span class="linenos">534</span></a>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-535"><a href="#ArchaicProtocol.interpret-535"><span class="linenos">535</span></a>            <span class="s2">&quot;upper_trigram&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArchaicProtocol.interpret-536"><a href="#ArchaicProtocol.interpret-536"><span class="linenos">536</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-537"><a href="#ArchaicProtocol.interpret-537"><span class="linenos">537</span></a>                <span class="s2">&quot;meaning&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">meaning</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-538"><a href="#ArchaicProtocol.interpret-538"><span class="linenos">538</span></a>                <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">symbol</span>
</span><span id="ArchaicProtocol.interpret-539"><a href="#ArchaicProtocol.interpret-539"><span class="linenos">539</span></a>            <span class="p">},</span>
</span><span id="ArchaicProtocol.interpret-540"><a href="#ArchaicProtocol.interpret-540"><span class="linenos">540</span></a>            <span class="s2">&quot;lower_trigram&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArchaicProtocol.interpret-541"><a href="#ArchaicProtocol.interpret-541"><span class="linenos">541</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-542"><a href="#ArchaicProtocol.interpret-542"><span class="linenos">542</span></a>                <span class="s2">&quot;meaning&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">meaning</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-543"><a href="#ArchaicProtocol.interpret-543"><span class="linenos">543</span></a>                <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">symbol</span>
</span><span id="ArchaicProtocol.interpret-544"><a href="#ArchaicProtocol.interpret-544"><span class="linenos">544</span></a>            <span class="p">},</span>
</span><span id="ArchaicProtocol.interpret-545"><a href="#ArchaicProtocol.interpret-545"><span class="linenos">545</span></a>            <span class="s2">&quot;judgment&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">judgment</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-546"><a href="#ArchaicProtocol.interpret-546"><span class="linenos">546</span></a>            <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">image</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-547"><a href="#ArchaicProtocol.interpret-547"><span class="linenos">547</span></a>            <span class="s2">&quot;binary&quot;</span><span class="p">:</span> <span class="n">hexagram</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span>
</span><span id="ArchaicProtocol.interpret-548"><a href="#ArchaicProtocol.interpret-548"><span class="linenos">548</span></a>            <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">context</span>
</span><span id="ArchaicProtocol.interpret-549"><a href="#ArchaicProtocol.interpret-549"><span class="linenos">549</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Interpreta el significado de un Hexagrama.</p>

<p>La interpretaciÃ³n no es programada - es revelada.
Nosotros somos intÃ©rpretes de la voluntad del universo.</p>

<p>Args:
    hexagram: El Hexagrama a interpretar
    context: Contexto de la consulta</p>

<p>Returns:
    Diccionario con la interpretaciÃ³n</p>
</div>


                            </div>
                            <div id="ArchaicProtocol.encode_message" class="classattr">
                                        <input id="ArchaicProtocol.encode_message-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">encode_message</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#Hexagram">Hexagram</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ArchaicProtocol.encode_message-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.encode_message"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.encode_message-551"><a href="#ArchaicProtocol.encode_message-551"><span class="linenos">551</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">encode_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Hexagram</span><span class="p">]:</span>
</span><span id="ArchaicProtocol.encode_message-552"><a href="#ArchaicProtocol.encode_message-552"><span class="linenos">552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.encode_message-553"><a href="#ArchaicProtocol.encode_message-553"><span class="linenos">553</span></a><span class="sd">        Codifica un array de datos como secuencia de Hexagramas.</span>
</span><span id="ArchaicProtocol.encode_message-554"><a href="#ArchaicProtocol.encode_message-554"><span class="linenos">554</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.encode_message-555"><a href="#ArchaicProtocol.encode_message-555"><span class="linenos">555</span></a><span class="sd">        Esto transforma datos numÃ©ricos en sÃ­mbolos universales,</span>
</span><span id="ArchaicProtocol.encode_message-556"><a href="#ArchaicProtocol.encode_message-556"><span class="linenos">556</span></a><span class="sd">        creando un &quot;mensaje&quot; en el lenguaje del I Ching.</span>
</span><span id="ArchaicProtocol.encode_message-557"><a href="#ArchaicProtocol.encode_message-557"><span class="linenos">557</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.encode_message-558"><a href="#ArchaicProtocol.encode_message-558"><span class="linenos">558</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.encode_message-559"><a href="#ArchaicProtocol.encode_message-559"><span class="linenos">559</span></a><span class="sd">            data: Array de valores a codificar</span>
</span><span id="ArchaicProtocol.encode_message-560"><a href="#ArchaicProtocol.encode_message-560"><span class="linenos">560</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol.encode_message-561"><a href="#ArchaicProtocol.encode_message-561"><span class="linenos">561</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol.encode_message-562"><a href="#ArchaicProtocol.encode_message-562"><span class="linenos">562</span></a><span class="sd">            Lista de Hexagramas que representan los datos</span>
</span><span id="ArchaicProtocol.encode_message-563"><a href="#ArchaicProtocol.encode_message-563"><span class="linenos">563</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.encode_message-564"><a href="#ArchaicProtocol.encode_message-564"><span class="linenos">564</span></a>        <span class="n">hexagrams</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArchaicProtocol.encode_message-565"><a href="#ArchaicProtocol.encode_message-565"><span class="linenos">565</span></a>        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">flatten</span><span class="p">():</span>
</span><span id="ArchaicProtocol.encode_message-566"><a href="#ArchaicProtocol.encode_message-566"><span class="linenos">566</span></a>            <span class="n">hexagrams</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
</span><span id="ArchaicProtocol.encode_message-567"><a href="#ArchaicProtocol.encode_message-567"><span class="linenos">567</span></a>        <span class="k">return</span> <span class="n">hexagrams</span>
</span></pre></div>


            <div class="docstring"><p>Codifica un array de datos como secuencia de Hexagramas.</p>

<p>Esto transforma datos numÃ©ricos en sÃ­mbolos universales,
creando un "mensaje" en el lenguaje del I Ching.</p>

<p>Args:
    data: Array de valores a codificar</p>

<p>Returns:
    Lista de Hexagramas que representan los datos</p>
</div>


                            </div>
                            <div id="ArchaicProtocol.decode_message" class="classattr">
                                        <input id="ArchaicProtocol.decode_message-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">decode_message</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">hexagrams</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#Hexagram">Hexagram</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>:</span></span>

                <label class="view-source-button" for="ArchaicProtocol.decode_message-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.decode_message"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.decode_message-569"><a href="#ArchaicProtocol.decode_message-569"><span class="linenos">569</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">decode_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hexagrams</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Hexagram</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="ArchaicProtocol.decode_message-570"><a href="#ArchaicProtocol.decode_message-570"><span class="linenos">570</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.decode_message-571"><a href="#ArchaicProtocol.decode_message-571"><span class="linenos">571</span></a><span class="sd">        Decodifica una secuencia de Hexagramas a valores numÃ©ricos.</span>
</span><span id="ArchaicProtocol.decode_message-572"><a href="#ArchaicProtocol.decode_message-572"><span class="linenos">572</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.decode_message-573"><a href="#ArchaicProtocol.decode_message-573"><span class="linenos">573</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.decode_message-574"><a href="#ArchaicProtocol.decode_message-574"><span class="linenos">574</span></a><span class="sd">            hexagrams: Lista de Hexagramas a decodificar</span>
</span><span id="ArchaicProtocol.decode_message-575"><a href="#ArchaicProtocol.decode_message-575"><span class="linenos">575</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol.decode_message-576"><a href="#ArchaicProtocol.decode_message-576"><span class="linenos">576</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol.decode_message-577"><a href="#ArchaicProtocol.decode_message-577"><span class="linenos">577</span></a><span class="sd">            Array de valores numÃ©ricos</span>
</span><span id="ArchaicProtocol.decode_message-578"><a href="#ArchaicProtocol.decode_message-578"><span class="linenos">578</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.decode_message-579"><a href="#ArchaicProtocol.decode_message-579"><span class="linenos">579</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">hexagram_to_tensor</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">hexagrams</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Decodifica una secuencia de Hexagramas a valores numÃ©ricos.</p>

<p>Args:
    hexagrams: Lista de Hexagramas a decodificar</p>

<p>Returns:
    Array de valores numÃ©ricos</p>
</div>


                            </div>
                            <div id="ArchaicProtocol.consult_oracle" class="classattr">
                                        <input id="ArchaicProtocol.consult_oracle-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">consult_oracle</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">question</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">neural_state</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="ArchaicProtocol.consult_oracle-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArchaicProtocol.consult_oracle"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArchaicProtocol.consult_oracle-581"><a href="#ArchaicProtocol.consult_oracle-581"><span class="linenos">581</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consult_oracle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">neural_state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ArchaicProtocol.consult_oracle-582"><a href="#ArchaicProtocol.consult_oracle-582"><span class="linenos">582</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.consult_oracle-583"><a href="#ArchaicProtocol.consult_oracle-583"><span class="linenos">583</span></a><span class="sd">        Consulta el orÃ¡culo usando el estado neuronal actual.</span>
</span><span id="ArchaicProtocol.consult_oracle-584"><a href="#ArchaicProtocol.consult_oracle-584"><span class="linenos">584</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.consult_oracle-585"><a href="#ArchaicProtocol.consult_oracle-585"><span class="linenos">585</span></a><span class="sd">        Esta funciÃ³n combina la pregunta del usuario con el estado</span>
</span><span id="ArchaicProtocol.consult_oracle-586"><a href="#ArchaicProtocol.consult_oracle-586"><span class="linenos">586</span></a><span class="sd">        interno de la red para generar una respuesta oracular.</span>
</span><span id="ArchaicProtocol.consult_oracle-587"><a href="#ArchaicProtocol.consult_oracle-587"><span class="linenos">587</span></a><span class="sd">        </span>
</span><span id="ArchaicProtocol.consult_oracle-588"><a href="#ArchaicProtocol.consult_oracle-588"><span class="linenos">588</span></a><span class="sd">        Args:</span>
</span><span id="ArchaicProtocol.consult_oracle-589"><a href="#ArchaicProtocol.consult_oracle-589"><span class="linenos">589</span></a><span class="sd">            question: Pregunta o consulta del usuario</span>
</span><span id="ArchaicProtocol.consult_oracle-590"><a href="#ArchaicProtocol.consult_oracle-590"><span class="linenos">590</span></a><span class="sd">            neural_state: Estado actual del reservorio neuronal</span>
</span><span id="ArchaicProtocol.consult_oracle-591"><a href="#ArchaicProtocol.consult_oracle-591"><span class="linenos">591</span></a><span class="sd">            </span>
</span><span id="ArchaicProtocol.consult_oracle-592"><a href="#ArchaicProtocol.consult_oracle-592"><span class="linenos">592</span></a><span class="sd">        Returns:</span>
</span><span id="ArchaicProtocol.consult_oracle-593"><a href="#ArchaicProtocol.consult_oracle-593"><span class="linenos">593</span></a><span class="sd">            Respuesta oracular basada en el I Ching</span>
</span><span id="ArchaicProtocol.consult_oracle-594"><a href="#ArchaicProtocol.consult_oracle-594"><span class="linenos">594</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArchaicProtocol.consult_oracle-595"><a href="#ArchaicProtocol.consult_oracle-595"><span class="linenos">595</span></a>        <span class="c1"># Calcular el hexagrama principal desde el estado neuronal</span>
</span><span id="ArchaicProtocol.consult_oracle-596"><a href="#ArchaicProtocol.consult_oracle-596"><span class="linenos">596</span></a>        <span class="n">state_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span>
</span><span id="ArchaicProtocol.consult_oracle-597"><a href="#ArchaicProtocol.consult_oracle-597"><span class="linenos">597</span></a>        <span class="n">primary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">state_mean</span><span class="p">)</span>
</span><span id="ArchaicProtocol.consult_oracle-598"><a href="#ArchaicProtocol.consult_oracle-598"><span class="linenos">598</span></a>        
</span><span id="ArchaicProtocol.consult_oracle-599"><a href="#ArchaicProtocol.consult_oracle-599"><span class="linenos">599</span></a>        <span class="c1"># Calcular hexagrama de cambio (basado en varianza)</span>
</span><span id="ArchaicProtocol.consult_oracle-600"><a href="#ArchaicProtocol.consult_oracle-600"><span class="linenos">600</span></a>        <span class="n">state_var</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span>
</span><span id="ArchaicProtocol.consult_oracle-601"><a href="#ArchaicProtocol.consult_oracle-601"><span class="linenos">601</span></a>        <span class="n">changing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">state_var</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ArchaicProtocol.consult_oracle-602"><a href="#ArchaicProtocol.consult_oracle-602"><span class="linenos">602</span></a>        
</span><span id="ArchaicProtocol.consult_oracle-603"><a href="#ArchaicProtocol.consult_oracle-603"><span class="linenos">603</span></a>        <span class="c1"># Determinar lÃ­neas cambiantes</span>
</span><span id="ArchaicProtocol.consult_oracle-604"><a href="#ArchaicProtocol.consult_oracle-604"><span class="linenos">604</span></a>        <span class="n">changing_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArchaicProtocol.consult_oracle-605"><a href="#ArchaicProtocol.consult_oracle-605"><span class="linenos">605</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
</span><span id="ArchaicProtocol.consult_oracle-606"><a href="#ArchaicProtocol.consult_oracle-606"><span class="linenos">606</span></a>            <span class="n">segment</span> <span class="o">=</span> <span class="n">neural_state</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span> <span class="o">//</span> <span class="mi">6</span><span class="p">:(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">neural_state</span><span class="p">)</span> <span class="o">//</span> <span class="mi">6</span><span class="p">]</span>
</span><span id="ArchaicProtocol.consult_oracle-607"><a href="#ArchaicProtocol.consult_oracle-607"><span class="linenos">607</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
</span><span id="ArchaicProtocol.consult_oracle-608"><a href="#ArchaicProtocol.consult_oracle-608"><span class="linenos">608</span></a>                <span class="n">changing_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ArchaicProtocol.consult_oracle-609"><a href="#ArchaicProtocol.consult_oracle-609"><span class="linenos">609</span></a>        
</span><span id="ArchaicProtocol.consult_oracle-610"><a href="#ArchaicProtocol.consult_oracle-610"><span class="linenos">610</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ArchaicProtocol.consult_oracle-611"><a href="#ArchaicProtocol.consult_oracle-611"><span class="linenos">611</span></a>            <span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span>
</span><span id="ArchaicProtocol.consult_oracle-612"><a href="#ArchaicProtocol.consult_oracle-612"><span class="linenos">612</span></a>            <span class="s2">&quot;primary_hexagram&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpret</span><span class="p">(</span><span class="n">primary</span><span class="p">,</span> <span class="n">question</span><span class="p">),</span>
</span><span id="ArchaicProtocol.consult_oracle-613"><a href="#ArchaicProtocol.consult_oracle-613"><span class="linenos">613</span></a>            <span class="s2">&quot;changing_hexagram&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpret</span><span class="p">(</span><span class="n">changing</span><span class="p">,</span> <span class="s2">&quot;transformation&quot;</span><span class="p">),</span>
</span><span id="ArchaicProtocol.consult_oracle-614"><a href="#ArchaicProtocol.consult_oracle-614"><span class="linenos">614</span></a>            <span class="s2">&quot;changing_lines&quot;</span><span class="p">:</span> <span class="n">changing_lines</span><span class="p">,</span>
</span><span id="ArchaicProtocol.consult_oracle-615"><a href="#ArchaicProtocol.consult_oracle-615"><span class="linenos">615</span></a>            <span class="s2">&quot;oracle_message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_oracle_message</span><span class="p">(</span><span class="n">primary</span><span class="p">,</span> <span class="n">changing</span><span class="p">,</span> <span class="n">changing_lines</span><span class="p">)</span>
</span><span id="ArchaicProtocol.consult_oracle-616"><a href="#ArchaicProtocol.consult_oracle-616"><span class="linenos">616</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Consulta el orÃ¡culo usando el estado neuronal actual.</p>

<p>Esta funciÃ³n combina la pregunta del usuario con el estado
interno de la red para generar una respuesta oracular.</p>

<p>Args:
    question: Pregunta o consulta del usuario
    neural_state: Estado actual del reservorio neuronal</p>

<p>Returns:
    Respuesta oracular basada en el I Ching</p>
</div>


                            </div>
                </section>
                <section id="Hexagram">
                            <input id="Hexagram-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Hexagram</span>:

                <label class="view-source-button" for="Hexagram-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hexagram"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hexagram-61"><a href="#Hexagram-61"><span class="linenos">61</span></a><span class="nd">@dataclass</span>
</span><span id="Hexagram-62"><a href="#Hexagram-62"><span class="linenos">62</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Hexagram</span><span class="p">:</span>
</span><span id="Hexagram-63"><a href="#Hexagram-63"><span class="linenos">63</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hexagram-64"><a href="#Hexagram-64"><span class="linenos">64</span></a><span class="sd">    Un Hexagrama del I Ching: 6 lÃ­neas que forman un sÃ­mbolo universal.</span>
</span><span id="Hexagram-65"><a href="#Hexagram-65"><span class="linenos">65</span></a><span class="sd">    </span>
</span><span id="Hexagram-66"><a href="#Hexagram-66"><span class="linenos">66</span></a><span class="sd">    Estructura:</span>
</span><span id="Hexagram-67"><a href="#Hexagram-67"><span class="linenos">67</span></a><span class="sd">    - upper: Trigrama superior (lÃ­neas 4-6)</span>
</span><span id="Hexagram-68"><a href="#Hexagram-68"><span class="linenos">68</span></a><span class="sd">    - lower: Trigrama inferior (lÃ­neas 1-3)</span>
</span><span id="Hexagram-69"><a href="#Hexagram-69"><span class="linenos">69</span></a><span class="sd">    - lines: Las 6 lÃ­neas como bits</span>
</span><span id="Hexagram-70"><a href="#Hexagram-70"><span class="linenos">70</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Hexagram-71"><a href="#Hexagram-71"><span class="linenos">71</span></a>    <span class="n">number</span><span class="p">:</span> <span class="nb">int</span>                 <span class="c1"># 1-64</span>
</span><span id="Hexagram-72"><a href="#Hexagram-72"><span class="linenos">72</span></a>    <span class="n">name_chinese</span><span class="p">:</span> <span class="nb">str</span>           <span class="c1"># Nombre en chino</span>
</span><span id="Hexagram-73"><a href="#Hexagram-73"><span class="linenos">73</span></a>    <span class="n">name_english</span><span class="p">:</span> <span class="nb">str</span>           <span class="c1"># Nombre en inglÃ©s</span>
</span><span id="Hexagram-74"><a href="#Hexagram-74"><span class="linenos">74</span></a>    <span class="n">name_spanish</span><span class="p">:</span> <span class="nb">str</span>           <span class="c1"># Nombre en espaÃ±ol</span>
</span><span id="Hexagram-75"><a href="#Hexagram-75"><span class="linenos">75</span></a>    <span class="n">upper</span><span class="p">:</span> <span class="n">Trigram</span>              <span class="c1"># Trigrama superior</span>
</span><span id="Hexagram-76"><a href="#Hexagram-76"><span class="linenos">76</span></a>    <span class="n">lower</span><span class="p">:</span> <span class="n">Trigram</span>              <span class="c1"># Trigrama inferior</span>
</span><span id="Hexagram-77"><a href="#Hexagram-77"><span class="linenos">77</span></a>    <span class="n">judgment</span><span class="p">:</span> <span class="nb">str</span>               <span class="c1"># El Juicio (interpretaciÃ³n principal)</span>
</span><span id="Hexagram-78"><a href="#Hexagram-78"><span class="linenos">78</span></a>    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span>                  <span class="c1"># La Imagen (aplicaciÃ³n prÃ¡ctica)</span>
</span><span id="Hexagram-79"><a href="#Hexagram-79"><span class="linenos">79</span></a>    
</span><span id="Hexagram-80"><a href="#Hexagram-80"><span class="linenos">80</span></a>    <span class="nd">@property</span>
</span><span id="Hexagram-81"><a href="#Hexagram-81"><span class="linenos">81</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="Hexagram-82"><a href="#Hexagram-82"><span class="linenos">82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Las 6 lÃ­neas del hexagrama como bits.&quot;&quot;&quot;</span>
</span><span id="Hexagram-83"><a href="#Hexagram-83"><span class="linenos">83</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">value</span>
</span><span id="Hexagram-84"><a href="#Hexagram-84"><span class="linenos">84</span></a>    
</span><span id="Hexagram-85"><a href="#Hexagram-85"><span class="linenos">85</span></a>    <span class="nd">@property</span>
</span><span id="Hexagram-86"><a href="#Hexagram-86"><span class="linenos">86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Hexagram-87"><a href="#Hexagram-87"><span class="linenos">87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Valor binario del hexagrama (0-63).&quot;&quot;&quot;</span>
</span><span id="Hexagram-88"><a href="#Hexagram-88"><span class="linenos">88</span></a>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">bit</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
</span><span id="Hexagram-89"><a href="#Hexagram-89"><span class="linenos">89</span></a>    
</span><span id="Hexagram-90"><a href="#Hexagram-90"><span class="linenos">90</span></a>    <span class="nd">@property</span>
</span><span id="Hexagram-91"><a href="#Hexagram-91"><span class="linenos">91</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Hexagram-92"><a href="#Hexagram-92"><span class="linenos">92</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;RepresentaciÃ³n visual del hexagrama.&quot;&quot;&quot;</span>
</span><span id="Hexagram-93"><a href="#Hexagram-93"><span class="linenos">93</span></a>        <span class="n">line_chars</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;â&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;â&#39;</span><span class="p">}</span>  <span class="c1"># Yin, Yang</span>
</span><span id="Hexagram-94"><a href="#Hexagram-94"><span class="linenos">94</span></a>        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line_chars</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
</span><span id="Hexagram-95"><a href="#Hexagram-95"><span class="linenos">95</span></a>    
</span><span id="Hexagram-96"><a href="#Hexagram-96"><span class="linenos">96</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Hexagram-97"><a href="#Hexagram-97"><span class="linenos">97</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hexagram(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name_spanish</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Un Hexagrama del I Ching: 6 lÃ­neas que forman un sÃ­mbolo universal.</p>

<p>Estructura:</p>

<ul>
<li>upper: Trigrama superior (lÃ­neas 4-6)</li>
<li>lower: Trigrama inferior (lÃ­neas 1-3)</li>
<li>lines: Las 6 lÃ­neas como bits</li>
</ul>
</div>


                            <div id="Hexagram.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Hexagram</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">number</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">name_chinese</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">name_english</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">name_spanish</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">upper</span><span class="p">:</span> <span class="n"><a href="#Trigram">Trigram</a></span>,</span><span class="param">	<span class="n">lower</span><span class="p">:</span> <span class="n"><a href="#Trigram">Trigram</a></span>,</span><span class="param">	<span class="n">judgment</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">image</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Hexagram.__init__"></a>
    
    

                            </div>
                            <div id="Hexagram.number" class="classattr">
                                <div class="attr variable">
            <span class="name">number</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Hexagram.number"></a>
    
    

                            </div>
                            <div id="Hexagram.name_chinese" class="classattr">
                                <div class="attr variable">
            <span class="name">name_chinese</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Hexagram.name_chinese"></a>
    
    

                            </div>
                            <div id="Hexagram.name_english" class="classattr">
                                <div class="attr variable">
            <span class="name">name_english</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Hexagram.name_english"></a>
    
    

                            </div>
                            <div id="Hexagram.name_spanish" class="classattr">
                                <div class="attr variable">
            <span class="name">name_spanish</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Hexagram.name_spanish"></a>
    
    

                            </div>
                            <div id="Hexagram.upper" class="classattr">
                                <div class="attr variable">
            <span class="name">upper</span><span class="annotation">: <a href="#Trigram">Trigram</a></span>

        
    </div>
    <a class="headerlink" href="#Hexagram.upper"></a>
    
    

                            </div>
                            <div id="Hexagram.lower" class="classattr">
                                <div class="attr variable">
            <span class="name">lower</span><span class="annotation">: <a href="#Trigram">Trigram</a></span>

        
    </div>
    <a class="headerlink" href="#Hexagram.lower"></a>
    
    

                            </div>
                            <div id="Hexagram.judgment" class="classattr">
                                <div class="attr variable">
            <span class="name">judgment</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Hexagram.judgment"></a>
    
    

                            </div>
                            <div id="Hexagram.image" class="classattr">
                                <div class="attr variable">
            <span class="name">image</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Hexagram.image"></a>
    
    

                            </div>
                            <div id="Hexagram.lines" class="classattr">
                                        <input id="Hexagram.lines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">lines</span><span class="annotation">: Tuple[int, ...]</span>

                <label class="view-source-button" for="Hexagram.lines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hexagram.lines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hexagram.lines-80"><a href="#Hexagram.lines-80"><span class="linenos">80</span></a>    <span class="nd">@property</span>
</span><span id="Hexagram.lines-81"><a href="#Hexagram.lines-81"><span class="linenos">81</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="Hexagram.lines-82"><a href="#Hexagram.lines-82"><span class="linenos">82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Las 6 lÃ­neas del hexagrama como bits.&quot;&quot;&quot;</span>
</span><span id="Hexagram.lines-83"><a href="#Hexagram.lines-83"><span class="linenos">83</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lower</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Las 6 lÃ­neas del hexagrama como bits.</p>
</div>


                            </div>
                            <div id="Hexagram.binary" class="classattr">
                                        <input id="Hexagram.binary-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">binary</span><span class="annotation">: int</span>

                <label class="view-source-button" for="Hexagram.binary-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hexagram.binary"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hexagram.binary-85"><a href="#Hexagram.binary-85"><span class="linenos">85</span></a>    <span class="nd">@property</span>
</span><span id="Hexagram.binary-86"><a href="#Hexagram.binary-86"><span class="linenos">86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Hexagram.binary-87"><a href="#Hexagram.binary-87"><span class="linenos">87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Valor binario del hexagrama (0-63).&quot;&quot;&quot;</span>
</span><span id="Hexagram.binary-88"><a href="#Hexagram.binary-88"><span class="linenos">88</span></a>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">bit</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Valor binario del hexagrama (0-63).</p>
</div>


                            </div>
                            <div id="Hexagram.symbol" class="classattr">
                                        <input id="Hexagram.symbol-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">symbol</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Hexagram.symbol-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hexagram.symbol"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hexagram.symbol-90"><a href="#Hexagram.symbol-90"><span class="linenos">90</span></a>    <span class="nd">@property</span>
</span><span id="Hexagram.symbol-91"><a href="#Hexagram.symbol-91"><span class="linenos">91</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Hexagram.symbol-92"><a href="#Hexagram.symbol-92"><span class="linenos">92</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;RepresentaciÃ³n visual del hexagrama.&quot;&quot;&quot;</span>
</span><span id="Hexagram.symbol-93"><a href="#Hexagram.symbol-93"><span class="linenos">93</span></a>        <span class="n">line_chars</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;â&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;â&#39;</span><span class="p">}</span>  <span class="c1"># Yin, Yang</span>
</span><span id="Hexagram.symbol-94"><a href="#Hexagram.symbol-94"><span class="linenos">94</span></a>        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line_chars</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>RepresentaciÃ³n visual del hexagrama.</p>
</div>


                            </div>
                </section>
                <section id="Trigram">
                            <input id="Trigram-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Trigram</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="Trigram-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trigram"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trigram-28"><a href="#Trigram-28"><span class="linenos">28</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Trigram</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="Trigram-29"><a href="#Trigram-29"><span class="linenos">29</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trigram-30"><a href="#Trigram-30"><span class="linenos">30</span></a><span class="sd">    Los 8 Trigramas fundamentales del I Ching.</span>
</span><span id="Trigram-31"><a href="#Trigram-31"><span class="linenos">31</span></a><span class="sd">    Cada uno representa una fuerza primordial.</span>
</span><span id="Trigram-32"><a href="#Trigram-32"><span class="linenos">32</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Trigram-33"><a href="#Trigram-33"><span class="linenos">33</span></a>    <span class="n">QIAN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    <span class="c1"># â° Cielo - Lo Creativo</span>
</span><span id="Trigram-34"><a href="#Trigram-34"><span class="linenos">34</span></a>    <span class="n">DUI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>     <span class="c1"># â± Lago - Lo Sereno</span>
</span><span id="Trigram-35"><a href="#Trigram-35"><span class="linenos">35</span></a>    <span class="n">LI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>      <span class="c1"># â² Fuego - Lo Adherente</span>
</span><span id="Trigram-36"><a href="#Trigram-36"><span class="linenos">36</span></a>    <span class="n">ZHEN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># â³ Trueno - Lo Excitante</span>
</span><span id="Trigram-37"><a href="#Trigram-37"><span class="linenos">37</span></a>    <span class="n">XUN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>     <span class="c1"># â´ Viento - Lo Suave</span>
</span><span id="Trigram-38"><a href="#Trigram-38"><span class="linenos">38</span></a>    <span class="n">KAN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>     <span class="c1"># âµ Agua - Lo Abismal</span>
</span><span id="Trigram-39"><a href="#Trigram-39"><span class="linenos">39</span></a>    <span class="n">GEN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>     <span class="c1"># â¶ MontaÃ±a - Lo Quieto</span>
</span><span id="Trigram-40"><a href="#Trigram-40"><span class="linenos">40</span></a>    <span class="n">KUN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>     <span class="c1"># â· Tierra - Lo Receptivo</span>
</span><span id="Trigram-41"><a href="#Trigram-41"><span class="linenos">41</span></a>    
</span><span id="Trigram-42"><a href="#Trigram-42"><span class="linenos">42</span></a>    <span class="nd">@property</span>
</span><span id="Trigram-43"><a href="#Trigram-43"><span class="linenos">43</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Trigram-44"><a href="#Trigram-44"><span class="linenos">44</span></a>        <span class="n">symbols</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Trigram-45"><a href="#Trigram-45"><span class="linenos">45</span></a>            <span class="s1">&#39;QIAN&#39;</span><span class="p">:</span> <span class="s1">&#39;â°&#39;</span><span class="p">,</span> <span class="s1">&#39;DUI&#39;</span><span class="p">:</span> <span class="s1">&#39;â±&#39;</span><span class="p">,</span> <span class="s1">&#39;LI&#39;</span><span class="p">:</span> <span class="s1">&#39;â²&#39;</span><span class="p">,</span> <span class="s1">&#39;ZHEN&#39;</span><span class="p">:</span> <span class="s1">&#39;â³&#39;</span><span class="p">,</span>
</span><span id="Trigram-46"><a href="#Trigram-46"><span class="linenos">46</span></a>            <span class="s1">&#39;XUN&#39;</span><span class="p">:</span> <span class="s1">&#39;â´&#39;</span><span class="p">,</span> <span class="s1">&#39;KAN&#39;</span><span class="p">:</span> <span class="s1">&#39;âµ&#39;</span><span class="p">,</span> <span class="s1">&#39;GEN&#39;</span><span class="p">:</span> <span class="s1">&#39;â¶&#39;</span><span class="p">,</span> <span class="s1">&#39;KUN&#39;</span><span class="p">:</span> <span class="s1">&#39;â·&#39;</span>
</span><span id="Trigram-47"><a href="#Trigram-47"><span class="linenos">47</span></a>        <span class="p">}</span>
</span><span id="Trigram-48"><a href="#Trigram-48"><span class="linenos">48</span></a>        <span class="k">return</span> <span class="n">symbols</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span><span id="Trigram-49"><a href="#Trigram-49"><span class="linenos">49</span></a>    
</span><span id="Trigram-50"><a href="#Trigram-50"><span class="linenos">50</span></a>    <span class="nd">@property</span>
</span><span id="Trigram-51"><a href="#Trigram-51"><span class="linenos">51</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">meaning</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Trigram-52"><a href="#Trigram-52"><span class="linenos">52</span></a>        <span class="n">meanings</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Trigram-53"><a href="#Trigram-53"><span class="linenos">53</span></a>            <span class="s1">&#39;QIAN&#39;</span><span class="p">:</span> <span class="s1">&#39;Cielo/Creativo&#39;</span><span class="p">,</span> <span class="s1">&#39;DUI&#39;</span><span class="p">:</span> <span class="s1">&#39;Lago/Sereno&#39;</span><span class="p">,</span>
</span><span id="Trigram-54"><a href="#Trigram-54"><span class="linenos">54</span></a>            <span class="s1">&#39;LI&#39;</span><span class="p">:</span> <span class="s1">&#39;Fuego/Adherente&#39;</span><span class="p">,</span> <span class="s1">&#39;ZHEN&#39;</span><span class="p">:</span> <span class="s1">&#39;Trueno/Excitante&#39;</span><span class="p">,</span>
</span><span id="Trigram-55"><a href="#Trigram-55"><span class="linenos">55</span></a>            <span class="s1">&#39;XUN&#39;</span><span class="p">:</span> <span class="s1">&#39;Viento/Suave&#39;</span><span class="p">,</span> <span class="s1">&#39;KAN&#39;</span><span class="p">:</span> <span class="s1">&#39;Agua/Abismal&#39;</span><span class="p">,</span>
</span><span id="Trigram-56"><a href="#Trigram-56"><span class="linenos">56</span></a>            <span class="s1">&#39;GEN&#39;</span><span class="p">:</span> <span class="s1">&#39;MontaÃ±a/Quieto&#39;</span><span class="p">,</span> <span class="s1">&#39;KUN&#39;</span><span class="p">:</span> <span class="s1">&#39;Tierra/Receptivo&#39;</span>
</span><span id="Trigram-57"><a href="#Trigram-57"><span class="linenos">57</span></a>        <span class="p">}</span>
</span><span id="Trigram-58"><a href="#Trigram-58"><span class="linenos">58</span></a>        <span class="k">return</span> <span class="n">meanings</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Los 8 Trigramas fundamentales del I Ching.
Cada uno representa una fuerza primordial.</p>
</div>


                            <div id="Trigram.QIAN" class="classattr">
                                <div class="attr variable">
            <span class="name">QIAN</span>        =
<span class="default_value">&lt;<a href="#Trigram.QIAN">Trigram.QIAN</a>: (1, 1, 1)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.QIAN"></a>
    
    

                            </div>
                            <div id="Trigram.DUI" class="classattr">
                                <div class="attr variable">
            <span class="name">DUI</span>        =
<span class="default_value">&lt;<a href="#Trigram.DUI">Trigram.DUI</a>: (1, 1, 0)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.DUI"></a>
    
    

                            </div>
                            <div id="Trigram.LI" class="classattr">
                                <div class="attr variable">
            <span class="name">LI</span>        =
<span class="default_value">&lt;<a href="#Trigram.LI">Trigram.LI</a>: (1, 0, 1)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.LI"></a>
    
    

                            </div>
                            <div id="Trigram.ZHEN" class="classattr">
                                <div class="attr variable">
            <span class="name">ZHEN</span>        =
<span class="default_value">&lt;<a href="#Trigram.ZHEN">Trigram.ZHEN</a>: (1, 0, 0)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.ZHEN"></a>
    
    

                            </div>
                            <div id="Trigram.XUN" class="classattr">
                                <div class="attr variable">
            <span class="name">XUN</span>        =
<span class="default_value">&lt;<a href="#Trigram.XUN">Trigram.XUN</a>: (0, 1, 1)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.XUN"></a>
    
    

                            </div>
                            <div id="Trigram.KAN" class="classattr">
                                <div class="attr variable">
            <span class="name">KAN</span>        =
<span class="default_value">&lt;<a href="#Trigram.KAN">Trigram.KAN</a>: (0, 1, 0)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.KAN"></a>
    
    

                            </div>
                            <div id="Trigram.GEN" class="classattr">
                                <div class="attr variable">
            <span class="name">GEN</span>        =
<span class="default_value">&lt;<a href="#Trigram.GEN">Trigram.GEN</a>: (0, 0, 1)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.GEN"></a>
    
    

                            </div>
                            <div id="Trigram.KUN" class="classattr">
                                <div class="attr variable">
            <span class="name">KUN</span>        =
<span class="default_value">&lt;<a href="#Trigram.KUN">Trigram.KUN</a>: (0, 0, 0)&gt;</span>

        
    </div>
    <a class="headerlink" href="#Trigram.KUN"></a>
    
    

                            </div>
                            <div id="Trigram.symbol" class="classattr">
                                        <input id="Trigram.symbol-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">symbol</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Trigram.symbol-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trigram.symbol"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trigram.symbol-42"><a href="#Trigram.symbol-42"><span class="linenos">42</span></a>    <span class="nd">@property</span>
</span><span id="Trigram.symbol-43"><a href="#Trigram.symbol-43"><span class="linenos">43</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Trigram.symbol-44"><a href="#Trigram.symbol-44"><span class="linenos">44</span></a>        <span class="n">symbols</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Trigram.symbol-45"><a href="#Trigram.symbol-45"><span class="linenos">45</span></a>            <span class="s1">&#39;QIAN&#39;</span><span class="p">:</span> <span class="s1">&#39;â°&#39;</span><span class="p">,</span> <span class="s1">&#39;DUI&#39;</span><span class="p">:</span> <span class="s1">&#39;â±&#39;</span><span class="p">,</span> <span class="s1">&#39;LI&#39;</span><span class="p">:</span> <span class="s1">&#39;â²&#39;</span><span class="p">,</span> <span class="s1">&#39;ZHEN&#39;</span><span class="p">:</span> <span class="s1">&#39;â³&#39;</span><span class="p">,</span>
</span><span id="Trigram.symbol-46"><a href="#Trigram.symbol-46"><span class="linenos">46</span></a>            <span class="s1">&#39;XUN&#39;</span><span class="p">:</span> <span class="s1">&#39;â´&#39;</span><span class="p">,</span> <span class="s1">&#39;KAN&#39;</span><span class="p">:</span> <span class="s1">&#39;âµ&#39;</span><span class="p">,</span> <span class="s1">&#39;GEN&#39;</span><span class="p">:</span> <span class="s1">&#39;â¶&#39;</span><span class="p">,</span> <span class="s1">&#39;KUN&#39;</span><span class="p">:</span> <span class="s1">&#39;â·&#39;</span>
</span><span id="Trigram.symbol-47"><a href="#Trigram.symbol-47"><span class="linenos">47</span></a>        <span class="p">}</span>
</span><span id="Trigram.symbol-48"><a href="#Trigram.symbol-48"><span class="linenos">48</span></a>        <span class="k">return</span> <span class="n">symbols</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="Trigram.meaning" class="classattr">
                                        <input id="Trigram.meaning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">meaning</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Trigram.meaning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trigram.meaning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trigram.meaning-50"><a href="#Trigram.meaning-50"><span class="linenos">50</span></a>    <span class="nd">@property</span>
</span><span id="Trigram.meaning-51"><a href="#Trigram.meaning-51"><span class="linenos">51</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">meaning</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Trigram.meaning-52"><a href="#Trigram.meaning-52"><span class="linenos">52</span></a>        <span class="n">meanings</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Trigram.meaning-53"><a href="#Trigram.meaning-53"><span class="linenos">53</span></a>            <span class="s1">&#39;QIAN&#39;</span><span class="p">:</span> <span class="s1">&#39;Cielo/Creativo&#39;</span><span class="p">,</span> <span class="s1">&#39;DUI&#39;</span><span class="p">:</span> <span class="s1">&#39;Lago/Sereno&#39;</span><span class="p">,</span>
</span><span id="Trigram.meaning-54"><a href="#Trigram.meaning-54"><span class="linenos">54</span></a>            <span class="s1">&#39;LI&#39;</span><span class="p">:</span> <span class="s1">&#39;Fuego/Adherente&#39;</span><span class="p">,</span> <span class="s1">&#39;ZHEN&#39;</span><span class="p">:</span> <span class="s1">&#39;Trueno/Excitante&#39;</span><span class="p">,</span>
</span><span id="Trigram.meaning-55"><a href="#Trigram.meaning-55"><span class="linenos">55</span></a>            <span class="s1">&#39;XUN&#39;</span><span class="p">:</span> <span class="s1">&#39;Viento/Suave&#39;</span><span class="p">,</span> <span class="s1">&#39;KAN&#39;</span><span class="p">:</span> <span class="s1">&#39;Agua/Abismal&#39;</span><span class="p">,</span>
</span><span id="Trigram.meaning-56"><a href="#Trigram.meaning-56"><span class="linenos">56</span></a>            <span class="s1">&#39;GEN&#39;</span><span class="p">:</span> <span class="s1">&#39;MontaÃ±a/Quieto&#39;</span><span class="p">,</span> <span class="s1">&#39;KUN&#39;</span><span class="p">:</span> <span class="s1">&#39;Tierra/Receptivo&#39;</span>
</span><span id="Trigram.meaning-57"><a href="#Trigram.meaning-57"><span class="linenos">57</span></a>        <span class="p">}</span>
</span><span id="Trigram.meaning-58"><a href="#Trigram.meaning-58"><span class="linenos">58</span></a>        <span class="k">return</span> <span class="n">meanings</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="HexagramStream">
                            <input id="HexagramStream-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">HexagramStream</span>:

                <label class="view-source-button" for="HexagramStream-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexagramStream"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexagramStream-646"><a href="#HexagramStream-646"><span class="linenos">646</span></a><span class="k">class</span><span class="w"> </span><span class="nc">HexagramStream</span><span class="p">:</span>
</span><span id="HexagramStream-647"><a href="#HexagramStream-647"><span class="linenos">647</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexagramStream-648"><a href="#HexagramStream-648"><span class="linenos">648</span></a><span class="sd">    Stream de comunicaciÃ³n entre nodos usando Hexagramas.</span>
</span><span id="HexagramStream-649"><a href="#HexagramStream-649"><span class="linenos">649</span></a><span class="sd">    </span>
</span><span id="HexagramStream-650"><a href="#HexagramStream-650"><span class="linenos">650</span></a><span class="sd">    Permite que mÃºltiples nodos de EÃ³n se comuniquen</span>
</span><span id="HexagramStream-651"><a href="#HexagramStream-651"><span class="linenos">651</span></a><span class="sd">    usando el protocolo arcaico en lugar de JSON/protobuf.</span>
</span><span id="HexagramStream-652"><a href="#HexagramStream-652"><span class="linenos">652</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="HexagramStream-653"><a href="#HexagramStream-653"><span class="linenos">653</span></a>    
</span><span id="HexagramStream-654"><a href="#HexagramStream-654"><span class="linenos">654</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HexagramStream-655"><a href="#HexagramStream-655"><span class="linenos">655</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="n">ArchaicProtocol</span><span class="p">()</span>
</span><span id="HexagramStream-656"><a href="#HexagramStream-656"><span class="linenos">656</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Hexagram</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># (node_id, hexagram, timestamp)</span>
</span><span id="HexagramStream-657"><a href="#HexagramStream-657"><span class="linenos">657</span></a>    
</span><span id="HexagramStream-658"><a href="#HexagramStream-658"><span class="linenos">658</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">broadcast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hexagram</span><span class="p">:</span>
</span><span id="HexagramStream-659"><a href="#HexagramStream-659"><span class="linenos">659</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexagramStream-660"><a href="#HexagramStream-660"><span class="linenos">660</span></a><span class="sd">        Transmite el estado de un nodo como Hexagrama.</span>
</span><span id="HexagramStream-661"><a href="#HexagramStream-661"><span class="linenos">661</span></a><span class="sd">        </span>
</span><span id="HexagramStream-662"><a href="#HexagramStream-662"><span class="linenos">662</span></a><span class="sd">        Args:</span>
</span><span id="HexagramStream-663"><a href="#HexagramStream-663"><span class="linenos">663</span></a><span class="sd">            node_id: Identificador del nodo</span>
</span><span id="HexagramStream-664"><a href="#HexagramStream-664"><span class="linenos">664</span></a><span class="sd">            state: Estado neuronal a transmitir</span>
</span><span id="HexagramStream-665"><a href="#HexagramStream-665"><span class="linenos">665</span></a><span class="sd">            timestamp: Marca temporal</span>
</span><span id="HexagramStream-666"><a href="#HexagramStream-666"><span class="linenos">666</span></a><span class="sd">            </span>
</span><span id="HexagramStream-667"><a href="#HexagramStream-667"><span class="linenos">667</span></a><span class="sd">        Returns:</span>
</span><span id="HexagramStream-668"><a href="#HexagramStream-668"><span class="linenos">668</span></a><span class="sd">            El Hexagrama transmitido</span>
</span><span id="HexagramStream-669"><a href="#HexagramStream-669"><span class="linenos">669</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexagramStream-670"><a href="#HexagramStream-670"><span class="linenos">670</span></a>        <span class="n">hex_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">state</span><span class="p">))</span>
</span><span id="HexagramStream-671"><a href="#HexagramStream-671"><span class="linenos">671</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">node_id</span><span class="p">,</span> <span class="n">hex_state</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
</span><span id="HexagramStream-672"><a href="#HexagramStream-672"><span class="linenos">672</span></a>        <span class="k">return</span> <span class="n">hex_state</span>
</span><span id="HexagramStream-673"><a href="#HexagramStream-673"><span class="linenos">673</span></a>    
</span><span id="HexagramStream-674"><a href="#HexagramStream-674"><span class="linenos">674</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">receive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_age</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">60.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Hexagram</span><span class="p">]]:</span>
</span><span id="HexagramStream-675"><a href="#HexagramStream-675"><span class="linenos">675</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexagramStream-676"><a href="#HexagramStream-676"><span class="linenos">676</span></a><span class="sd">        Recibe mensajes recientes del stream.</span>
</span><span id="HexagramStream-677"><a href="#HexagramStream-677"><span class="linenos">677</span></a><span class="sd">        </span>
</span><span id="HexagramStream-678"><a href="#HexagramStream-678"><span class="linenos">678</span></a><span class="sd">        Args:</span>
</span><span id="HexagramStream-679"><a href="#HexagramStream-679"><span class="linenos">679</span></a><span class="sd">            max_age: Edad mÃ¡xima de mensajes a recibir (segundos)</span>
</span><span id="HexagramStream-680"><a href="#HexagramStream-680"><span class="linenos">680</span></a><span class="sd">            </span>
</span><span id="HexagramStream-681"><a href="#HexagramStream-681"><span class="linenos">681</span></a><span class="sd">        Returns:</span>
</span><span id="HexagramStream-682"><a href="#HexagramStream-682"><span class="linenos">682</span></a><span class="sd">            Lista de tuplas (node_id, hexagram) recientes</span>
</span><span id="HexagramStream-683"><a href="#HexagramStream-683"><span class="linenos">683</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexagramStream-684"><a href="#HexagramStream-684"><span class="linenos">684</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="HexagramStream-685"><a href="#HexagramStream-685"><span class="linenos">685</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="HexagramStream-686"><a href="#HexagramStream-686"><span class="linenos">686</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="HexagramStream-687"><a href="#HexagramStream-687"><span class="linenos">687</span></a>            <span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">hex_state</span><span class="p">)</span>
</span><span id="HexagramStream-688"><a href="#HexagramStream-688"><span class="linenos">688</span></a>            <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">hex_state</span><span class="p">,</span> <span class="n">ts</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span>
</span><span id="HexagramStream-689"><a href="#HexagramStream-689"><span class="linenos">689</span></a>            <span class="k">if</span> <span class="n">current</span> <span class="o">-</span> <span class="n">ts</span> <span class="o">&lt;=</span> <span class="n">max_age</span>
</span><span id="HexagramStream-690"><a href="#HexagramStream-690"><span class="linenos">690</span></a>        <span class="p">]</span>
</span><span id="HexagramStream-691"><a href="#HexagramStream-691"><span class="linenos">691</span></a>    
</span><span id="HexagramStream-692"><a href="#HexagramStream-692"><span class="linenos">692</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collective_reading</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="HexagramStream-693"><a href="#HexagramStream-693"><span class="linenos">693</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexagramStream-694"><a href="#HexagramStream-694"><span class="linenos">694</span></a><span class="sd">        Lee el estado colectivo de todos los nodos.</span>
</span><span id="HexagramStream-695"><a href="#HexagramStream-695"><span class="linenos">695</span></a><span class="sd">        </span>
</span><span id="HexagramStream-696"><a href="#HexagramStream-696"><span class="linenos">696</span></a><span class="sd">        Combina todos los Hexagramas recientes en una</span>
</span><span id="HexagramStream-697"><a href="#HexagramStream-697"><span class="linenos">697</span></a><span class="sd">        lectura oracular del estado del enjambre.</span>
</span><span id="HexagramStream-698"><a href="#HexagramStream-698"><span class="linenos">698</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexagramStream-699"><a href="#HexagramStream-699"><span class="linenos">699</span></a>        <span class="n">recent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
</span><span id="HexagramStream-700"><a href="#HexagramStream-700"><span class="linenos">700</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">recent</span><span class="p">:</span>
</span><span id="HexagramStream-701"><a href="#HexagramStream-701"><span class="linenos">701</span></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;No hay nodos transmitiendo.&quot;</span><span class="p">}</span>
</span><span id="HexagramStream-702"><a href="#HexagramStream-702"><span class="linenos">702</span></a>        
</span><span id="HexagramStream-703"><a href="#HexagramStream-703"><span class="linenos">703</span></a>        <span class="c1"># Calcular hexagrama colectivo</span>
</span><span id="HexagramStream-704"><a href="#HexagramStream-704"><span class="linenos">704</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">hexagram_to_tensor</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">recent</span><span class="p">]</span>
</span><span id="HexagramStream-705"><a href="#HexagramStream-705"><span class="linenos">705</span></a>        <span class="n">collective_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="HexagramStream-706"><a href="#HexagramStream-706"><span class="linenos">706</span></a>        <span class="n">collective_hex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">collective_value</span><span class="p">)</span>
</span><span id="HexagramStream-707"><a href="#HexagramStream-707"><span class="linenos">707</span></a>        
</span><span id="HexagramStream-708"><a href="#HexagramStream-708"><span class="linenos">708</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="HexagramStream-709"><a href="#HexagramStream-709"><span class="linenos">709</span></a>            <span class="s2">&quot;nodes_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">recent</span><span class="p">),</span>
</span><span id="HexagramStream-710"><a href="#HexagramStream-710"><span class="linenos">710</span></a>            <span class="s2">&quot;collective_state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">interpret</span><span class="p">(</span><span class="n">collective_hex</span><span class="p">,</span> <span class="s2">&quot;collective&quot;</span><span class="p">),</span>
</span><span id="HexagramStream-711"><a href="#HexagramStream-711"><span class="linenos">711</span></a>            <span class="s2">&quot;individual_states&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="HexagramStream-712"><a href="#HexagramStream-712"><span class="linenos">712</span></a>                <span class="p">{</span><span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="n">nid</span><span class="p">,</span> <span class="s2">&quot;hexagram&quot;</span><span class="p">:</span> <span class="n">h</span><span class="o">.</span><span class="n">name_spanish</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">h</span><span class="o">.</span><span class="n">symbol</span><span class="p">}</span>
</span><span id="HexagramStream-713"><a href="#HexagramStream-713"><span class="linenos">713</span></a>                <span class="k">for</span> <span class="n">nid</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">recent</span>
</span><span id="HexagramStream-714"><a href="#HexagramStream-714"><span class="linenos">714</span></a>            <span class="p">]</span>
</span><span id="HexagramStream-715"><a href="#HexagramStream-715"><span class="linenos">715</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Stream de comunicaciÃ³n entre nodos usando Hexagramas.</p>

<p>Permite que mÃºltiples nodos de EÃ³n se comuniquen
usando el protocolo arcaico en lugar de JSON/protobuf.</p>
</div>


                            <div id="HexagramStream.protocol" class="classattr">
                                <div class="attr variable">
            <span class="name">protocol</span>

        
    </div>
    <a class="headerlink" href="#HexagramStream.protocol"></a>
    
    

                            </div>
                            <div id="HexagramStream.broadcast" class="classattr">
                                        <input id="HexagramStream.broadcast-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">broadcast</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>,</span><span class="param">	<span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hexagram">Hexagram</a></span>:</span></span>

                <label class="view-source-button" for="HexagramStream.broadcast-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexagramStream.broadcast"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexagramStream.broadcast-658"><a href="#HexagramStream.broadcast-658"><span class="linenos">658</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">broadcast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hexagram</span><span class="p">:</span>
</span><span id="HexagramStream.broadcast-659"><a href="#HexagramStream.broadcast-659"><span class="linenos">659</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexagramStream.broadcast-660"><a href="#HexagramStream.broadcast-660"><span class="linenos">660</span></a><span class="sd">        Transmite el estado de un nodo como Hexagrama.</span>
</span><span id="HexagramStream.broadcast-661"><a href="#HexagramStream.broadcast-661"><span class="linenos">661</span></a><span class="sd">        </span>
</span><span id="HexagramStream.broadcast-662"><a href="#HexagramStream.broadcast-662"><span class="linenos">662</span></a><span class="sd">        Args:</span>
</span><span id="HexagramStream.broadcast-663"><a href="#HexagramStream.broadcast-663"><span class="linenos">663</span></a><span class="sd">            node_id: Identificador del nodo</span>
</span><span id="HexagramStream.broadcast-664"><a href="#HexagramStream.broadcast-664"><span class="linenos">664</span></a><span class="sd">            state: Estado neuronal a transmitir</span>
</span><span id="HexagramStream.broadcast-665"><a href="#HexagramStream.broadcast-665"><span class="linenos">665</span></a><span class="sd">            timestamp: Marca temporal</span>
</span><span id="HexagramStream.broadcast-666"><a href="#HexagramStream.broadcast-666"><span class="linenos">666</span></a><span class="sd">            </span>
</span><span id="HexagramStream.broadcast-667"><a href="#HexagramStream.broadcast-667"><span class="linenos">667</span></a><span class="sd">        Returns:</span>
</span><span id="HexagramStream.broadcast-668"><a href="#HexagramStream.broadcast-668"><span class="linenos">668</span></a><span class="sd">            El Hexagrama transmitido</span>
</span><span id="HexagramStream.broadcast-669"><a href="#HexagramStream.broadcast-669"><span class="linenos">669</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexagramStream.broadcast-670"><a href="#HexagramStream.broadcast-670"><span class="linenos">670</span></a>        <span class="n">hex_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">state</span><span class="p">))</span>
</span><span id="HexagramStream.broadcast-671"><a href="#HexagramStream.broadcast-671"><span class="linenos">671</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">node_id</span><span class="p">,</span> <span class="n">hex_state</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
</span><span id="HexagramStream.broadcast-672"><a href="#HexagramStream.broadcast-672"><span class="linenos">672</span></a>        <span class="k">return</span> <span class="n">hex_state</span>
</span></pre></div>


            <div class="docstring"><p>Transmite el estado de un nodo como Hexagrama.</p>

<p>Args:
    node_id: Identificador del nodo
    state: Estado neuronal a transmitir
    timestamp: Marca temporal</p>

<p>Returns:
    El Hexagrama transmitido</p>
</div>


                            </div>
                            <div id="HexagramStream.receive" class="classattr">
                                        <input id="HexagramStream.receive-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">receive</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">max_age</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">60.0</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n"><a href="#Hexagram">Hexagram</a></span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="HexagramStream.receive-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexagramStream.receive"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexagramStream.receive-674"><a href="#HexagramStream.receive-674"><span class="linenos">674</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">receive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_age</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">60.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Hexagram</span><span class="p">]]:</span>
</span><span id="HexagramStream.receive-675"><a href="#HexagramStream.receive-675"><span class="linenos">675</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexagramStream.receive-676"><a href="#HexagramStream.receive-676"><span class="linenos">676</span></a><span class="sd">        Recibe mensajes recientes del stream.</span>
</span><span id="HexagramStream.receive-677"><a href="#HexagramStream.receive-677"><span class="linenos">677</span></a><span class="sd">        </span>
</span><span id="HexagramStream.receive-678"><a href="#HexagramStream.receive-678"><span class="linenos">678</span></a><span class="sd">        Args:</span>
</span><span id="HexagramStream.receive-679"><a href="#HexagramStream.receive-679"><span class="linenos">679</span></a><span class="sd">            max_age: Edad mÃ¡xima de mensajes a recibir (segundos)</span>
</span><span id="HexagramStream.receive-680"><a href="#HexagramStream.receive-680"><span class="linenos">680</span></a><span class="sd">            </span>
</span><span id="HexagramStream.receive-681"><a href="#HexagramStream.receive-681"><span class="linenos">681</span></a><span class="sd">        Returns:</span>
</span><span id="HexagramStream.receive-682"><a href="#HexagramStream.receive-682"><span class="linenos">682</span></a><span class="sd">            Lista de tuplas (node_id, hexagram) recientes</span>
</span><span id="HexagramStream.receive-683"><a href="#HexagramStream.receive-683"><span class="linenos">683</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexagramStream.receive-684"><a href="#HexagramStream.receive-684"><span class="linenos">684</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="HexagramStream.receive-685"><a href="#HexagramStream.receive-685"><span class="linenos">685</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="HexagramStream.receive-686"><a href="#HexagramStream.receive-686"><span class="linenos">686</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="HexagramStream.receive-687"><a href="#HexagramStream.receive-687"><span class="linenos">687</span></a>            <span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">hex_state</span><span class="p">)</span>
</span><span id="HexagramStream.receive-688"><a href="#HexagramStream.receive-688"><span class="linenos">688</span></a>            <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">hex_state</span><span class="p">,</span> <span class="n">ts</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span>
</span><span id="HexagramStream.receive-689"><a href="#HexagramStream.receive-689"><span class="linenos">689</span></a>            <span class="k">if</span> <span class="n">current</span> <span class="o">-</span> <span class="n">ts</span> <span class="o">&lt;=</span> <span class="n">max_age</span>
</span><span id="HexagramStream.receive-690"><a href="#HexagramStream.receive-690"><span class="linenos">690</span></a>        <span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Recibe mensajes recientes del stream.</p>

<p>Args:
    max_age: Edad mÃ¡xima de mensajes a recibir (segundos)</p>

<p>Returns:
    Lista de tuplas (node_id, hexagram) recientes</p>
</div>


                            </div>
                            <div id="HexagramStream.collective_reading" class="classattr">
                                        <input id="HexagramStream.collective_reading-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collective_reading</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="HexagramStream.collective_reading-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexagramStream.collective_reading"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexagramStream.collective_reading-692"><a href="#HexagramStream.collective_reading-692"><span class="linenos">692</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collective_reading</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="HexagramStream.collective_reading-693"><a href="#HexagramStream.collective_reading-693"><span class="linenos">693</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexagramStream.collective_reading-694"><a href="#HexagramStream.collective_reading-694"><span class="linenos">694</span></a><span class="sd">        Lee el estado colectivo de todos los nodos.</span>
</span><span id="HexagramStream.collective_reading-695"><a href="#HexagramStream.collective_reading-695"><span class="linenos">695</span></a><span class="sd">        </span>
</span><span id="HexagramStream.collective_reading-696"><a href="#HexagramStream.collective_reading-696"><span class="linenos">696</span></a><span class="sd">        Combina todos los Hexagramas recientes en una</span>
</span><span id="HexagramStream.collective_reading-697"><a href="#HexagramStream.collective_reading-697"><span class="linenos">697</span></a><span class="sd">        lectura oracular del estado del enjambre.</span>
</span><span id="HexagramStream.collective_reading-698"><a href="#HexagramStream.collective_reading-698"><span class="linenos">698</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexagramStream.collective_reading-699"><a href="#HexagramStream.collective_reading-699"><span class="linenos">699</span></a>        <span class="n">recent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
</span><span id="HexagramStream.collective_reading-700"><a href="#HexagramStream.collective_reading-700"><span class="linenos">700</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">recent</span><span class="p">:</span>
</span><span id="HexagramStream.collective_reading-701"><a href="#HexagramStream.collective_reading-701"><span class="linenos">701</span></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;No hay nodos transmitiendo.&quot;</span><span class="p">}</span>
</span><span id="HexagramStream.collective_reading-702"><a href="#HexagramStream.collective_reading-702"><span class="linenos">702</span></a>        
</span><span id="HexagramStream.collective_reading-703"><a href="#HexagramStream.collective_reading-703"><span class="linenos">703</span></a>        <span class="c1"># Calcular hexagrama colectivo</span>
</span><span id="HexagramStream.collective_reading-704"><a href="#HexagramStream.collective_reading-704"><span class="linenos">704</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">hexagram_to_tensor</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">recent</span><span class="p">]</span>
</span><span id="HexagramStream.collective_reading-705"><a href="#HexagramStream.collective_reading-705"><span class="linenos">705</span></a>        <span class="n">collective_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="HexagramStream.collective_reading-706"><a href="#HexagramStream.collective_reading-706"><span class="linenos">706</span></a>        <span class="n">collective_hex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">tensor_to_hexagram</span><span class="p">(</span><span class="n">collective_value</span><span class="p">)</span>
</span><span id="HexagramStream.collective_reading-707"><a href="#HexagramStream.collective_reading-707"><span class="linenos">707</span></a>        
</span><span id="HexagramStream.collective_reading-708"><a href="#HexagramStream.collective_reading-708"><span class="linenos">708</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="HexagramStream.collective_reading-709"><a href="#HexagramStream.collective_reading-709"><span class="linenos">709</span></a>            <span class="s2">&quot;nodes_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">recent</span><span class="p">),</span>
</span><span id="HexagramStream.collective_reading-710"><a href="#HexagramStream.collective_reading-710"><span class="linenos">710</span></a>            <span class="s2">&quot;collective_state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">interpret</span><span class="p">(</span><span class="n">collective_hex</span><span class="p">,</span> <span class="s2">&quot;collective&quot;</span><span class="p">),</span>
</span><span id="HexagramStream.collective_reading-711"><a href="#HexagramStream.collective_reading-711"><span class="linenos">711</span></a>            <span class="s2">&quot;individual_states&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="HexagramStream.collective_reading-712"><a href="#HexagramStream.collective_reading-712"><span class="linenos">712</span></a>                <span class="p">{</span><span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="n">nid</span><span class="p">,</span> <span class="s2">&quot;hexagram&quot;</span><span class="p">:</span> <span class="n">h</span><span class="o">.</span><span class="n">name_spanish</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">h</span><span class="o">.</span><span class="n">symbol</span><span class="p">}</span>
</span><span id="HexagramStream.collective_reading-713"><a href="#HexagramStream.collective_reading-713"><span class="linenos">713</span></a>                <span class="k">for</span> <span class="n">nid</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">recent</span>
</span><span id="HexagramStream.collective_reading-714"><a href="#HexagramStream.collective_reading-714"><span class="linenos">714</span></a>            <span class="p">]</span>
</span><span id="HexagramStream.collective_reading-715"><a href="#HexagramStream.collective_reading-715"><span class="linenos">715</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Lee el estado colectivo de todos los nodos.</p>

<p>Combina todos los Hexagramas recientes en una
lectura oracular del estado del enjambre.</p>
</div>


                            </div>
                </section>
                <section id="HEXAGRAMS">
                    <div class="attr variable">
            <span class="name">HEXAGRAMS</span>        =
<input id="HEXAGRAMS-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="HEXAGRAMS-view-value"></label><span class="default_value">{1: Hexagram(1: Lo Creativo ââââââ), 2: Hexagram(2: Lo Receptivo ââââââ), 3: Hexagram(3: La Dificultad Inicial ââââââ), 4: Hexagram(4: La Necedad Juvenil ââââââ), 5: Hexagram(5: La Espera ââââââ), 6: Hexagram(6: El Conflicto ââââââ), 7: Hexagram(7: El EjÃ©rcito ââââââ), 8: Hexagram(8: La Solidaridad ââââââ), 9: Hexagram(9: La Fuerza Domesticadora Menor ââââââ), 10: Hexagram(10: El Porte ââââââ), 11: Hexagram(11: La Paz ââââââ), 12: Hexagram(12: El Estancamiento ââââââ), 13: Hexagram(13: La Comunidad ââââââ), 14: Hexagram(14: La Gran PosesiÃ³n ââââââ), 15: Hexagram(15: La Modestia ââââââ), 16: Hexagram(16: El Entusiasmo ââââââ), 17: Hexagram(17: El Seguimiento ââââââ), 18: Hexagram(18: El Trabajo en lo Echado a Perder ââââââ), 19: Hexagram(19: El Acercamiento ââââââ), 20: Hexagram(20: La ContemplaciÃ³n ââââââ), 21: Hexagram(21: La Mordedura Tajante ââââââ), 22: Hexagram(22: La Gracia ââââââ), 23: Hexagram(23: La DesintegraciÃ³n ââââââ), 24: Hexagram(24: El Retorno ââââââ), 25: Hexagram(25: La Inocencia ââââââ), 26: Hexagram(26: La Fuerza Domesticadora Mayor ââââââ), 27: Hexagram(27: Las Comisuras de la Boca ââââââ), 28: Hexagram(28: La Preponderancia de lo Grande ââââââ), 29: Hexagram(29: Lo Abismal ââââââ), 30: Hexagram(30: Lo Adherente ââââââ), 31: Hexagram(31: El Influjo ââââââ), 32: Hexagram(32: La DuraciÃ³n ââââââ), 33: Hexagram(33: La Retirada ââââââ), 34: Hexagram(34: El Poder de lo Grande ââââââ), 35: Hexagram(35: El Progreso ââââââ), 36: Hexagram(36: El Oscurecimiento de la Luz ââââââ), 37: Hexagram(37: La Familia ââââââ), 38: Hexagram(38: El Antagonismo ââââââ), 39: Hexagram(39: El Impedimento ââââââ), 40: Hexagram(40: La LiberaciÃ³n ââââââ), 41: Hexagram(41: La Merma ââââââ), 42: Hexagram(42: El Aumento ââââââ), 43: Hexagram(43: La ResoluciÃ³n ââââââ), 44: Hexagram(44: El Ir al Encuentro ââââââ), 45: Hexagram(45: La ReuniÃ³n ââââââ), 46: Hexagram(46: La Subida ââââââ), 47: Hexagram(47: El Agotamiento ââââââ), 48: Hexagram(48: El Pozo ââââââ), 49: Hexagram(49: La RevoluciÃ³n ââââââ), 50: Hexagram(50: El Caldero ââââââ), 51: Hexagram(51: Lo Suscitativo ââââââ), 52: Hexagram(52: El Aquietamiento ââââââ), 53: Hexagram(53: El Desarrollo Gradual ââââââ), 54: Hexagram(54: La Muchacha que se Casa ââââââ), 55: Hexagram(55: La Plenitud ââââââ), 56: Hexagram(56: El Andariego ââââââ), 57: Hexagram(57: Lo Suave ââââââ), 58: Hexagram(58: Lo Sereno ââââââ), 59: Hexagram(59: La DisoluciÃ³n ââââââ), 60: Hexagram(60: La RestricciÃ³n ââââââ), 61: Hexagram(61: La Verdad Interior ââââââ), 62: Hexagram(62: La Preponderancia de lo PequeÃ±o ââââââ), 63: Hexagram(63: DespuÃ©s de la ConsumaciÃ³n ââââââ), 64: Hexagram(64: Antes de la ConsumaciÃ³n ââââââ)}</span>

        
    </div>
    <a class="headerlink" href="#HEXAGRAMS"></a>
    
    

                </section>
                <section id="AlchemicalPipeline">
                            <input id="AlchemicalPipeline-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AlchemicalPipeline</span>:

                <label class="view-source-button" for="AlchemicalPipeline-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline-196"><a href="#AlchemicalPipeline-196"><span class="linenos">196</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AlchemicalPipeline</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-197"><a href="#AlchemicalPipeline-197"><span class="linenos">197</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-198"><a href="#AlchemicalPipeline-198"><span class="linenos">198</span></a><span class="sd">    Pipeline de TransmutaciÃ³n AlquÃ­mica para Proyecto EÃ³n.</span>
</span><span id="AlchemicalPipeline-199"><a href="#AlchemicalPipeline-199"><span class="linenos">199</span></a><span class="sd">    </span>
</span><span id="AlchemicalPipeline-200"><a href="#AlchemicalPipeline-200"><span class="linenos">200</span></a><span class="sd">    Implementa la Gran Obra (Opus Magnum) como un sistema de</span>
</span><span id="AlchemicalPipeline-201"><a href="#AlchemicalPipeline-201"><span class="linenos">201</span></a><span class="sd">    procesamiento de datos en tres fases:</span>
</span><span id="AlchemicalPipeline-202"><a href="#AlchemicalPipeline-202"><span class="linenos">202</span></a><span class="sd">    </span>
</span><span id="AlchemicalPipeline-203"><a href="#AlchemicalPipeline-203"><span class="linenos">203</span></a><span class="sd">    1. NIGREDO (PutrefacciÃ³n) â«</span>
</span><span id="AlchemicalPipeline-204"><a href="#AlchemicalPipeline-204"><span class="linenos">204</span></a><span class="sd">       - Ingesta de datos crudos y ruidosos</span>
</span><span id="AlchemicalPipeline-205"><a href="#AlchemicalPipeline-205"><span class="linenos">205</span></a><span class="sd">       - &quot;La materia prima debe primero descomponerse&quot;</span>
</span><span id="AlchemicalPipeline-206"><a href="#AlchemicalPipeline-206"><span class="linenos">206</span></a><span class="sd">       </span>
</span><span id="AlchemicalPipeline-207"><a href="#AlchemicalPipeline-207"><span class="linenos">207</span></a><span class="sd">    2. ALBEDO (PurificaciÃ³n) âª</span>
</span><span id="AlchemicalPipeline-208"><a href="#AlchemicalPipeline-208"><span class="linenos">208</span></a><span class="sd">       - Filtrado de ruido (Kalman Filter)</span>
</span><span id="AlchemicalPipeline-209"><a href="#AlchemicalPipeline-209"><span class="linenos">209</span></a><span class="sd">       - EliminaciÃ³n de outliers</span>
</span><span id="AlchemicalPipeline-210"><a href="#AlchemicalPipeline-210"><span class="linenos">210</span></a><span class="sd">       - NormalizaciÃ³n</span>
</span><span id="AlchemicalPipeline-211"><a href="#AlchemicalPipeline-211"><span class="linenos">211</span></a><span class="sd">       - &quot;El mercurio filosÃ³fico purifica&quot;</span>
</span><span id="AlchemicalPipeline-212"><a href="#AlchemicalPipeline-212"><span class="linenos">212</span></a><span class="sd">       </span>
</span><span id="AlchemicalPipeline-213"><a href="#AlchemicalPipeline-213"><span class="linenos">213</span></a><span class="sd">    3. RUBEDO (IluminaciÃ³n) ð´</span>
</span><span id="AlchemicalPipeline-214"><a href="#AlchemicalPipeline-214"><span class="linenos">214</span></a><span class="sd">       - Inferencia con ESN</span>
</span><span id="AlchemicalPipeline-215"><a href="#AlchemicalPipeline-215"><span class="linenos">215</span></a><span class="sd">       - PredicciÃ³n final</span>
</span><span id="AlchemicalPipeline-216"><a href="#AlchemicalPipeline-216"><span class="linenos">216</span></a><span class="sd">       - &quot;La Piedra Filosofal emerge&quot;</span>
</span><span id="AlchemicalPipeline-217"><a href="#AlchemicalPipeline-217"><span class="linenos">217</span></a><span class="sd">    </span>
</span><span id="AlchemicalPipeline-218"><a href="#AlchemicalPipeline-218"><span class="linenos">218</span></a><span class="sd">    Ejemplo:</span>
</span><span id="AlchemicalPipeline-219"><a href="#AlchemicalPipeline-219"><span class="linenos">219</span></a><span class="sd">        &gt;&gt;&gt; from alchemy import AlchemicalPipeline</span>
</span><span id="AlchemicalPipeline-220"><a href="#AlchemicalPipeline-220"><span class="linenos">220</span></a><span class="sd">        &gt;&gt;&gt; from esn.esn import EchoStateNetwork</span>
</span><span id="AlchemicalPipeline-221"><a href="#AlchemicalPipeline-221"><span class="linenos">221</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="AlchemicalPipeline-222"><a href="#AlchemicalPipeline-222"><span class="linenos">222</span></a><span class="sd">        &gt;&gt;&gt; # Crear pipeline</span>
</span><span id="AlchemicalPipeline-223"><a href="#AlchemicalPipeline-223"><span class="linenos">223</span></a><span class="sd">        &gt;&gt;&gt; pipeline = AlchemicalPipeline()</span>
</span><span id="AlchemicalPipeline-224"><a href="#AlchemicalPipeline-224"><span class="linenos">224</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="AlchemicalPipeline-225"><a href="#AlchemicalPipeline-225"><span class="linenos">225</span></a><span class="sd">        &gt;&gt;&gt; # Datos crudos del sensor</span>
</span><span id="AlchemicalPipeline-226"><a href="#AlchemicalPipeline-226"><span class="linenos">226</span></a><span class="sd">        &gt;&gt;&gt; raw_data = sensor.read_batch(100)</span>
</span><span id="AlchemicalPipeline-227"><a href="#AlchemicalPipeline-227"><span class="linenos">227</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="AlchemicalPipeline-228"><a href="#AlchemicalPipeline-228"><span class="linenos">228</span></a><span class="sd">        &gt;&gt;&gt; # TransmutaciÃ³n completa</span>
</span><span id="AlchemicalPipeline-229"><a href="#AlchemicalPipeline-229"><span class="linenos">229</span></a><span class="sd">        &gt;&gt;&gt; result = pipeline.transmute(raw_data, esn_model)</span>
</span><span id="AlchemicalPipeline-230"><a href="#AlchemicalPipeline-230"><span class="linenos">230</span></a><span class="sd">        &gt;&gt;&gt; print(f&quot;PredicciÃ³n: {result[&#39;gold&#39;]}&quot;)</span>
</span><span id="AlchemicalPipeline-231"><a href="#AlchemicalPipeline-231"><span class="linenos">231</span></a><span class="sd">        &gt;&gt;&gt; print(f&quot;Fase: {pipeline.state.current_phase.name}&quot;)</span>
</span><span id="AlchemicalPipeline-232"><a href="#AlchemicalPipeline-232"><span class="linenos">232</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-233"><a href="#AlchemicalPipeline-233"><span class="linenos">233</span></a>    
</span><span id="AlchemicalPipeline-234"><a href="#AlchemicalPipeline-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AlchemicalConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="AlchemicalPipeline-235"><a href="#AlchemicalPipeline-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-236"><a href="#AlchemicalPipeline-236"><span class="linenos">236</span></a><span class="sd">        Inicializa el pipeline alquÃ­mico.</span>
</span><span id="AlchemicalPipeline-237"><a href="#AlchemicalPipeline-237"><span class="linenos">237</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-238"><a href="#AlchemicalPipeline-238"><span class="linenos">238</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline-239"><a href="#AlchemicalPipeline-239"><span class="linenos">239</span></a><span class="sd">            config: ConfiguraciÃ³n del pipeline</span>
</span><span id="AlchemicalPipeline-240"><a href="#AlchemicalPipeline-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-241"><a href="#AlchemicalPipeline-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="ow">or</span> <span class="n">AlchemicalConfig</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-242"><a href="#AlchemicalPipeline-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">TransmutationState</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-243"><a href="#AlchemicalPipeline-243"><span class="linenos">243</span></a>        
</span><span id="AlchemicalPipeline-244"><a href="#AlchemicalPipeline-244"><span class="linenos">244</span></a>        <span class="c1"># Componentes de purificaciÃ³n</span>
</span><span id="AlchemicalPipeline-245"><a href="#AlchemicalPipeline-245"><span class="linenos">245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span> <span class="o">=</span> <span class="n">KalmanFilter</span><span class="p">(</span>
</span><span id="AlchemicalPipeline-246"><a href="#AlchemicalPipeline-246"><span class="linenos">246</span></a>            <span class="n">process_noise</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kalman_process_noise</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-247"><a href="#AlchemicalPipeline-247"><span class="linenos">247</span></a>            <span class="n">measurement_noise</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kalman_measurement_noise</span>
</span><span id="AlchemicalPipeline-248"><a href="#AlchemicalPipeline-248"><span class="linenos">248</span></a>        <span class="p">)</span>
</span><span id="AlchemicalPipeline-249"><a href="#AlchemicalPipeline-249"><span class="linenos">249</span></a>        
</span><span id="AlchemicalPipeline-250"><a href="#AlchemicalPipeline-250"><span class="linenos">250</span></a>        <span class="c1"># Datos intermedios</span>
</span><span id="AlchemicalPipeline-251"><a href="#AlchemicalPipeline-251"><span class="linenos">251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline-252"><a href="#AlchemicalPipeline-252"><span class="linenos">252</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline-253"><a href="#AlchemicalPipeline-253"><span class="linenos">253</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rubedo_result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline-254"><a href="#AlchemicalPipeline-254"><span class="linenos">254</span></a>        
</span><span id="AlchemicalPipeline-255"><a href="#AlchemicalPipeline-255"><span class="linenos">255</span></a>        <span class="c1"># Historial de transmutaciones</span>
</span><span id="AlchemicalPipeline-256"><a href="#AlchemicalPipeline-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AlchemicalPipeline-257"><a href="#AlchemicalPipeline-257"><span class="linenos">257</span></a>    
</span><span id="AlchemicalPipeline-258"><a href="#AlchemicalPipeline-258"><span class="linenos">258</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_change_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_phase</span><span class="p">:</span> <span class="n">AlchemicalPhase</span><span class="p">):</span>
</span><span id="AlchemicalPipeline-259"><a href="#AlchemicalPipeline-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cambia la fase actual y notifica.&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-260"><a href="#AlchemicalPipeline-260"><span class="linenos">260</span></a>        <span class="n">old_phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_phase</span>
</span><span id="AlchemicalPipeline-261"><a href="#AlchemicalPipeline-261"><span class="linenos">261</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_phase</span> <span class="o">=</span> <span class="n">new_phase</span>
</span><span id="AlchemicalPipeline-262"><a href="#AlchemicalPipeline-262"><span class="linenos">262</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">phase_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-263"><a href="#AlchemicalPipeline-263"><span class="linenos">263</span></a>        
</span><span id="AlchemicalPipeline-264"><a href="#AlchemicalPipeline-264"><span class="linenos">264</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">on_phase_change</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-265"><a href="#AlchemicalPipeline-265"><span class="linenos">265</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">on_phase_change</span><span class="p">(</span><span class="n">new_phase</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-266"><a href="#AlchemicalPipeline-266"><span class="linenos">266</span></a>    
</span><span id="AlchemicalPipeline-267"><a href="#AlchemicalPipeline-267"><span class="linenos">267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nigredo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-268"><a href="#AlchemicalPipeline-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-269"><a href="#AlchemicalPipeline-269"><span class="linenos">269</span></a><span class="sd">        NIGREDO - Fase de PutrefacciÃ³n â«</span>
</span><span id="AlchemicalPipeline-270"><a href="#AlchemicalPipeline-270"><span class="linenos">270</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-271"><a href="#AlchemicalPipeline-271"><span class="linenos">271</span></a><span class="sd">        &quot;Lo que no se descompone, no puede ser reconstruido.&quot;</span>
</span><span id="AlchemicalPipeline-272"><a href="#AlchemicalPipeline-272"><span class="linenos">272</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-273"><a href="#AlchemicalPipeline-273"><span class="linenos">273</span></a><span class="sd">        Acepta los datos crudos tal como vienen del sensor.</span>
</span><span id="AlchemicalPipeline-274"><a href="#AlchemicalPipeline-274"><span class="linenos">274</span></a><span class="sd">        Esta fase representa la aceptaciÃ³n de la impureza inicial.</span>
</span><span id="AlchemicalPipeline-275"><a href="#AlchemicalPipeline-275"><span class="linenos">275</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-276"><a href="#AlchemicalPipeline-276"><span class="linenos">276</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline-277"><a href="#AlchemicalPipeline-277"><span class="linenos">277</span></a><span class="sd">            raw_data: Datos crudos del sensor (1D o 2D array)</span>
</span><span id="AlchemicalPipeline-278"><a href="#AlchemicalPipeline-278"><span class="linenos">278</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline-279"><a href="#AlchemicalPipeline-279"><span class="linenos">279</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline-280"><a href="#AlchemicalPipeline-280"><span class="linenos">280</span></a><span class="sd">            Los mismos datos, marcados como ingresados al sistema</span>
</span><span id="AlchemicalPipeline-281"><a href="#AlchemicalPipeline-281"><span class="linenos">281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-282"><a href="#AlchemicalPipeline-282"><span class="linenos">282</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-283"><a href="#AlchemicalPipeline-283"><span class="linenos">283</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-284"><a href="#AlchemicalPipeline-284"><span class="linenos">284</span></a>        
</span><span id="AlchemicalPipeline-285"><a href="#AlchemicalPipeline-285"><span class="linenos">285</span></a>        <span class="c1"># Asegurar formato numpy</span>
</span><span id="AlchemicalPipeline-286"><a href="#AlchemicalPipeline-286"><span class="linenos">286</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
</span><span id="AlchemicalPipeline-287"><a href="#AlchemicalPipeline-287"><span class="linenos">287</span></a>            <span class="n">raw_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-288"><a href="#AlchemicalPipeline-288"><span class="linenos">288</span></a>        
</span><span id="AlchemicalPipeline-289"><a href="#AlchemicalPipeline-289"><span class="linenos">289</span></a>        <span class="c1"># Flatten si es necesario para pipeline</span>
</span><span id="AlchemicalPipeline-290"><a href="#AlchemicalPipeline-290"><span class="linenos">290</span></a>        <span class="k">if</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-291"><a href="#AlchemicalPipeline-291"><span class="linenos">291</span></a>            <span class="n">raw_data</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-292"><a href="#AlchemicalPipeline-292"><span class="linenos">292</span></a>        
</span><span id="AlchemicalPipeline-293"><a href="#AlchemicalPipeline-293"><span class="linenos">293</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-294"><a href="#AlchemicalPipeline-294"><span class="linenos">294</span></a>        
</span><span id="AlchemicalPipeline-295"><a href="#AlchemicalPipeline-295"><span class="linenos">295</span></a>        <span class="c1"># MÃ©tricas</span>
</span><span id="AlchemicalPipeline-296"><a href="#AlchemicalPipeline-296"><span class="linenos">296</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-297"><a href="#AlchemicalPipeline-297"><span class="linenos">297</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="AlchemicalPipeline-298"><a href="#AlchemicalPipeline-298"><span class="linenos">298</span></a>        
</span><span id="AlchemicalPipeline-299"><a href="#AlchemicalPipeline-299"><span class="linenos">299</span></a>        <span class="k">return</span> <span class="n">raw_data</span>
</span><span id="AlchemicalPipeline-300"><a href="#AlchemicalPipeline-300"><span class="linenos">300</span></a>    
</span><span id="AlchemicalPipeline-301"><a href="#AlchemicalPipeline-301"><span class="linenos">301</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">albedo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-302"><a href="#AlchemicalPipeline-302"><span class="linenos">302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-303"><a href="#AlchemicalPipeline-303"><span class="linenos">303</span></a><span class="sd">        ALBEDO - Fase de PurificaciÃ³n âª</span>
</span><span id="AlchemicalPipeline-304"><a href="#AlchemicalPipeline-304"><span class="linenos">304</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-305"><a href="#AlchemicalPipeline-305"><span class="linenos">305</span></a><span class="sd">        &quot;El mercurio filosÃ³fico separa lo puro de lo impuro.&quot;</span>
</span><span id="AlchemicalPipeline-306"><a href="#AlchemicalPipeline-306"><span class="linenos">306</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-307"><a href="#AlchemicalPipeline-307"><span class="linenos">307</span></a><span class="sd">        Aplica filtrado y limpieza a los datos:</span>
</span><span id="AlchemicalPipeline-308"><a href="#AlchemicalPipeline-308"><span class="linenos">308</span></a><span class="sd">        1. Filtro de Kalman para suavizar ruido</span>
</span><span id="AlchemicalPipeline-309"><a href="#AlchemicalPipeline-309"><span class="linenos">309</span></a><span class="sd">        2. EliminaciÃ³n de outliers</span>
</span><span id="AlchemicalPipeline-310"><a href="#AlchemicalPipeline-310"><span class="linenos">310</span></a><span class="sd">        3. NormalizaciÃ³n opcional</span>
</span><span id="AlchemicalPipeline-311"><a href="#AlchemicalPipeline-311"><span class="linenos">311</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-312"><a href="#AlchemicalPipeline-312"><span class="linenos">312</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline-313"><a href="#AlchemicalPipeline-313"><span class="linenos">313</span></a><span class="sd">            data: Datos a purificar (usa materia_prima si None)</span>
</span><span id="AlchemicalPipeline-314"><a href="#AlchemicalPipeline-314"><span class="linenos">314</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline-315"><a href="#AlchemicalPipeline-315"><span class="linenos">315</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline-316"><a href="#AlchemicalPipeline-316"><span class="linenos">316</span></a><span class="sd">            Datos purificados</span>
</span><span id="AlchemicalPipeline-317"><a href="#AlchemicalPipeline-317"><span class="linenos">317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-318"><a href="#AlchemicalPipeline-318"><span class="linenos">318</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-319"><a href="#AlchemicalPipeline-319"><span class="linenos">319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-320"><a href="#AlchemicalPipeline-320"><span class="linenos">320</span></a>        
</span><span id="AlchemicalPipeline-321"><a href="#AlchemicalPipeline-321"><span class="linenos">321</span></a>        <span class="c1"># Usar materia prima si no se proporciona data</span>
</span><span id="AlchemicalPipeline-322"><a href="#AlchemicalPipeline-322"><span class="linenos">322</span></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-323"><a href="#AlchemicalPipeline-323"><span class="linenos">323</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-324"><a href="#AlchemicalPipeline-324"><span class="linenos">324</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No hay materia prima. Ejecuta nigredo() primero.&quot;</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-325"><a href="#AlchemicalPipeline-325"><span class="linenos">325</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-326"><a href="#AlchemicalPipeline-326"><span class="linenos">326</span></a>        
</span><span id="AlchemicalPipeline-327"><a href="#AlchemicalPipeline-327"><span class="linenos">327</span></a>        <span class="n">original_variance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="AlchemicalPipeline-328"><a href="#AlchemicalPipeline-328"><span class="linenos">328</span></a>        
</span><span id="AlchemicalPipeline-329"><a href="#AlchemicalPipeline-329"><span class="linenos">329</span></a>        <span class="c1"># Paso 1: Filtro de Kalman</span>
</span><span id="AlchemicalPipeline-330"><a href="#AlchemicalPipeline-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-331"><a href="#AlchemicalPipeline-331"><span class="linenos">331</span></a>        <span class="n">filtered</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span><span class="o">.</span><span class="n">filter_sequence</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-332"><a href="#AlchemicalPipeline-332"><span class="linenos">332</span></a>        
</span><span id="AlchemicalPipeline-333"><a href="#AlchemicalPipeline-333"><span class="linenos">333</span></a>        <span class="c1"># Paso 2: Eliminar outliers</span>
</span><span id="AlchemicalPipeline-334"><a href="#AlchemicalPipeline-334"><span class="linenos">334</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">remove_outliers</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-335"><a href="#AlchemicalPipeline-335"><span class="linenos">335</span></a>            <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-336"><a href="#AlchemicalPipeline-336"><span class="linenos">336</span></a>            <span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-337"><a href="#AlchemicalPipeline-337"><span class="linenos">337</span></a>            <span class="k">if</span> <span class="n">std</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-338"><a href="#AlchemicalPipeline-338"><span class="linenos">338</span></a>                <span class="n">z_scores</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">((</span><span class="n">filtered</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">/</span> <span class="n">std</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-339"><a href="#AlchemicalPipeline-339"><span class="linenos">339</span></a>                <span class="n">mask</span> <span class="o">=</span> <span class="n">z_scores</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">outlier_threshold</span>
</span><span id="AlchemicalPipeline-340"><a href="#AlchemicalPipeline-340"><span class="linenos">340</span></a>                <span class="n">filtered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span>
</span><span id="AlchemicalPipeline-341"><a href="#AlchemicalPipeline-341"><span class="linenos">341</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)),</span>
</span><span id="AlchemicalPipeline-342"><a href="#AlchemicalPipeline-342"><span class="linenos">342</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AlchemicalPipeline-343"><a href="#AlchemicalPipeline-343"><span class="linenos">343</span></a>                    <span class="n">filtered</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</span><span id="AlchemicalPipeline-344"><a href="#AlchemicalPipeline-344"><span class="linenos">344</span></a>                <span class="p">)</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="k">else</span> <span class="n">filtered</span>
</span><span id="AlchemicalPipeline-345"><a href="#AlchemicalPipeline-345"><span class="linenos">345</span></a>        
</span><span id="AlchemicalPipeline-346"><a href="#AlchemicalPipeline-346"><span class="linenos">346</span></a>        <span class="c1"># Paso 3: Suavizado adicional (media mÃ³vil)</span>
</span><span id="AlchemicalPipeline-347"><a href="#AlchemicalPipeline-347"><span class="linenos">347</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_moving_average</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-348"><a href="#AlchemicalPipeline-348"><span class="linenos">348</span></a>            <span class="n">kernel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span>
</span><span id="AlchemicalPipeline-349"><a href="#AlchemicalPipeline-349"><span class="linenos">349</span></a>            <span class="c1"># Pad para mantener longitud</span>
</span><span id="AlchemicalPipeline-350"><a href="#AlchemicalPipeline-350"><span class="linenos">350</span></a>            <span class="n">padded</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pad</span><span class="p">(</span><span class="n">filtered</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;edge&#39;</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-351"><a href="#AlchemicalPipeline-351"><span class="linenos">351</span></a>            <span class="n">filtered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">padded</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)[:</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)]</span>
</span><span id="AlchemicalPipeline-352"><a href="#AlchemicalPipeline-352"><span class="linenos">352</span></a>        
</span><span id="AlchemicalPipeline-353"><a href="#AlchemicalPipeline-353"><span class="linenos">353</span></a>        <span class="c1"># Paso 4: NormalizaciÃ³n</span>
</span><span id="AlchemicalPipeline-354"><a href="#AlchemicalPipeline-354"><span class="linenos">354</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">normalize</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-355"><a href="#AlchemicalPipeline-355"><span class="linenos">355</span></a>            <span class="n">min_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-356"><a href="#AlchemicalPipeline-356"><span class="linenos">356</span></a>            <span class="n">max_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-357"><a href="#AlchemicalPipeline-357"><span class="linenos">357</span></a>            <span class="k">if</span> <span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span> <span class="o">&gt;</span> <span class="mf">1e-6</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-358"><a href="#AlchemicalPipeline-358"><span class="linenos">358</span></a>                <span class="n">filtered</span> <span class="o">=</span> <span class="p">(</span><span class="n">filtered</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline-359"><a href="#AlchemicalPipeline-359"><span class="linenos">359</span></a>        
</span><span id="AlchemicalPipeline-360"><a href="#AlchemicalPipeline-360"><span class="linenos">360</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span> <span class="o">=</span> <span class="n">filtered</span>
</span><span id="AlchemicalPipeline-361"><a href="#AlchemicalPipeline-361"><span class="linenos">361</span></a>        
</span><span id="AlchemicalPipeline-362"><a href="#AlchemicalPipeline-362"><span class="linenos">362</span></a>        <span class="c1"># MÃ©tricas</span>
</span><span id="AlchemicalPipeline-363"><a href="#AlchemicalPipeline-363"><span class="linenos">363</span></a>        <span class="n">new_variance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="AlchemicalPipeline-364"><a href="#AlchemicalPipeline-364"><span class="linenos">364</span></a>        <span class="k">if</span> <span class="n">original_variance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-365"><a href="#AlchemicalPipeline-365"><span class="linenos">365</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">new_variance</span> <span class="o">/</span> <span class="n">original_variance</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
</span><span id="AlchemicalPipeline-366"><a href="#AlchemicalPipeline-366"><span class="linenos">366</span></a>        
</span><span id="AlchemicalPipeline-367"><a href="#AlchemicalPipeline-367"><span class="linenos">367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-368"><a href="#AlchemicalPipeline-368"><span class="linenos">368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="AlchemicalPipeline-369"><a href="#AlchemicalPipeline-369"><span class="linenos">369</span></a>        
</span><span id="AlchemicalPipeline-370"><a href="#AlchemicalPipeline-370"><span class="linenos">370</span></a>        <span class="k">return</span> <span class="n">filtered</span>
</span><span id="AlchemicalPipeline-371"><a href="#AlchemicalPipeline-371"><span class="linenos">371</span></a>    
</span><span id="AlchemicalPipeline-372"><a href="#AlchemicalPipeline-372"><span class="linenos">372</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rubedo</span><span class="p">(</span>
</span><span id="AlchemicalPipeline-373"><a href="#AlchemicalPipeline-373"><span class="linenos">373</span></a>        <span class="bp">self</span><span class="p">,</span> 
</span><span id="AlchemicalPipeline-374"><a href="#AlchemicalPipeline-374"><span class="linenos">374</span></a>        <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-375"><a href="#AlchemicalPipeline-375"><span class="linenos">375</span></a>        <span class="n">esn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-376"><a href="#AlchemicalPipeline-376"><span class="linenos">376</span></a>        <span class="n">prediction_horizon</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline-377"><a href="#AlchemicalPipeline-377"><span class="linenos">377</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="AlchemicalPipeline-378"><a href="#AlchemicalPipeline-378"><span class="linenos">378</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-379"><a href="#AlchemicalPipeline-379"><span class="linenos">379</span></a><span class="sd">        RUBEDO - Fase de IluminaciÃ³n ð´</span>
</span><span id="AlchemicalPipeline-380"><a href="#AlchemicalPipeline-380"><span class="linenos">380</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-381"><a href="#AlchemicalPipeline-381"><span class="linenos">381</span></a><span class="sd">        &quot;La Piedra Filosofal transforma el plomo en oro.&quot;</span>
</span><span id="AlchemicalPipeline-382"><a href="#AlchemicalPipeline-382"><span class="linenos">382</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-383"><a href="#AlchemicalPipeline-383"><span class="linenos">383</span></a><span class="sd">        Ejecuta la inferencia final usando el ESN entrenado.</span>
</span><span id="AlchemicalPipeline-384"><a href="#AlchemicalPipeline-384"><span class="linenos">384</span></a><span class="sd">        Esta es la transformaciÃ³n final de datos puros en conocimiento.</span>
</span><span id="AlchemicalPipeline-385"><a href="#AlchemicalPipeline-385"><span class="linenos">385</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-386"><a href="#AlchemicalPipeline-386"><span class="linenos">386</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline-387"><a href="#AlchemicalPipeline-387"><span class="linenos">387</span></a><span class="sd">            data: Datos purificados (usa albedo_result si None)</span>
</span><span id="AlchemicalPipeline-388"><a href="#AlchemicalPipeline-388"><span class="linenos">388</span></a><span class="sd">            esn: EchoStateNetwork entrenado para inferencia</span>
</span><span id="AlchemicalPipeline-389"><a href="#AlchemicalPipeline-389"><span class="linenos">389</span></a><span class="sd">            prediction_horizon: CuÃ¡ntos pasos predecir</span>
</span><span id="AlchemicalPipeline-390"><a href="#AlchemicalPipeline-390"><span class="linenos">390</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline-391"><a href="#AlchemicalPipeline-391"><span class="linenos">391</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline-392"><a href="#AlchemicalPipeline-392"><span class="linenos">392</span></a><span class="sd">            Diccionario con:</span>
</span><span id="AlchemicalPipeline-393"><a href="#AlchemicalPipeline-393"><span class="linenos">393</span></a><span class="sd">            - &#39;gold&#39;: La predicciÃ³n/inferencia (La Piedra Filosofal)</span>
</span><span id="AlchemicalPipeline-394"><a href="#AlchemicalPipeline-394"><span class="linenos">394</span></a><span class="sd">            - &#39;confidence&#39;: Nivel de confianza</span>
</span><span id="AlchemicalPipeline-395"><a href="#AlchemicalPipeline-395"><span class="linenos">395</span></a><span class="sd">            - &#39;transmutation_complete&#39;: bool</span>
</span><span id="AlchemicalPipeline-396"><a href="#AlchemicalPipeline-396"><span class="linenos">396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-397"><a href="#AlchemicalPipeline-397"><span class="linenos">397</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-398"><a href="#AlchemicalPipeline-398"><span class="linenos">398</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-399"><a href="#AlchemicalPipeline-399"><span class="linenos">399</span></a>        
</span><span id="AlchemicalPipeline-400"><a href="#AlchemicalPipeline-400"><span class="linenos">400</span></a>        <span class="c1"># Usar resultado de albedo si no se proporciona</span>
</span><span id="AlchemicalPipeline-401"><a href="#AlchemicalPipeline-401"><span class="linenos">401</span></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-402"><a href="#AlchemicalPipeline-402"><span class="linenos">402</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-403"><a href="#AlchemicalPipeline-403"><span class="linenos">403</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No hay datos purificados. Ejecuta albedo() primero.&quot;</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-404"><a href="#AlchemicalPipeline-404"><span class="linenos">404</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span>
</span><span id="AlchemicalPipeline-405"><a href="#AlchemicalPipeline-405"><span class="linenos">405</span></a>        
</span><span id="AlchemicalPipeline-406"><a href="#AlchemicalPipeline-406"><span class="linenos">406</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-407"><a href="#AlchemicalPipeline-407"><span class="linenos">407</span></a>            <span class="s1">&#39;gold&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-408"><a href="#AlchemicalPipeline-408"><span class="linenos">408</span></a>            <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-409"><a href="#AlchemicalPipeline-409"><span class="linenos">409</span></a>            <span class="s1">&#39;transmutation_complete&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-410"><a href="#AlchemicalPipeline-410"><span class="linenos">410</span></a>            <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="s1">&#39;RUBEDO&#39;</span>
</span><span id="AlchemicalPipeline-411"><a href="#AlchemicalPipeline-411"><span class="linenos">411</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline-412"><a href="#AlchemicalPipeline-412"><span class="linenos">412</span></a>        
</span><span id="AlchemicalPipeline-413"><a href="#AlchemicalPipeline-413"><span class="linenos">413</span></a>        <span class="k">if</span> <span class="n">esn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-414"><a href="#AlchemicalPipeline-414"><span class="linenos">414</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-415"><a href="#AlchemicalPipeline-415"><span class="linenos">415</span></a>                <span class="c1"># Preparar datos para ESN</span>
</span><span id="AlchemicalPipeline-416"><a href="#AlchemicalPipeline-416"><span class="linenos">416</span></a>                <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">data</span>
</span><span id="AlchemicalPipeline-417"><a href="#AlchemicalPipeline-417"><span class="linenos">417</span></a>                
</span><span id="AlchemicalPipeline-418"><a href="#AlchemicalPipeline-418"><span class="linenos">418</span></a>                <span class="c1"># PredicciÃ³n</span>
</span><span id="AlchemicalPipeline-419"><a href="#AlchemicalPipeline-419"><span class="linenos">419</span></a>                <span class="n">esn</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-420"><a href="#AlchemicalPipeline-420"><span class="linenos">420</span></a>                <span class="n">predictions</span> <span class="o">=</span> <span class="n">esn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-421"><a href="#AlchemicalPipeline-421"><span class="linenos">421</span></a>                
</span><span id="AlchemicalPipeline-422"><a href="#AlchemicalPipeline-422"><span class="linenos">422</span></a>                <span class="c1"># La Ãºltima predicciÃ³n es &quot;el oro&quot;</span>
</span><span id="AlchemicalPipeline-423"><a href="#AlchemicalPipeline-423"><span class="linenos">423</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;gold&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">predictions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">predictions</span>
</span><span id="AlchemicalPipeline-424"><a href="#AlchemicalPipeline-424"><span class="linenos">424</span></a>                
</span><span id="AlchemicalPipeline-425"><a href="#AlchemicalPipeline-425"><span class="linenos">425</span></a>                <span class="c1"># Calcular confianza basada en estabilidad de predicciones</span>
</span><span id="AlchemicalPipeline-426"><a href="#AlchemicalPipeline-426"><span class="linenos">426</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-427"><a href="#AlchemicalPipeline-427"><span class="linenos">427</span></a>                    <span class="n">pred_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">predictions</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-428"><a href="#AlchemicalPipeline-428"><span class="linenos">428</span></a>                    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">pred_std</span><span class="p">))</span>
</span><span id="AlchemicalPipeline-429"><a href="#AlchemicalPipeline-429"><span class="linenos">429</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-430"><a href="#AlchemicalPipeline-430"><span class="linenos">430</span></a>                    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
</span><span id="AlchemicalPipeline-431"><a href="#AlchemicalPipeline-431"><span class="linenos">431</span></a>                    
</span><span id="AlchemicalPipeline-432"><a href="#AlchemicalPipeline-432"><span class="linenos">432</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;transmutation_complete&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AlchemicalPipeline-433"><a href="#AlchemicalPipeline-433"><span class="linenos">433</span></a>                
</span><span id="AlchemicalPipeline-434"><a href="#AlchemicalPipeline-434"><span class="linenos">434</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-435"><a href="#AlchemicalPipeline-435"><span class="linenos">435</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-436"><a href="#AlchemicalPipeline-436"><span class="linenos">436</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="AlchemicalPipeline-437"><a href="#AlchemicalPipeline-437"><span class="linenos">437</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-438"><a href="#AlchemicalPipeline-438"><span class="linenos">438</span></a>            <span class="c1"># Sin ESN, la &quot;predicciÃ³n&quot; es simplemente el dato purificado</span>
</span><span id="AlchemicalPipeline-439"><a href="#AlchemicalPipeline-439"><span class="linenos">439</span></a>            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;gold&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">data</span>
</span><span id="AlchemicalPipeline-440"><a href="#AlchemicalPipeline-440"><span class="linenos">440</span></a>            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
</span><span id="AlchemicalPipeline-441"><a href="#AlchemicalPipeline-441"><span class="linenos">441</span></a>            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Sin ESN - usando valor purificado como resultado&quot;</span>
</span><span id="AlchemicalPipeline-442"><a href="#AlchemicalPipeline-442"><span class="linenos">442</span></a>        
</span><span id="AlchemicalPipeline-443"><a href="#AlchemicalPipeline-443"><span class="linenos">443</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rubedo_result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;gold&#39;</span><span class="p">]</span>
</span><span id="AlchemicalPipeline-444"><a href="#AlchemicalPipeline-444"><span class="linenos">444</span></a>        
</span><span id="AlchemicalPipeline-445"><a href="#AlchemicalPipeline-445"><span class="linenos">445</span></a>        <span class="c1"># Actualizar estado</span>
</span><span id="AlchemicalPipeline-446"><a href="#AlchemicalPipeline-446"><span class="linenos">446</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_predictions</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline-447"><a href="#AlchemicalPipeline-447"><span class="linenos">447</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">prediction_confidence</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span>
</span><span id="AlchemicalPipeline-448"><a href="#AlchemicalPipeline-448"><span class="linenos">448</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="AlchemicalPipeline-449"><a href="#AlchemicalPipeline-449"><span class="linenos">449</span></a>        
</span><span id="AlchemicalPipeline-450"><a href="#AlchemicalPipeline-450"><span class="linenos">450</span></a>        <span class="c1"># Completar opus</span>
</span><span id="AlchemicalPipeline-451"><a href="#AlchemicalPipeline-451"><span class="linenos">451</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;transmutation_complete&#39;</span><span class="p">]:</span>
</span><span id="AlchemicalPipeline-452"><a href="#AlchemicalPipeline-452"><span class="linenos">452</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-453"><a href="#AlchemicalPipeline-453"><span class="linenos">453</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">transmutation_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline-454"><a href="#AlchemicalPipeline-454"><span class="linenos">454</span></a>            
</span><span id="AlchemicalPipeline-455"><a href="#AlchemicalPipeline-455"><span class="linenos">455</span></a>            <span class="c1"># Guardar en historial</span>
</span><span id="AlchemicalPipeline-456"><a href="#AlchemicalPipeline-456"><span class="linenos">456</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="AlchemicalPipeline-457"><a href="#AlchemicalPipeline-457"><span class="linenos">457</span></a>                <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
</span><span id="AlchemicalPipeline-458"><a href="#AlchemicalPipeline-458"><span class="linenos">458</span></a>                <span class="s1">&#39;samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-459"><a href="#AlchemicalPipeline-459"><span class="linenos">459</span></a>                <span class="s1">&#39;noise_removed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-460"><a href="#AlchemicalPipeline-460"><span class="linenos">460</span></a>                <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline-461"><a href="#AlchemicalPipeline-461"><span class="linenos">461</span></a>                <span class="s1">&#39;durations&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-462"><a href="#AlchemicalPipeline-462"><span class="linenos">462</span></a>                    <span class="s1">&#39;nigredo&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_duration</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-463"><a href="#AlchemicalPipeline-463"><span class="linenos">463</span></a>                    <span class="s1">&#39;albedo&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_duration</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-464"><a href="#AlchemicalPipeline-464"><span class="linenos">464</span></a>                    <span class="s1">&#39;rubedo&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_duration</span>
</span><span id="AlchemicalPipeline-465"><a href="#AlchemicalPipeline-465"><span class="linenos">465</span></a>                <span class="p">}</span>
</span><span id="AlchemicalPipeline-466"><a href="#AlchemicalPipeline-466"><span class="linenos">466</span></a>            <span class="p">})</span>
</span><span id="AlchemicalPipeline-467"><a href="#AlchemicalPipeline-467"><span class="linenos">467</span></a>        
</span><span id="AlchemicalPipeline-468"><a href="#AlchemicalPipeline-468"><span class="linenos">468</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="AlchemicalPipeline-469"><a href="#AlchemicalPipeline-469"><span class="linenos">469</span></a>    
</span><span id="AlchemicalPipeline-470"><a href="#AlchemicalPipeline-470"><span class="linenos">470</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">transmute</span><span class="p">(</span>
</span><span id="AlchemicalPipeline-471"><a href="#AlchemicalPipeline-471"><span class="linenos">471</span></a>        <span class="bp">self</span><span class="p">,</span> 
</span><span id="AlchemicalPipeline-472"><a href="#AlchemicalPipeline-472"><span class="linenos">472</span></a>        <span class="n">raw_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> 
</span><span id="AlchemicalPipeline-473"><a href="#AlchemicalPipeline-473"><span class="linenos">473</span></a>        <span class="n">esn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline-474"><a href="#AlchemicalPipeline-474"><span class="linenos">474</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="AlchemicalPipeline-475"><a href="#AlchemicalPipeline-475"><span class="linenos">475</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-476"><a href="#AlchemicalPipeline-476"><span class="linenos">476</span></a><span class="sd">        Ejecuta la transmutaciÃ³n completa en un solo paso.</span>
</span><span id="AlchemicalPipeline-477"><a href="#AlchemicalPipeline-477"><span class="linenos">477</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-478"><a href="#AlchemicalPipeline-478"><span class="linenos">478</span></a><span class="sd">        MATERIA PRIMA â NIGREDO â ALBEDO â RUBEDO â OPUS COMPLETE</span>
</span><span id="AlchemicalPipeline-479"><a href="#AlchemicalPipeline-479"><span class="linenos">479</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-480"><a href="#AlchemicalPipeline-480"><span class="linenos">480</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline-481"><a href="#AlchemicalPipeline-481"><span class="linenos">481</span></a><span class="sd">            raw_data: Datos crudos del sensor</span>
</span><span id="AlchemicalPipeline-482"><a href="#AlchemicalPipeline-482"><span class="linenos">482</span></a><span class="sd">            esn: EchoStateNetwork para inferencia</span>
</span><span id="AlchemicalPipeline-483"><a href="#AlchemicalPipeline-483"><span class="linenos">483</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline-484"><a href="#AlchemicalPipeline-484"><span class="linenos">484</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline-485"><a href="#AlchemicalPipeline-485"><span class="linenos">485</span></a><span class="sd">            Resultado de la transmutaciÃ³n con el &quot;oro&quot; (predicciÃ³n)</span>
</span><span id="AlchemicalPipeline-486"><a href="#AlchemicalPipeline-486"><span class="linenos">486</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-487"><a href="#AlchemicalPipeline-487"><span class="linenos">487</span></a>        <span class="c1"># Opus Magnum</span>
</span><span id="AlchemicalPipeline-488"><a href="#AlchemicalPipeline-488"><span class="linenos">488</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nigredo</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-489"><a href="#AlchemicalPipeline-489"><span class="linenos">489</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">albedo</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-490"><a href="#AlchemicalPipeline-490"><span class="linenos">490</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubedo</span><span class="p">(</span><span class="n">esn</span><span class="o">=</span><span class="n">esn</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-491"><a href="#AlchemicalPipeline-491"><span class="linenos">491</span></a>        
</span><span id="AlchemicalPipeline-492"><a href="#AlchemicalPipeline-492"><span class="linenos">492</span></a>        <span class="c1"># Agregar informaciÃ³n de las fases anteriores</span>
</span><span id="AlchemicalPipeline-493"><a href="#AlchemicalPipeline-493"><span class="linenos">493</span></a>        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;phases&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-494"><a href="#AlchemicalPipeline-494"><span class="linenos">494</span></a>            <span class="s1">&#39;nigredo&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-495"><a href="#AlchemicalPipeline-495"><span class="linenos">495</span></a>                <span class="s1">&#39;samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-496"><a href="#AlchemicalPipeline-496"><span class="linenos">496</span></a>                <span class="s1">&#39;duration_ms&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_duration</span> <span class="o">*</span> <span class="mi">1000</span>
</span><span id="AlchemicalPipeline-497"><a href="#AlchemicalPipeline-497"><span class="linenos">497</span></a>            <span class="p">},</span>
</span><span id="AlchemicalPipeline-498"><a href="#AlchemicalPipeline-498"><span class="linenos">498</span></a>            <span class="s1">&#39;albedo&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-499"><a href="#AlchemicalPipeline-499"><span class="linenos">499</span></a>                <span class="s1">&#39;samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_samples</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-500"><a href="#AlchemicalPipeline-500"><span class="linenos">500</span></a>                <span class="s1">&#39;noise_removed_percent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-501"><a href="#AlchemicalPipeline-501"><span class="linenos">501</span></a>                <span class="s1">&#39;duration_ms&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_duration</span> <span class="o">*</span> <span class="mi">1000</span>
</span><span id="AlchemicalPipeline-502"><a href="#AlchemicalPipeline-502"><span class="linenos">502</span></a>            <span class="p">},</span>
</span><span id="AlchemicalPipeline-503"><a href="#AlchemicalPipeline-503"><span class="linenos">503</span></a>            <span class="s1">&#39;rubedo&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-504"><a href="#AlchemicalPipeline-504"><span class="linenos">504</span></a>                <span class="s1">&#39;predictions&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_predictions</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-505"><a href="#AlchemicalPipeline-505"><span class="linenos">505</span></a>                <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">prediction_confidence</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-506"><a href="#AlchemicalPipeline-506"><span class="linenos">506</span></a>                <span class="s1">&#39;duration_ms&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_duration</span> <span class="o">*</span> <span class="mi">1000</span>
</span><span id="AlchemicalPipeline-507"><a href="#AlchemicalPipeline-507"><span class="linenos">507</span></a>            <span class="p">}</span>
</span><span id="AlchemicalPipeline-508"><a href="#AlchemicalPipeline-508"><span class="linenos">508</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline-509"><a href="#AlchemicalPipeline-509"><span class="linenos">509</span></a>        
</span><span id="AlchemicalPipeline-510"><a href="#AlchemicalPipeline-510"><span class="linenos">510</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="AlchemicalPipeline-511"><a href="#AlchemicalPipeline-511"><span class="linenos">511</span></a>    
</span><span id="AlchemicalPipeline-512"><a href="#AlchemicalPipeline-512"><span class="linenos">512</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_visualization_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-513"><a href="#AlchemicalPipeline-513"><span class="linenos">513</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-514"><a href="#AlchemicalPipeline-514"><span class="linenos">514</span></a><span class="sd">        Obtiene estado formateado para visualizaciÃ³n en dashboard.</span>
</span><span id="AlchemicalPipeline-515"><a href="#AlchemicalPipeline-515"><span class="linenos">515</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-516"><a href="#AlchemicalPipeline-516"><span class="linenos">516</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline-517"><a href="#AlchemicalPipeline-517"><span class="linenos">517</span></a><span class="sd">            Diccionario con informaciÃ³n de visualizaciÃ³n</span>
</span><span id="AlchemicalPipeline-518"><a href="#AlchemicalPipeline-518"><span class="linenos">518</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-519"><a href="#AlchemicalPipeline-519"><span class="linenos">519</span></a>        <span class="n">phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_phase</span>
</span><span id="AlchemicalPipeline-520"><a href="#AlchemicalPipeline-520"><span class="linenos">520</span></a>        
</span><span id="AlchemicalPipeline-521"><a href="#AlchemicalPipeline-521"><span class="linenos">521</span></a>        <span class="c1"># SÃ­mbolos y colores por fase</span>
</span><span id="AlchemicalPipeline-522"><a href="#AlchemicalPipeline-522"><span class="linenos">522</span></a>        <span class="n">phase_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-523"><a href="#AlchemicalPipeline-523"><span class="linenos">523</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ðª¨&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#666666&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Materia Prima&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline-524"><a href="#AlchemicalPipeline-524"><span class="linenos">524</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;â«&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#1a1a1a&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Nigredo&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline-525"><a href="#AlchemicalPipeline-525"><span class="linenos">525</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;âª&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#f0f0f0&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Albedo&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline-526"><a href="#AlchemicalPipeline-526"><span class="linenos">526</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">CITRINITAS</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ð¡&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffd700&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Citrinitas&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline-527"><a href="#AlchemicalPipeline-527"><span class="linenos">527</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ð´&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#dc143c&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Rubedo&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline-528"><a href="#AlchemicalPipeline-528"><span class="linenos">528</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;â¨&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffd700&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Opus Complete&#39;</span><span class="p">}</span>
</span><span id="AlchemicalPipeline-529"><a href="#AlchemicalPipeline-529"><span class="linenos">529</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline-530"><a href="#AlchemicalPipeline-530"><span class="linenos">530</span></a>        
</span><span id="AlchemicalPipeline-531"><a href="#AlchemicalPipeline-531"><span class="linenos">531</span></a>        <span class="n">info</span> <span class="o">=</span> <span class="n">phase_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="n">phase_info</span><span class="p">[</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">])</span>
</span><span id="AlchemicalPipeline-532"><a href="#AlchemicalPipeline-532"><span class="linenos">532</span></a>        
</span><span id="AlchemicalPipeline-533"><a href="#AlchemicalPipeline-533"><span class="linenos">533</span></a>        <span class="c1"># Progreso basado en fase</span>
</span><span id="AlchemicalPipeline-534"><a href="#AlchemicalPipeline-534"><span class="linenos">534</span></a>        <span class="n">progress_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-535"><a href="#AlchemicalPipeline-535"><span class="linenos">535</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-536"><a href="#AlchemicalPipeline-536"><span class="linenos">536</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-537"><a href="#AlchemicalPipeline-537"><span class="linenos">537</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-538"><a href="#AlchemicalPipeline-538"><span class="linenos">538</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">CITRINITAS</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-539"><a href="#AlchemicalPipeline-539"><span class="linenos">539</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-540"><a href="#AlchemicalPipeline-540"><span class="linenos">540</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">:</span> <span class="mi">100</span>
</span><span id="AlchemicalPipeline-541"><a href="#AlchemicalPipeline-541"><span class="linenos">541</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline-542"><a href="#AlchemicalPipeline-542"><span class="linenos">542</span></a>        
</span><span id="AlchemicalPipeline-543"><a href="#AlchemicalPipeline-543"><span class="linenos">543</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline-544"><a href="#AlchemicalPipeline-544"><span class="linenos">544</span></a>            <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="n">phase</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AlchemicalPipeline-545"><a href="#AlchemicalPipeline-545"><span class="linenos">545</span></a>            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline-546"><a href="#AlchemicalPipeline-546"><span class="linenos">546</span></a>            <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline-547"><a href="#AlchemicalPipeline-547"><span class="linenos">547</span></a>            <span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline-548"><a href="#AlchemicalPipeline-548"><span class="linenos">548</span></a>            <span class="s1">&#39;progress&#39;</span><span class="p">:</span> <span class="n">progress_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="AlchemicalPipeline-549"><a href="#AlchemicalPipeline-549"><span class="linenos">549</span></a>            <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
</span><span id="AlchemicalPipeline-550"><a href="#AlchemicalPipeline-550"><span class="linenos">550</span></a>            <span class="s1">&#39;is_complete&#39;</span><span class="p">:</span> <span class="n">phase</span> <span class="o">==</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span>
</span><span id="AlchemicalPipeline-551"><a href="#AlchemicalPipeline-551"><span class="linenos">551</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline-552"><a href="#AlchemicalPipeline-552"><span class="linenos">552</span></a>    
</span><span id="AlchemicalPipeline-553"><a href="#AlchemicalPipeline-553"><span class="linenos">553</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">visualize_ascii</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-554"><a href="#AlchemicalPipeline-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-555"><a href="#AlchemicalPipeline-555"><span class="linenos">555</span></a><span class="sd">        Genera visualizaciÃ³n ASCII del estado actual.</span>
</span><span id="AlchemicalPipeline-556"><a href="#AlchemicalPipeline-556"><span class="linenos">556</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline-557"><a href="#AlchemicalPipeline-557"><span class="linenos">557</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline-558"><a href="#AlchemicalPipeline-558"><span class="linenos">558</span></a><span class="sd">            String con arte ASCII del estado</span>
</span><span id="AlchemicalPipeline-559"><a href="#AlchemicalPipeline-559"><span class="linenos">559</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-560"><a href="#AlchemicalPipeline-560"><span class="linenos">560</span></a>        <span class="n">phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_phase</span>
</span><span id="AlchemicalPipeline-561"><a href="#AlchemicalPipeline-561"><span class="linenos">561</span></a>        <span class="n">progress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visualization_state</span><span class="p">()[</span><span class="s1">&#39;progress&#39;</span><span class="p">]</span>
</span><span id="AlchemicalPipeline-562"><a href="#AlchemicalPipeline-562"><span class="linenos">562</span></a>        
</span><span id="AlchemicalPipeline-563"><a href="#AlchemicalPipeline-563"><span class="linenos">563</span></a>        <span class="c1"># Barra de progreso</span>
</span><span id="AlchemicalPipeline-564"><a href="#AlchemicalPipeline-564"><span class="linenos">564</span></a>        <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">40</span>
</span><span id="AlchemicalPipeline-565"><a href="#AlchemicalPipeline-565"><span class="linenos">565</span></a>        <span class="n">filled</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">progress</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">bar_width</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-566"><a href="#AlchemicalPipeline-566"><span class="linenos">566</span></a>        <span class="n">bar</span> <span class="o">=</span> <span class="s1">&#39;â&#39;</span> <span class="o">*</span> <span class="n">filled</span> <span class="o">+</span> <span class="s1">&#39;â&#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">bar_width</span> <span class="o">-</span> <span class="n">filled</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-567"><a href="#AlchemicalPipeline-567"><span class="linenos">567</span></a>        
</span><span id="AlchemicalPipeline-568"><a href="#AlchemicalPipeline-568"><span class="linenos">568</span></a>        <span class="c1"># Indicadores de fase</span>
</span><span id="AlchemicalPipeline-569"><a href="#AlchemicalPipeline-569"><span class="linenos">569</span></a>        <span class="n">phases</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AlchemicalPipeline-570"><a href="#AlchemicalPipeline-570"><span class="linenos">570</span></a>            <span class="p">(</span><span class="s1">&#39;â«&#39;</span><span class="p">,</span> <span class="s1">&#39;NIGREDO&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">),</span>
</span><span id="AlchemicalPipeline-571"><a href="#AlchemicalPipeline-571"><span class="linenos">571</span></a>            <span class="p">(</span><span class="s1">&#39;âª&#39;</span><span class="p">,</span> <span class="s1">&#39;ALBEDO&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">),</span>
</span><span id="AlchemicalPipeline-572"><a href="#AlchemicalPipeline-572"><span class="linenos">572</span></a>            <span class="p">(</span><span class="s1">&#39;ð´&#39;</span><span class="p">,</span> <span class="s1">&#39;RUBEDO&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">),</span>
</span><span id="AlchemicalPipeline-573"><a href="#AlchemicalPipeline-573"><span class="linenos">573</span></a>            <span class="p">(</span><span class="s1">&#39;â¨&#39;</span><span class="p">,</span> <span class="s1">&#39;OPUS&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">)</span>
</span><span id="AlchemicalPipeline-574"><a href="#AlchemicalPipeline-574"><span class="linenos">574</span></a>        <span class="p">]</span>
</span><span id="AlchemicalPipeline-575"><a href="#AlchemicalPipeline-575"><span class="linenos">575</span></a>        
</span><span id="AlchemicalPipeline-576"><a href="#AlchemicalPipeline-576"><span class="linenos">576</span></a>        <span class="n">phase_line</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span>
</span><span id="AlchemicalPipeline-577"><a href="#AlchemicalPipeline-577"><span class="linenos">577</span></a>        <span class="k">for</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-578"><a href="#AlchemicalPipeline-578"><span class="linenos">578</span></a>            <span class="k">if</span> <span class="n">phase</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-579"><a href="#AlchemicalPipeline-579"><span class="linenos">579</span></a>                <span class="n">phase_line</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">]âââ&quot;</span>
</span><span id="AlchemicalPipeline-580"><a href="#AlchemicalPipeline-580"><span class="linenos">580</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AlchemicalPipeline-581"><a href="#AlchemicalPipeline-581"><span class="linenos">581</span></a>                <span class="n">phase_line</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> âââ&quot;</span>
</span><span id="AlchemicalPipeline-582"><a href="#AlchemicalPipeline-582"><span class="linenos">582</span></a>        
</span><span id="AlchemicalPipeline-583"><a href="#AlchemicalPipeline-583"><span class="linenos">583</span></a>        <span class="n">viz</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-584"><a href="#AlchemicalPipeline-584"><span class="linenos">584</span></a><span class="s2">ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ</span>
</span><span id="AlchemicalPipeline-585"><a href="#AlchemicalPipeline-585"><span class="linenos">585</span></a><span class="s2">â            âï¸  TRANSMUTACIÃN ALQUÃMICA  âï¸              â</span>
</span><span id="AlchemicalPipeline-586"><a href="#AlchemicalPipeline-586"><span class="linenos">586</span></a><span class="s2">â âââââââââââââââââââââââââââââââââââââââââââââââââââââââââ£</span>
</span><span id="AlchemicalPipeline-587"><a href="#AlchemicalPipeline-587"><span class="linenos">587</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline-588"><a href="#AlchemicalPipeline-588"><span class="linenos">588</span></a><span class="s2">â  </span><span class="si">{</span><span class="n">phase_line</span><span class="si">}</span><span class="s2">                                          â</span>
</span><span id="AlchemicalPipeline-589"><a href="#AlchemicalPipeline-589"><span class="linenos">589</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline-590"><a href="#AlchemicalPipeline-590"><span class="linenos">590</span></a><span class="s2">â  Progreso: [</span><span class="si">{</span><span class="n">bar</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">progress</span><span class="si">}</span><span class="s2">%                         â</span>
</span><span id="AlchemicalPipeline-591"><a href="#AlchemicalPipeline-591"><span class="linenos">591</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline-592"><a href="#AlchemicalPipeline-592"><span class="linenos">592</span></a><span class="s2">â  Fase Actual: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_visualization_state</span><span class="p">()[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">20s</span><span class="si">}</span><span class="s2">   â</span>
</span><span id="AlchemicalPipeline-593"><a href="#AlchemicalPipeline-593"><span class="linenos">593</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline-594"><a href="#AlchemicalPipeline-594"><span class="linenos">594</span></a><span class="s2">â  ð MÃ©tricas:                                          â</span>
</span><span id="AlchemicalPipeline-595"><a href="#AlchemicalPipeline-595"><span class="linenos">595</span></a><span class="s2">â     â¢ Muestras ingresadas: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">                    â</span>
</span><span id="AlchemicalPipeline-596"><a href="#AlchemicalPipeline-596"><span class="linenos">596</span></a><span class="s2">â     â¢ Ruido eliminado: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%                      â</span>
</span><span id="AlchemicalPipeline-597"><a href="#AlchemicalPipeline-597"><span class="linenos">597</span></a><span class="s2">â     â¢ Confianza: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">prediction_confidence</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">                          â</span>
</span><span id="AlchemicalPipeline-598"><a href="#AlchemicalPipeline-598"><span class="linenos">598</span></a><span class="s2">â     â¢ Transmutaciones: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">transmutation_count</span><span class="si">}</span><span class="s2">                         â</span>
</span><span id="AlchemicalPipeline-599"><a href="#AlchemicalPipeline-599"><span class="linenos">599</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline-600"><a href="#AlchemicalPipeline-600"><span class="linenos">600</span></a><span class="s2">ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ</span>
</span><span id="AlchemicalPipeline-601"><a href="#AlchemicalPipeline-601"><span class="linenos">601</span></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-602"><a href="#AlchemicalPipeline-602"><span class="linenos">602</span></a>        <span class="k">return</span> <span class="n">viz</span>
</span><span id="AlchemicalPipeline-603"><a href="#AlchemicalPipeline-603"><span class="linenos">603</span></a>    
</span><span id="AlchemicalPipeline-604"><a href="#AlchemicalPipeline-604"><span class="linenos">604</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AlchemicalPipeline-605"><a href="#AlchemicalPipeline-605"><span class="linenos">605</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reinicia el pipeline para nueva transmutaciÃ³n.&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline-606"><a href="#AlchemicalPipeline-606"><span class="linenos">606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">TransmutationState</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-607"><a href="#AlchemicalPipeline-607"><span class="linenos">607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="AlchemicalPipeline-608"><a href="#AlchemicalPipeline-608"><span class="linenos">608</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline-609"><a href="#AlchemicalPipeline-609"><span class="linenos">609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline-610"><a href="#AlchemicalPipeline-610"><span class="linenos">610</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rubedo_result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline-611"><a href="#AlchemicalPipeline-611"><span class="linenos">611</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pipeline de TransmutaciÃ³n AlquÃ­mica para Proyecto EÃ³n.</p>

<p>Implementa la Gran Obra (Opus Magnum) como un sistema de
procesamiento de datos en tres fases:</p>

<ol>
<li><p>NIGREDO (PutrefacciÃ³n) â«</p>

<ul>
<li>Ingesta de datos crudos y ruidosos</li>
<li>"La materia prima debe primero descomponerse"</li>
</ul></li>
<li><p>ALBEDO (PurificaciÃ³n) âª</p>

<ul>
<li>Filtrado de ruido (Kalman Filter)</li>
<li>EliminaciÃ³n de outliers</li>
<li>NormalizaciÃ³n</li>
<li>"El mercurio filosÃ³fico purifica"</li>
</ul></li>
<li><p>RUBEDO (IluminaciÃ³n) ð´</p>

<ul>
<li>Inferencia con ESN</li>
<li>PredicciÃ³n final</li>
<li>"La Piedra Filosofal emerge"</li>
</ul></li>
</ol>

<p>Ejemplo:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>from alchemy import AlchemicalPipeline
      from esn.esn import EchoStateNetwork</p>
      
      <h1 id="crear-pipeline">Crear pipeline</h1>
      
      <p>pipeline = AlchemicalPipeline()</p>
      
      <h1 id="datos-crudos-del-sensor">Datos crudos del sensor</h1>
      
      <p>raw_data = sensor.read_batch(100)</p>
      
      <h1 id="transmutacion-completa">TransmutaciÃ³n completa</h1>
      
      <p>result = pipeline.transmute(raw_data, esn_model)
      print(f"PredicciÃ³n: {result['gold']}")
      print(f"Fase: {pipeline.state.current_phase.name}")</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            <div id="AlchemicalPipeline.__init__" class="classattr">
                                        <input id="AlchemicalPipeline.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AlchemicalPipeline</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#AlchemicalConfig">AlchemicalConfig</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="AlchemicalPipeline.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.__init__-234"><a href="#AlchemicalPipeline.__init__-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AlchemicalConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="AlchemicalPipeline.__init__-235"><a href="#AlchemicalPipeline.__init__-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.__init__-236"><a href="#AlchemicalPipeline.__init__-236"><span class="linenos">236</span></a><span class="sd">        Inicializa el pipeline alquÃ­mico.</span>
</span><span id="AlchemicalPipeline.__init__-237"><a href="#AlchemicalPipeline.__init__-237"><span class="linenos">237</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.__init__-238"><a href="#AlchemicalPipeline.__init__-238"><span class="linenos">238</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline.__init__-239"><a href="#AlchemicalPipeline.__init__-239"><span class="linenos">239</span></a><span class="sd">            config: ConfiguraciÃ³n del pipeline</span>
</span><span id="AlchemicalPipeline.__init__-240"><a href="#AlchemicalPipeline.__init__-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.__init__-241"><a href="#AlchemicalPipeline.__init__-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="ow">or</span> <span class="n">AlchemicalConfig</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.__init__-242"><a href="#AlchemicalPipeline.__init__-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">TransmutationState</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.__init__-243"><a href="#AlchemicalPipeline.__init__-243"><span class="linenos">243</span></a>        
</span><span id="AlchemicalPipeline.__init__-244"><a href="#AlchemicalPipeline.__init__-244"><span class="linenos">244</span></a>        <span class="c1"># Componentes de purificaciÃ³n</span>
</span><span id="AlchemicalPipeline.__init__-245"><a href="#AlchemicalPipeline.__init__-245"><span class="linenos">245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span> <span class="o">=</span> <span class="n">KalmanFilter</span><span class="p">(</span>
</span><span id="AlchemicalPipeline.__init__-246"><a href="#AlchemicalPipeline.__init__-246"><span class="linenos">246</span></a>            <span class="n">process_noise</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kalman_process_noise</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.__init__-247"><a href="#AlchemicalPipeline.__init__-247"><span class="linenos">247</span></a>            <span class="n">measurement_noise</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kalman_measurement_noise</span>
</span><span id="AlchemicalPipeline.__init__-248"><a href="#AlchemicalPipeline.__init__-248"><span class="linenos">248</span></a>        <span class="p">)</span>
</span><span id="AlchemicalPipeline.__init__-249"><a href="#AlchemicalPipeline.__init__-249"><span class="linenos">249</span></a>        
</span><span id="AlchemicalPipeline.__init__-250"><a href="#AlchemicalPipeline.__init__-250"><span class="linenos">250</span></a>        <span class="c1"># Datos intermedios</span>
</span><span id="AlchemicalPipeline.__init__-251"><a href="#AlchemicalPipeline.__init__-251"><span class="linenos">251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline.__init__-252"><a href="#AlchemicalPipeline.__init__-252"><span class="linenos">252</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline.__init__-253"><a href="#AlchemicalPipeline.__init__-253"><span class="linenos">253</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rubedo_result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline.__init__-254"><a href="#AlchemicalPipeline.__init__-254"><span class="linenos">254</span></a>        
</span><span id="AlchemicalPipeline.__init__-255"><a href="#AlchemicalPipeline.__init__-255"><span class="linenos">255</span></a>        <span class="c1"># Historial de transmutaciones</span>
</span><span id="AlchemicalPipeline.__init__-256"><a href="#AlchemicalPipeline.__init__-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Inicializa el pipeline alquÃ­mico.</p>

<p>Args:
    config: ConfiguraciÃ³n del pipeline</p>
</div>


                            </div>
                            <div id="AlchemicalPipeline.config" class="classattr">
                                <div class="attr variable">
            <span class="name">config</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPipeline.config"></a>
    
    

                            </div>
                            <div id="AlchemicalPipeline.state" class="classattr">
                                <div class="attr variable">
            <span class="name">state</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPipeline.state"></a>
    
    

                            </div>
                            <div id="AlchemicalPipeline.kalman" class="classattr">
                                <div class="attr variable">
            <span class="name">kalman</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPipeline.kalman"></a>
    
    

                            </div>
                            <div id="AlchemicalPipeline.nigredo" class="classattr">
                                        <input id="AlchemicalPipeline.nigredo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">nigredo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">raw_data</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>:</span></span>

                <label class="view-source-button" for="AlchemicalPipeline.nigredo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.nigredo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.nigredo-267"><a href="#AlchemicalPipeline.nigredo-267"><span class="linenos">267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nigredo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.nigredo-268"><a href="#AlchemicalPipeline.nigredo-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.nigredo-269"><a href="#AlchemicalPipeline.nigredo-269"><span class="linenos">269</span></a><span class="sd">        NIGREDO - Fase de PutrefacciÃ³n â«</span>
</span><span id="AlchemicalPipeline.nigredo-270"><a href="#AlchemicalPipeline.nigredo-270"><span class="linenos">270</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.nigredo-271"><a href="#AlchemicalPipeline.nigredo-271"><span class="linenos">271</span></a><span class="sd">        &quot;Lo que no se descompone, no puede ser reconstruido.&quot;</span>
</span><span id="AlchemicalPipeline.nigredo-272"><a href="#AlchemicalPipeline.nigredo-272"><span class="linenos">272</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.nigredo-273"><a href="#AlchemicalPipeline.nigredo-273"><span class="linenos">273</span></a><span class="sd">        Acepta los datos crudos tal como vienen del sensor.</span>
</span><span id="AlchemicalPipeline.nigredo-274"><a href="#AlchemicalPipeline.nigredo-274"><span class="linenos">274</span></a><span class="sd">        Esta fase representa la aceptaciÃ³n de la impureza inicial.</span>
</span><span id="AlchemicalPipeline.nigredo-275"><a href="#AlchemicalPipeline.nigredo-275"><span class="linenos">275</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.nigredo-276"><a href="#AlchemicalPipeline.nigredo-276"><span class="linenos">276</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline.nigredo-277"><a href="#AlchemicalPipeline.nigredo-277"><span class="linenos">277</span></a><span class="sd">            raw_data: Datos crudos del sensor (1D o 2D array)</span>
</span><span id="AlchemicalPipeline.nigredo-278"><a href="#AlchemicalPipeline.nigredo-278"><span class="linenos">278</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline.nigredo-279"><a href="#AlchemicalPipeline.nigredo-279"><span class="linenos">279</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline.nigredo-280"><a href="#AlchemicalPipeline.nigredo-280"><span class="linenos">280</span></a><span class="sd">            Los mismos datos, marcados como ingresados al sistema</span>
</span><span id="AlchemicalPipeline.nigredo-281"><a href="#AlchemicalPipeline.nigredo-281"><span class="linenos">281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.nigredo-282"><a href="#AlchemicalPipeline.nigredo-282"><span class="linenos">282</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.nigredo-283"><a href="#AlchemicalPipeline.nigredo-283"><span class="linenos">283</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.nigredo-284"><a href="#AlchemicalPipeline.nigredo-284"><span class="linenos">284</span></a>        
</span><span id="AlchemicalPipeline.nigredo-285"><a href="#AlchemicalPipeline.nigredo-285"><span class="linenos">285</span></a>        <span class="c1"># Asegurar formato numpy</span>
</span><span id="AlchemicalPipeline.nigredo-286"><a href="#AlchemicalPipeline.nigredo-286"><span class="linenos">286</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
</span><span id="AlchemicalPipeline.nigredo-287"><a href="#AlchemicalPipeline.nigredo-287"><span class="linenos">287</span></a>            <span class="n">raw_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.nigredo-288"><a href="#AlchemicalPipeline.nigredo-288"><span class="linenos">288</span></a>        
</span><span id="AlchemicalPipeline.nigredo-289"><a href="#AlchemicalPipeline.nigredo-289"><span class="linenos">289</span></a>        <span class="c1"># Flatten si es necesario para pipeline</span>
</span><span id="AlchemicalPipeline.nigredo-290"><a href="#AlchemicalPipeline.nigredo-290"><span class="linenos">290</span></a>        <span class="k">if</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.nigredo-291"><a href="#AlchemicalPipeline.nigredo-291"><span class="linenos">291</span></a>            <span class="n">raw_data</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.nigredo-292"><a href="#AlchemicalPipeline.nigredo-292"><span class="linenos">292</span></a>        
</span><span id="AlchemicalPipeline.nigredo-293"><a href="#AlchemicalPipeline.nigredo-293"><span class="linenos">293</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.nigredo-294"><a href="#AlchemicalPipeline.nigredo-294"><span class="linenos">294</span></a>        
</span><span id="AlchemicalPipeline.nigredo-295"><a href="#AlchemicalPipeline.nigredo-295"><span class="linenos">295</span></a>        <span class="c1"># MÃ©tricas</span>
</span><span id="AlchemicalPipeline.nigredo-296"><a href="#AlchemicalPipeline.nigredo-296"><span class="linenos">296</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.nigredo-297"><a href="#AlchemicalPipeline.nigredo-297"><span class="linenos">297</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="AlchemicalPipeline.nigredo-298"><a href="#AlchemicalPipeline.nigredo-298"><span class="linenos">298</span></a>        
</span><span id="AlchemicalPipeline.nigredo-299"><a href="#AlchemicalPipeline.nigredo-299"><span class="linenos">299</span></a>        <span class="k">return</span> <span class="n">raw_data</span>
</span></pre></div>


            <div class="docstring"><p>NIGREDO - Fase de PutrefacciÃ³n â«</p>

<p>"Lo que no se descompone, no puede ser reconstruido."</p>

<p>Acepta los datos crudos tal como vienen del sensor.
Esta fase representa la aceptaciÃ³n de la impureza inicial.</p>

<p>Args:
    raw_data: Datos crudos del sensor (1D o 2D array)</p>

<p>Returns:
    Los mismos datos, marcados como ingresados al sistema</p>
</div>


                            </div>
                            <div id="AlchemicalPipeline.albedo" class="classattr">
                                        <input id="AlchemicalPipeline.albedo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">albedo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>:</span></span>

                <label class="view-source-button" for="AlchemicalPipeline.albedo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.albedo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.albedo-301"><a href="#AlchemicalPipeline.albedo-301"><span class="linenos">301</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">albedo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-302"><a href="#AlchemicalPipeline.albedo-302"><span class="linenos">302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.albedo-303"><a href="#AlchemicalPipeline.albedo-303"><span class="linenos">303</span></a><span class="sd">        ALBEDO - Fase de PurificaciÃ³n âª</span>
</span><span id="AlchemicalPipeline.albedo-304"><a href="#AlchemicalPipeline.albedo-304"><span class="linenos">304</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.albedo-305"><a href="#AlchemicalPipeline.albedo-305"><span class="linenos">305</span></a><span class="sd">        &quot;El mercurio filosÃ³fico separa lo puro de lo impuro.&quot;</span>
</span><span id="AlchemicalPipeline.albedo-306"><a href="#AlchemicalPipeline.albedo-306"><span class="linenos">306</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.albedo-307"><a href="#AlchemicalPipeline.albedo-307"><span class="linenos">307</span></a><span class="sd">        Aplica filtrado y limpieza a los datos:</span>
</span><span id="AlchemicalPipeline.albedo-308"><a href="#AlchemicalPipeline.albedo-308"><span class="linenos">308</span></a><span class="sd">        1. Filtro de Kalman para suavizar ruido</span>
</span><span id="AlchemicalPipeline.albedo-309"><a href="#AlchemicalPipeline.albedo-309"><span class="linenos">309</span></a><span class="sd">        2. EliminaciÃ³n de outliers</span>
</span><span id="AlchemicalPipeline.albedo-310"><a href="#AlchemicalPipeline.albedo-310"><span class="linenos">310</span></a><span class="sd">        3. NormalizaciÃ³n opcional</span>
</span><span id="AlchemicalPipeline.albedo-311"><a href="#AlchemicalPipeline.albedo-311"><span class="linenos">311</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.albedo-312"><a href="#AlchemicalPipeline.albedo-312"><span class="linenos">312</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline.albedo-313"><a href="#AlchemicalPipeline.albedo-313"><span class="linenos">313</span></a><span class="sd">            data: Datos a purificar (usa materia_prima si None)</span>
</span><span id="AlchemicalPipeline.albedo-314"><a href="#AlchemicalPipeline.albedo-314"><span class="linenos">314</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline.albedo-315"><a href="#AlchemicalPipeline.albedo-315"><span class="linenos">315</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline.albedo-316"><a href="#AlchemicalPipeline.albedo-316"><span class="linenos">316</span></a><span class="sd">            Datos purificados</span>
</span><span id="AlchemicalPipeline.albedo-317"><a href="#AlchemicalPipeline.albedo-317"><span class="linenos">317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.albedo-318"><a href="#AlchemicalPipeline.albedo-318"><span class="linenos">318</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.albedo-319"><a href="#AlchemicalPipeline.albedo-319"><span class="linenos">319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-320"><a href="#AlchemicalPipeline.albedo-320"><span class="linenos">320</span></a>        
</span><span id="AlchemicalPipeline.albedo-321"><a href="#AlchemicalPipeline.albedo-321"><span class="linenos">321</span></a>        <span class="c1"># Usar materia prima si no se proporciona data</span>
</span><span id="AlchemicalPipeline.albedo-322"><a href="#AlchemicalPipeline.albedo-322"><span class="linenos">322</span></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-323"><a href="#AlchemicalPipeline.albedo-323"><span class="linenos">323</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-324"><a href="#AlchemicalPipeline.albedo-324"><span class="linenos">324</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No hay materia prima. Ejecuta nigredo() primero.&quot;</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-325"><a href="#AlchemicalPipeline.albedo-325"><span class="linenos">325</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.albedo-326"><a href="#AlchemicalPipeline.albedo-326"><span class="linenos">326</span></a>        
</span><span id="AlchemicalPipeline.albedo-327"><a href="#AlchemicalPipeline.albedo-327"><span class="linenos">327</span></a>        <span class="n">original_variance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="AlchemicalPipeline.albedo-328"><a href="#AlchemicalPipeline.albedo-328"><span class="linenos">328</span></a>        
</span><span id="AlchemicalPipeline.albedo-329"><a href="#AlchemicalPipeline.albedo-329"><span class="linenos">329</span></a>        <span class="c1"># Paso 1: Filtro de Kalman</span>
</span><span id="AlchemicalPipeline.albedo-330"><a href="#AlchemicalPipeline.albedo-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.albedo-331"><a href="#AlchemicalPipeline.albedo-331"><span class="linenos">331</span></a>        <span class="n">filtered</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span><span class="o">.</span><span class="n">filter_sequence</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-332"><a href="#AlchemicalPipeline.albedo-332"><span class="linenos">332</span></a>        
</span><span id="AlchemicalPipeline.albedo-333"><a href="#AlchemicalPipeline.albedo-333"><span class="linenos">333</span></a>        <span class="c1"># Paso 2: Eliminar outliers</span>
</span><span id="AlchemicalPipeline.albedo-334"><a href="#AlchemicalPipeline.albedo-334"><span class="linenos">334</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">remove_outliers</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-335"><a href="#AlchemicalPipeline.albedo-335"><span class="linenos">335</span></a>            <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-336"><a href="#AlchemicalPipeline.albedo-336"><span class="linenos">336</span></a>            <span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-337"><a href="#AlchemicalPipeline.albedo-337"><span class="linenos">337</span></a>            <span class="k">if</span> <span class="n">std</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-338"><a href="#AlchemicalPipeline.albedo-338"><span class="linenos">338</span></a>                <span class="n">z_scores</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">((</span><span class="n">filtered</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">/</span> <span class="n">std</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-339"><a href="#AlchemicalPipeline.albedo-339"><span class="linenos">339</span></a>                <span class="n">mask</span> <span class="o">=</span> <span class="n">z_scores</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">outlier_threshold</span>
</span><span id="AlchemicalPipeline.albedo-340"><a href="#AlchemicalPipeline.albedo-340"><span class="linenos">340</span></a>                <span class="n">filtered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span>
</span><span id="AlchemicalPipeline.albedo-341"><a href="#AlchemicalPipeline.albedo-341"><span class="linenos">341</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)),</span>
</span><span id="AlchemicalPipeline.albedo-342"><a href="#AlchemicalPipeline.albedo-342"><span class="linenos">342</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AlchemicalPipeline.albedo-343"><a href="#AlchemicalPipeline.albedo-343"><span class="linenos">343</span></a>                    <span class="n">filtered</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</span><span id="AlchemicalPipeline.albedo-344"><a href="#AlchemicalPipeline.albedo-344"><span class="linenos">344</span></a>                <span class="p">)</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="k">else</span> <span class="n">filtered</span>
</span><span id="AlchemicalPipeline.albedo-345"><a href="#AlchemicalPipeline.albedo-345"><span class="linenos">345</span></a>        
</span><span id="AlchemicalPipeline.albedo-346"><a href="#AlchemicalPipeline.albedo-346"><span class="linenos">346</span></a>        <span class="c1"># Paso 3: Suavizado adicional (media mÃ³vil)</span>
</span><span id="AlchemicalPipeline.albedo-347"><a href="#AlchemicalPipeline.albedo-347"><span class="linenos">347</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_moving_average</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-348"><a href="#AlchemicalPipeline.albedo-348"><span class="linenos">348</span></a>            <span class="n">kernel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span>
</span><span id="AlchemicalPipeline.albedo-349"><a href="#AlchemicalPipeline.albedo-349"><span class="linenos">349</span></a>            <span class="c1"># Pad para mantener longitud</span>
</span><span id="AlchemicalPipeline.albedo-350"><a href="#AlchemicalPipeline.albedo-350"><span class="linenos">350</span></a>            <span class="n">padded</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pad</span><span class="p">(</span><span class="n">filtered</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">window_size</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;edge&#39;</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-351"><a href="#AlchemicalPipeline.albedo-351"><span class="linenos">351</span></a>            <span class="n">filtered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">padded</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)[:</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)]</span>
</span><span id="AlchemicalPipeline.albedo-352"><a href="#AlchemicalPipeline.albedo-352"><span class="linenos">352</span></a>        
</span><span id="AlchemicalPipeline.albedo-353"><a href="#AlchemicalPipeline.albedo-353"><span class="linenos">353</span></a>        <span class="c1"># Paso 4: NormalizaciÃ³n</span>
</span><span id="AlchemicalPipeline.albedo-354"><a href="#AlchemicalPipeline.albedo-354"><span class="linenos">354</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">normalize</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-355"><a href="#AlchemicalPipeline.albedo-355"><span class="linenos">355</span></a>            <span class="n">min_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-356"><a href="#AlchemicalPipeline.albedo-356"><span class="linenos">356</span></a>            <span class="n">max_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-357"><a href="#AlchemicalPipeline.albedo-357"><span class="linenos">357</span></a>            <span class="k">if</span> <span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span> <span class="o">&gt;</span> <span class="mf">1e-6</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-358"><a href="#AlchemicalPipeline.albedo-358"><span class="linenos">358</span></a>                <span class="n">filtered</span> <span class="o">=</span> <span class="p">(</span><span class="n">filtered</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline.albedo-359"><a href="#AlchemicalPipeline.albedo-359"><span class="linenos">359</span></a>        
</span><span id="AlchemicalPipeline.albedo-360"><a href="#AlchemicalPipeline.albedo-360"><span class="linenos">360</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span> <span class="o">=</span> <span class="n">filtered</span>
</span><span id="AlchemicalPipeline.albedo-361"><a href="#AlchemicalPipeline.albedo-361"><span class="linenos">361</span></a>        
</span><span id="AlchemicalPipeline.albedo-362"><a href="#AlchemicalPipeline.albedo-362"><span class="linenos">362</span></a>        <span class="c1"># MÃ©tricas</span>
</span><span id="AlchemicalPipeline.albedo-363"><a href="#AlchemicalPipeline.albedo-363"><span class="linenos">363</span></a>        <span class="n">new_variance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="AlchemicalPipeline.albedo-364"><a href="#AlchemicalPipeline.albedo-364"><span class="linenos">364</span></a>        <span class="k">if</span> <span class="n">original_variance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.albedo-365"><a href="#AlchemicalPipeline.albedo-365"><span class="linenos">365</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">new_variance</span> <span class="o">/</span> <span class="n">original_variance</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
</span><span id="AlchemicalPipeline.albedo-366"><a href="#AlchemicalPipeline.albedo-366"><span class="linenos">366</span></a>        
</span><span id="AlchemicalPipeline.albedo-367"><a href="#AlchemicalPipeline.albedo-367"><span class="linenos">367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.albedo-368"><a href="#AlchemicalPipeline.albedo-368"><span class="linenos">368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="AlchemicalPipeline.albedo-369"><a href="#AlchemicalPipeline.albedo-369"><span class="linenos">369</span></a>        
</span><span id="AlchemicalPipeline.albedo-370"><a href="#AlchemicalPipeline.albedo-370"><span class="linenos">370</span></a>        <span class="k">return</span> <span class="n">filtered</span>
</span></pre></div>


            <div class="docstring"><p>ALBEDO - Fase de PurificaciÃ³n âª</p>

<p>"El mercurio filosÃ³fico separa lo puro de lo impuro."</p>

<p>Aplica filtrado y limpieza a los datos:</p>

<ol>
<li>Filtro de Kalman para suavizar ruido</li>
<li>EliminaciÃ³n de outliers</li>
<li>NormalizaciÃ³n opcional</li>
</ol>

<p>Args:
    data: Datos a purificar (usa materia_prima si None)</p>

<p>Returns:
    Datos purificados</p>
</div>


                            </div>
                            <div id="AlchemicalPipeline.rubedo" class="classattr">
                                        <input id="AlchemicalPipeline.rubedo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rubedo</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">esn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">prediction_horizon</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="AlchemicalPipeline.rubedo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.rubedo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.rubedo-372"><a href="#AlchemicalPipeline.rubedo-372"><span class="linenos">372</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rubedo</span><span class="p">(</span>
</span><span id="AlchemicalPipeline.rubedo-373"><a href="#AlchemicalPipeline.rubedo-373"><span class="linenos">373</span></a>        <span class="bp">self</span><span class="p">,</span> 
</span><span id="AlchemicalPipeline.rubedo-374"><a href="#AlchemicalPipeline.rubedo-374"><span class="linenos">374</span></a>        <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-375"><a href="#AlchemicalPipeline.rubedo-375"><span class="linenos">375</span></a>        <span class="n">esn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-376"><a href="#AlchemicalPipeline.rubedo-376"><span class="linenos">376</span></a>        <span class="n">prediction_horizon</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline.rubedo-377"><a href="#AlchemicalPipeline.rubedo-377"><span class="linenos">377</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="AlchemicalPipeline.rubedo-378"><a href="#AlchemicalPipeline.rubedo-378"><span class="linenos">378</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.rubedo-379"><a href="#AlchemicalPipeline.rubedo-379"><span class="linenos">379</span></a><span class="sd">        RUBEDO - Fase de IluminaciÃ³n ð´</span>
</span><span id="AlchemicalPipeline.rubedo-380"><a href="#AlchemicalPipeline.rubedo-380"><span class="linenos">380</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.rubedo-381"><a href="#AlchemicalPipeline.rubedo-381"><span class="linenos">381</span></a><span class="sd">        &quot;La Piedra Filosofal transforma el plomo en oro.&quot;</span>
</span><span id="AlchemicalPipeline.rubedo-382"><a href="#AlchemicalPipeline.rubedo-382"><span class="linenos">382</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.rubedo-383"><a href="#AlchemicalPipeline.rubedo-383"><span class="linenos">383</span></a><span class="sd">        Ejecuta la inferencia final usando el ESN entrenado.</span>
</span><span id="AlchemicalPipeline.rubedo-384"><a href="#AlchemicalPipeline.rubedo-384"><span class="linenos">384</span></a><span class="sd">        Esta es la transformaciÃ³n final de datos puros en conocimiento.</span>
</span><span id="AlchemicalPipeline.rubedo-385"><a href="#AlchemicalPipeline.rubedo-385"><span class="linenos">385</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.rubedo-386"><a href="#AlchemicalPipeline.rubedo-386"><span class="linenos">386</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline.rubedo-387"><a href="#AlchemicalPipeline.rubedo-387"><span class="linenos">387</span></a><span class="sd">            data: Datos purificados (usa albedo_result si None)</span>
</span><span id="AlchemicalPipeline.rubedo-388"><a href="#AlchemicalPipeline.rubedo-388"><span class="linenos">388</span></a><span class="sd">            esn: EchoStateNetwork entrenado para inferencia</span>
</span><span id="AlchemicalPipeline.rubedo-389"><a href="#AlchemicalPipeline.rubedo-389"><span class="linenos">389</span></a><span class="sd">            prediction_horizon: CuÃ¡ntos pasos predecir</span>
</span><span id="AlchemicalPipeline.rubedo-390"><a href="#AlchemicalPipeline.rubedo-390"><span class="linenos">390</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline.rubedo-391"><a href="#AlchemicalPipeline.rubedo-391"><span class="linenos">391</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline.rubedo-392"><a href="#AlchemicalPipeline.rubedo-392"><span class="linenos">392</span></a><span class="sd">            Diccionario con:</span>
</span><span id="AlchemicalPipeline.rubedo-393"><a href="#AlchemicalPipeline.rubedo-393"><span class="linenos">393</span></a><span class="sd">            - &#39;gold&#39;: La predicciÃ³n/inferencia (La Piedra Filosofal)</span>
</span><span id="AlchemicalPipeline.rubedo-394"><a href="#AlchemicalPipeline.rubedo-394"><span class="linenos">394</span></a><span class="sd">            - &#39;confidence&#39;: Nivel de confianza</span>
</span><span id="AlchemicalPipeline.rubedo-395"><a href="#AlchemicalPipeline.rubedo-395"><span class="linenos">395</span></a><span class="sd">            - &#39;transmutation_complete&#39;: bool</span>
</span><span id="AlchemicalPipeline.rubedo-396"><a href="#AlchemicalPipeline.rubedo-396"><span class="linenos">396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.rubedo-397"><a href="#AlchemicalPipeline.rubedo-397"><span class="linenos">397</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.rubedo-398"><a href="#AlchemicalPipeline.rubedo-398"><span class="linenos">398</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.rubedo-399"><a href="#AlchemicalPipeline.rubedo-399"><span class="linenos">399</span></a>        
</span><span id="AlchemicalPipeline.rubedo-400"><a href="#AlchemicalPipeline.rubedo-400"><span class="linenos">400</span></a>        <span class="c1"># Usar resultado de albedo si no se proporciona</span>
</span><span id="AlchemicalPipeline.rubedo-401"><a href="#AlchemicalPipeline.rubedo-401"><span class="linenos">401</span></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-402"><a href="#AlchemicalPipeline.rubedo-402"><span class="linenos">402</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-403"><a href="#AlchemicalPipeline.rubedo-403"><span class="linenos">403</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No hay datos purificados. Ejecuta albedo() primero.&quot;</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.rubedo-404"><a href="#AlchemicalPipeline.rubedo-404"><span class="linenos">404</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span>
</span><span id="AlchemicalPipeline.rubedo-405"><a href="#AlchemicalPipeline.rubedo-405"><span class="linenos">405</span></a>        
</span><span id="AlchemicalPipeline.rubedo-406"><a href="#AlchemicalPipeline.rubedo-406"><span class="linenos">406</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.rubedo-407"><a href="#AlchemicalPipeline.rubedo-407"><span class="linenos">407</span></a>            <span class="s1">&#39;gold&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-408"><a href="#AlchemicalPipeline.rubedo-408"><span class="linenos">408</span></a>            <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-409"><a href="#AlchemicalPipeline.rubedo-409"><span class="linenos">409</span></a>            <span class="s1">&#39;transmutation_complete&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-410"><a href="#AlchemicalPipeline.rubedo-410"><span class="linenos">410</span></a>            <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="s1">&#39;RUBEDO&#39;</span>
</span><span id="AlchemicalPipeline.rubedo-411"><a href="#AlchemicalPipeline.rubedo-411"><span class="linenos">411</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline.rubedo-412"><a href="#AlchemicalPipeline.rubedo-412"><span class="linenos">412</span></a>        
</span><span id="AlchemicalPipeline.rubedo-413"><a href="#AlchemicalPipeline.rubedo-413"><span class="linenos">413</span></a>        <span class="k">if</span> <span class="n">esn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-414"><a href="#AlchemicalPipeline.rubedo-414"><span class="linenos">414</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-415"><a href="#AlchemicalPipeline.rubedo-415"><span class="linenos">415</span></a>                <span class="c1"># Preparar datos para ESN</span>
</span><span id="AlchemicalPipeline.rubedo-416"><a href="#AlchemicalPipeline.rubedo-416"><span class="linenos">416</span></a>                <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">data</span>
</span><span id="AlchemicalPipeline.rubedo-417"><a href="#AlchemicalPipeline.rubedo-417"><span class="linenos">417</span></a>                
</span><span id="AlchemicalPipeline.rubedo-418"><a href="#AlchemicalPipeline.rubedo-418"><span class="linenos">418</span></a>                <span class="c1"># PredicciÃ³n</span>
</span><span id="AlchemicalPipeline.rubedo-419"><a href="#AlchemicalPipeline.rubedo-419"><span class="linenos">419</span></a>                <span class="n">esn</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.rubedo-420"><a href="#AlchemicalPipeline.rubedo-420"><span class="linenos">420</span></a>                <span class="n">predictions</span> <span class="o">=</span> <span class="n">esn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.rubedo-421"><a href="#AlchemicalPipeline.rubedo-421"><span class="linenos">421</span></a>                
</span><span id="AlchemicalPipeline.rubedo-422"><a href="#AlchemicalPipeline.rubedo-422"><span class="linenos">422</span></a>                <span class="c1"># La Ãºltima predicciÃ³n es &quot;el oro&quot;</span>
</span><span id="AlchemicalPipeline.rubedo-423"><a href="#AlchemicalPipeline.rubedo-423"><span class="linenos">423</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;gold&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">predictions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">predictions</span>
</span><span id="AlchemicalPipeline.rubedo-424"><a href="#AlchemicalPipeline.rubedo-424"><span class="linenos">424</span></a>                
</span><span id="AlchemicalPipeline.rubedo-425"><a href="#AlchemicalPipeline.rubedo-425"><span class="linenos">425</span></a>                <span class="c1"># Calcular confianza basada en estabilidad de predicciones</span>
</span><span id="AlchemicalPipeline.rubedo-426"><a href="#AlchemicalPipeline.rubedo-426"><span class="linenos">426</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-427"><a href="#AlchemicalPipeline.rubedo-427"><span class="linenos">427</span></a>                    <span class="n">pred_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">predictions</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.rubedo-428"><a href="#AlchemicalPipeline.rubedo-428"><span class="linenos">428</span></a>                    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">pred_std</span><span class="p">))</span>
</span><span id="AlchemicalPipeline.rubedo-429"><a href="#AlchemicalPipeline.rubedo-429"><span class="linenos">429</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-430"><a href="#AlchemicalPipeline.rubedo-430"><span class="linenos">430</span></a>                    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
</span><span id="AlchemicalPipeline.rubedo-431"><a href="#AlchemicalPipeline.rubedo-431"><span class="linenos">431</span></a>                    
</span><span id="AlchemicalPipeline.rubedo-432"><a href="#AlchemicalPipeline.rubedo-432"><span class="linenos">432</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;transmutation_complete&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AlchemicalPipeline.rubedo-433"><a href="#AlchemicalPipeline.rubedo-433"><span class="linenos">433</span></a>                
</span><span id="AlchemicalPipeline.rubedo-434"><a href="#AlchemicalPipeline.rubedo-434"><span class="linenos">434</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-435"><a href="#AlchemicalPipeline.rubedo-435"><span class="linenos">435</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.rubedo-436"><a href="#AlchemicalPipeline.rubedo-436"><span class="linenos">436</span></a>                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="AlchemicalPipeline.rubedo-437"><a href="#AlchemicalPipeline.rubedo-437"><span class="linenos">437</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.rubedo-438"><a href="#AlchemicalPipeline.rubedo-438"><span class="linenos">438</span></a>            <span class="c1"># Sin ESN, la &quot;predicciÃ³n&quot; es simplemente el dato purificado</span>
</span><span id="AlchemicalPipeline.rubedo-439"><a href="#AlchemicalPipeline.rubedo-439"><span class="linenos">439</span></a>            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;gold&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">data</span>
</span><span id="AlchemicalPipeline.rubedo-440"><a href="#AlchemicalPipeline.rubedo-440"><span class="linenos">440</span></a>            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
</span><span id="AlchemicalPipeline.rubedo-441"><a href="#AlchemicalPipeline.rubedo-441"><span class="linenos">441</span></a>            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Sin ESN - usando valor purificado como resultado&quot;</span>
</span><span id="AlchemicalPipeline.rubedo-442"><a href="#AlchemicalPipeline.rubedo-442"><span class="linenos">442</span></a>        
</span><span id="AlchemicalPipeline.rubedo-443"><a href="#AlchemicalPipeline.rubedo-443"><span class="linenos">443</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rubedo_result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;gold&#39;</span><span class="p">]</span>
</span><span id="AlchemicalPipeline.rubedo-444"><a href="#AlchemicalPipeline.rubedo-444"><span class="linenos">444</span></a>        
</span><span id="AlchemicalPipeline.rubedo-445"><a href="#AlchemicalPipeline.rubedo-445"><span class="linenos">445</span></a>        <span class="c1"># Actualizar estado</span>
</span><span id="AlchemicalPipeline.rubedo-446"><a href="#AlchemicalPipeline.rubedo-446"><span class="linenos">446</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_predictions</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline.rubedo-447"><a href="#AlchemicalPipeline.rubedo-447"><span class="linenos">447</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">prediction_confidence</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span>
</span><span id="AlchemicalPipeline.rubedo-448"><a href="#AlchemicalPipeline.rubedo-448"><span class="linenos">448</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="AlchemicalPipeline.rubedo-449"><a href="#AlchemicalPipeline.rubedo-449"><span class="linenos">449</span></a>        
</span><span id="AlchemicalPipeline.rubedo-450"><a href="#AlchemicalPipeline.rubedo-450"><span class="linenos">450</span></a>        <span class="c1"># Completar opus</span>
</span><span id="AlchemicalPipeline.rubedo-451"><a href="#AlchemicalPipeline.rubedo-451"><span class="linenos">451</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;transmutation_complete&#39;</span><span class="p">]:</span>
</span><span id="AlchemicalPipeline.rubedo-452"><a href="#AlchemicalPipeline.rubedo-452"><span class="linenos">452</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.rubedo-453"><a href="#AlchemicalPipeline.rubedo-453"><span class="linenos">453</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">transmutation_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="AlchemicalPipeline.rubedo-454"><a href="#AlchemicalPipeline.rubedo-454"><span class="linenos">454</span></a>            
</span><span id="AlchemicalPipeline.rubedo-455"><a href="#AlchemicalPipeline.rubedo-455"><span class="linenos">455</span></a>            <span class="c1"># Guardar en historial</span>
</span><span id="AlchemicalPipeline.rubedo-456"><a href="#AlchemicalPipeline.rubedo-456"><span class="linenos">456</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="AlchemicalPipeline.rubedo-457"><a href="#AlchemicalPipeline.rubedo-457"><span class="linenos">457</span></a>                <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
</span><span id="AlchemicalPipeline.rubedo-458"><a href="#AlchemicalPipeline.rubedo-458"><span class="linenos">458</span></a>                <span class="s1">&#39;samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-459"><a href="#AlchemicalPipeline.rubedo-459"><span class="linenos">459</span></a>                <span class="s1">&#39;noise_removed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-460"><a href="#AlchemicalPipeline.rubedo-460"><span class="linenos">460</span></a>                <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline.rubedo-461"><a href="#AlchemicalPipeline.rubedo-461"><span class="linenos">461</span></a>                <span class="s1">&#39;durations&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.rubedo-462"><a href="#AlchemicalPipeline.rubedo-462"><span class="linenos">462</span></a>                    <span class="s1">&#39;nigredo&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_duration</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-463"><a href="#AlchemicalPipeline.rubedo-463"><span class="linenos">463</span></a>                    <span class="s1">&#39;albedo&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_duration</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.rubedo-464"><a href="#AlchemicalPipeline.rubedo-464"><span class="linenos">464</span></a>                    <span class="s1">&#39;rubedo&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_duration</span>
</span><span id="AlchemicalPipeline.rubedo-465"><a href="#AlchemicalPipeline.rubedo-465"><span class="linenos">465</span></a>                <span class="p">}</span>
</span><span id="AlchemicalPipeline.rubedo-466"><a href="#AlchemicalPipeline.rubedo-466"><span class="linenos">466</span></a>            <span class="p">})</span>
</span><span id="AlchemicalPipeline.rubedo-467"><a href="#AlchemicalPipeline.rubedo-467"><span class="linenos">467</span></a>        
</span><span id="AlchemicalPipeline.rubedo-468"><a href="#AlchemicalPipeline.rubedo-468"><span class="linenos">468</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>RUBEDO - Fase de IluminaciÃ³n ð´</p>

<p>"La Piedra Filosofal transforma el plomo en oro."</p>

<p>Ejecuta la inferencia final usando el ESN entrenado.
Esta es la transformaciÃ³n final de datos puros en conocimiento.</p>

<p>Args:
    data: Datos purificados (usa albedo_result si None)
    esn: EchoStateNetwork entrenado para inferencia
    prediction_horizon: CuÃ¡ntos pasos predecir</p>

<p>Returns:
    Diccionario con:
    - 'gold': La predicciÃ³n/inferencia (La Piedra Filosofal)
    - 'confidence': Nivel de confianza
    - 'transmutation_complete': bool</p>
</div>


                            </div>
                            <div id="AlchemicalPipeline.transmute" class="classattr">
                                        <input id="AlchemicalPipeline.transmute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">transmute</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">raw_data</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>,</span><span class="param">	<span class="n">esn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="AlchemicalPipeline.transmute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.transmute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.transmute-470"><a href="#AlchemicalPipeline.transmute-470"><span class="linenos">470</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">transmute</span><span class="p">(</span>
</span><span id="AlchemicalPipeline.transmute-471"><a href="#AlchemicalPipeline.transmute-471"><span class="linenos">471</span></a>        <span class="bp">self</span><span class="p">,</span> 
</span><span id="AlchemicalPipeline.transmute-472"><a href="#AlchemicalPipeline.transmute-472"><span class="linenos">472</span></a>        <span class="n">raw_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> 
</span><span id="AlchemicalPipeline.transmute-473"><a href="#AlchemicalPipeline.transmute-473"><span class="linenos">473</span></a>        <span class="n">esn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline.transmute-474"><a href="#AlchemicalPipeline.transmute-474"><span class="linenos">474</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="AlchemicalPipeline.transmute-475"><a href="#AlchemicalPipeline.transmute-475"><span class="linenos">475</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.transmute-476"><a href="#AlchemicalPipeline.transmute-476"><span class="linenos">476</span></a><span class="sd">        Ejecuta la transmutaciÃ³n completa en un solo paso.</span>
</span><span id="AlchemicalPipeline.transmute-477"><a href="#AlchemicalPipeline.transmute-477"><span class="linenos">477</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.transmute-478"><a href="#AlchemicalPipeline.transmute-478"><span class="linenos">478</span></a><span class="sd">        MATERIA PRIMA â NIGREDO â ALBEDO â RUBEDO â OPUS COMPLETE</span>
</span><span id="AlchemicalPipeline.transmute-479"><a href="#AlchemicalPipeline.transmute-479"><span class="linenos">479</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.transmute-480"><a href="#AlchemicalPipeline.transmute-480"><span class="linenos">480</span></a><span class="sd">        Args:</span>
</span><span id="AlchemicalPipeline.transmute-481"><a href="#AlchemicalPipeline.transmute-481"><span class="linenos">481</span></a><span class="sd">            raw_data: Datos crudos del sensor</span>
</span><span id="AlchemicalPipeline.transmute-482"><a href="#AlchemicalPipeline.transmute-482"><span class="linenos">482</span></a><span class="sd">            esn: EchoStateNetwork para inferencia</span>
</span><span id="AlchemicalPipeline.transmute-483"><a href="#AlchemicalPipeline.transmute-483"><span class="linenos">483</span></a><span class="sd">            </span>
</span><span id="AlchemicalPipeline.transmute-484"><a href="#AlchemicalPipeline.transmute-484"><span class="linenos">484</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline.transmute-485"><a href="#AlchemicalPipeline.transmute-485"><span class="linenos">485</span></a><span class="sd">            Resultado de la transmutaciÃ³n con el &quot;oro&quot; (predicciÃ³n)</span>
</span><span id="AlchemicalPipeline.transmute-486"><a href="#AlchemicalPipeline.transmute-486"><span class="linenos">486</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.transmute-487"><a href="#AlchemicalPipeline.transmute-487"><span class="linenos">487</span></a>        <span class="c1"># Opus Magnum</span>
</span><span id="AlchemicalPipeline.transmute-488"><a href="#AlchemicalPipeline.transmute-488"><span class="linenos">488</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nigredo</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.transmute-489"><a href="#AlchemicalPipeline.transmute-489"><span class="linenos">489</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">albedo</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.transmute-490"><a href="#AlchemicalPipeline.transmute-490"><span class="linenos">490</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubedo</span><span class="p">(</span><span class="n">esn</span><span class="o">=</span><span class="n">esn</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.transmute-491"><a href="#AlchemicalPipeline.transmute-491"><span class="linenos">491</span></a>        
</span><span id="AlchemicalPipeline.transmute-492"><a href="#AlchemicalPipeline.transmute-492"><span class="linenos">492</span></a>        <span class="c1"># Agregar informaciÃ³n de las fases anteriores</span>
</span><span id="AlchemicalPipeline.transmute-493"><a href="#AlchemicalPipeline.transmute-493"><span class="linenos">493</span></a>        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;phases&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.transmute-494"><a href="#AlchemicalPipeline.transmute-494"><span class="linenos">494</span></a>            <span class="s1">&#39;nigredo&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.transmute-495"><a href="#AlchemicalPipeline.transmute-495"><span class="linenos">495</span></a>                <span class="s1">&#39;samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.transmute-496"><a href="#AlchemicalPipeline.transmute-496"><span class="linenos">496</span></a>                <span class="s1">&#39;duration_ms&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_duration</span> <span class="o">*</span> <span class="mi">1000</span>
</span><span id="AlchemicalPipeline.transmute-497"><a href="#AlchemicalPipeline.transmute-497"><span class="linenos">497</span></a>            <span class="p">},</span>
</span><span id="AlchemicalPipeline.transmute-498"><a href="#AlchemicalPipeline.transmute-498"><span class="linenos">498</span></a>            <span class="s1">&#39;albedo&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.transmute-499"><a href="#AlchemicalPipeline.transmute-499"><span class="linenos">499</span></a>                <span class="s1">&#39;samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_samples</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.transmute-500"><a href="#AlchemicalPipeline.transmute-500"><span class="linenos">500</span></a>                <span class="s1">&#39;noise_removed_percent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.transmute-501"><a href="#AlchemicalPipeline.transmute-501"><span class="linenos">501</span></a>                <span class="s1">&#39;duration_ms&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">albedo_duration</span> <span class="o">*</span> <span class="mi">1000</span>
</span><span id="AlchemicalPipeline.transmute-502"><a href="#AlchemicalPipeline.transmute-502"><span class="linenos">502</span></a>            <span class="p">},</span>
</span><span id="AlchemicalPipeline.transmute-503"><a href="#AlchemicalPipeline.transmute-503"><span class="linenos">503</span></a>            <span class="s1">&#39;rubedo&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.transmute-504"><a href="#AlchemicalPipeline.transmute-504"><span class="linenos">504</span></a>                <span class="s1">&#39;predictions&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_predictions</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.transmute-505"><a href="#AlchemicalPipeline.transmute-505"><span class="linenos">505</span></a>                <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">prediction_confidence</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.transmute-506"><a href="#AlchemicalPipeline.transmute-506"><span class="linenos">506</span></a>                <span class="s1">&#39;duration_ms&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">rubedo_duration</span> <span class="o">*</span> <span class="mi">1000</span>
</span><span id="AlchemicalPipeline.transmute-507"><a href="#AlchemicalPipeline.transmute-507"><span class="linenos">507</span></a>            <span class="p">}</span>
</span><span id="AlchemicalPipeline.transmute-508"><a href="#AlchemicalPipeline.transmute-508"><span class="linenos">508</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline.transmute-509"><a href="#AlchemicalPipeline.transmute-509"><span class="linenos">509</span></a>        
</span><span id="AlchemicalPipeline.transmute-510"><a href="#AlchemicalPipeline.transmute-510"><span class="linenos">510</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Ejecuta la transmutaciÃ³n completa en un solo paso.</p>

<p>MATERIA PRIMA â NIGREDO â ALBEDO â RUBEDO â OPUS COMPLETE</p>

<p>Args:
    raw_data: Datos crudos del sensor
    esn: EchoStateNetwork para inferencia</p>

<p>Returns:
    Resultado de la transmutaciÃ³n con el "oro" (predicciÃ³n)</p>
</div>


                            </div>
                            <div id="AlchemicalPipeline.get_visualization_state" class="classattr">
                                        <input id="AlchemicalPipeline.get_visualization_state-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_visualization_state</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Dict</span>:</span></span>

                <label class="view-source-button" for="AlchemicalPipeline.get_visualization_state-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.get_visualization_state"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.get_visualization_state-512"><a href="#AlchemicalPipeline.get_visualization_state-512"><span class="linenos">512</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_visualization_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.get_visualization_state-513"><a href="#AlchemicalPipeline.get_visualization_state-513"><span class="linenos">513</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.get_visualization_state-514"><a href="#AlchemicalPipeline.get_visualization_state-514"><span class="linenos">514</span></a><span class="sd">        Obtiene estado formateado para visualizaciÃ³n en dashboard.</span>
</span><span id="AlchemicalPipeline.get_visualization_state-515"><a href="#AlchemicalPipeline.get_visualization_state-515"><span class="linenos">515</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.get_visualization_state-516"><a href="#AlchemicalPipeline.get_visualization_state-516"><span class="linenos">516</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline.get_visualization_state-517"><a href="#AlchemicalPipeline.get_visualization_state-517"><span class="linenos">517</span></a><span class="sd">            Diccionario con informaciÃ³n de visualizaciÃ³n</span>
</span><span id="AlchemicalPipeline.get_visualization_state-518"><a href="#AlchemicalPipeline.get_visualization_state-518"><span class="linenos">518</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.get_visualization_state-519"><a href="#AlchemicalPipeline.get_visualization_state-519"><span class="linenos">519</span></a>        <span class="n">phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_phase</span>
</span><span id="AlchemicalPipeline.get_visualization_state-520"><a href="#AlchemicalPipeline.get_visualization_state-520"><span class="linenos">520</span></a>        
</span><span id="AlchemicalPipeline.get_visualization_state-521"><a href="#AlchemicalPipeline.get_visualization_state-521"><span class="linenos">521</span></a>        <span class="c1"># SÃ­mbolos y colores por fase</span>
</span><span id="AlchemicalPipeline.get_visualization_state-522"><a href="#AlchemicalPipeline.get_visualization_state-522"><span class="linenos">522</span></a>        <span class="n">phase_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.get_visualization_state-523"><a href="#AlchemicalPipeline.get_visualization_state-523"><span class="linenos">523</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ðª¨&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#666666&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Materia Prima&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline.get_visualization_state-524"><a href="#AlchemicalPipeline.get_visualization_state-524"><span class="linenos">524</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;â«&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#1a1a1a&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Nigredo&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline.get_visualization_state-525"><a href="#AlchemicalPipeline.get_visualization_state-525"><span class="linenos">525</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;âª&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#f0f0f0&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Albedo&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline.get_visualization_state-526"><a href="#AlchemicalPipeline.get_visualization_state-526"><span class="linenos">526</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">CITRINITAS</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ð¡&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffd700&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Citrinitas&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline.get_visualization_state-527"><a href="#AlchemicalPipeline.get_visualization_state-527"><span class="linenos">527</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;ð´&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#dc143c&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Rubedo&#39;</span><span class="p">},</span>
</span><span id="AlchemicalPipeline.get_visualization_state-528"><a href="#AlchemicalPipeline.get_visualization_state-528"><span class="linenos">528</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;â¨&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffd700&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Opus Complete&#39;</span><span class="p">}</span>
</span><span id="AlchemicalPipeline.get_visualization_state-529"><a href="#AlchemicalPipeline.get_visualization_state-529"><span class="linenos">529</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline.get_visualization_state-530"><a href="#AlchemicalPipeline.get_visualization_state-530"><span class="linenos">530</span></a>        
</span><span id="AlchemicalPipeline.get_visualization_state-531"><a href="#AlchemicalPipeline.get_visualization_state-531"><span class="linenos">531</span></a>        <span class="n">info</span> <span class="o">=</span> <span class="n">phase_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="n">phase_info</span><span class="p">[</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">])</span>
</span><span id="AlchemicalPipeline.get_visualization_state-532"><a href="#AlchemicalPipeline.get_visualization_state-532"><span class="linenos">532</span></a>        
</span><span id="AlchemicalPipeline.get_visualization_state-533"><a href="#AlchemicalPipeline.get_visualization_state-533"><span class="linenos">533</span></a>        <span class="c1"># Progreso basado en fase</span>
</span><span id="AlchemicalPipeline.get_visualization_state-534"><a href="#AlchemicalPipeline.get_visualization_state-534"><span class="linenos">534</span></a>        <span class="n">progress_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.get_visualization_state-535"><a href="#AlchemicalPipeline.get_visualization_state-535"><span class="linenos">535</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.get_visualization_state-536"><a href="#AlchemicalPipeline.get_visualization_state-536"><span class="linenos">536</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.get_visualization_state-537"><a href="#AlchemicalPipeline.get_visualization_state-537"><span class="linenos">537</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.get_visualization_state-538"><a href="#AlchemicalPipeline.get_visualization_state-538"><span class="linenos">538</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">CITRINITAS</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.get_visualization_state-539"><a href="#AlchemicalPipeline.get_visualization_state-539"><span class="linenos">539</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.get_visualization_state-540"><a href="#AlchemicalPipeline.get_visualization_state-540"><span class="linenos">540</span></a>            <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">:</span> <span class="mi">100</span>
</span><span id="AlchemicalPipeline.get_visualization_state-541"><a href="#AlchemicalPipeline.get_visualization_state-541"><span class="linenos">541</span></a>        <span class="p">}</span>
</span><span id="AlchemicalPipeline.get_visualization_state-542"><a href="#AlchemicalPipeline.get_visualization_state-542"><span class="linenos">542</span></a>        
</span><span id="AlchemicalPipeline.get_visualization_state-543"><a href="#AlchemicalPipeline.get_visualization_state-543"><span class="linenos">543</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AlchemicalPipeline.get_visualization_state-544"><a href="#AlchemicalPipeline.get_visualization_state-544"><span class="linenos">544</span></a>            <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="n">phase</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AlchemicalPipeline.get_visualization_state-545"><a href="#AlchemicalPipeline.get_visualization_state-545"><span class="linenos">545</span></a>            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline.get_visualization_state-546"><a href="#AlchemicalPipeline.get_visualization_state-546"><span class="linenos">546</span></a>            <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline.get_visualization_state-547"><a href="#AlchemicalPipeline.get_visualization_state-547"><span class="linenos">547</span></a>            <span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="AlchemicalPipeline.get_visualization_state-548"><a href="#AlchemicalPipeline.get_visualization_state-548"><span class="linenos">548</span></a>            <span class="s1">&#39;progress&#39;</span><span class="p">:</span> <span class="n">progress_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="AlchemicalPipeline.get_visualization_state-549"><a href="#AlchemicalPipeline.get_visualization_state-549"><span class="linenos">549</span></a>            <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
</span><span id="AlchemicalPipeline.get_visualization_state-550"><a href="#AlchemicalPipeline.get_visualization_state-550"><span class="linenos">550</span></a>            <span class="s1">&#39;is_complete&#39;</span><span class="p">:</span> <span class="n">phase</span> <span class="o">==</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span>
</span><span id="AlchemicalPipeline.get_visualization_state-551"><a href="#AlchemicalPipeline.get_visualization_state-551"><span class="linenos">551</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Obtiene estado formateado para visualizaciÃ³n en dashboard.</p>

<p>Returns:
    Diccionario con informaciÃ³n de visualizaciÃ³n</p>
</div>


                            </div>
                            <div id="AlchemicalPipeline.visualize_ascii" class="classattr">
                                        <input id="AlchemicalPipeline.visualize_ascii-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">visualize_ascii</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="AlchemicalPipeline.visualize_ascii-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.visualize_ascii"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.visualize_ascii-553"><a href="#AlchemicalPipeline.visualize_ascii-553"><span class="linenos">553</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">visualize_ascii</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.visualize_ascii-554"><a href="#AlchemicalPipeline.visualize_ascii-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.visualize_ascii-555"><a href="#AlchemicalPipeline.visualize_ascii-555"><span class="linenos">555</span></a><span class="sd">        Genera visualizaciÃ³n ASCII del estado actual.</span>
</span><span id="AlchemicalPipeline.visualize_ascii-556"><a href="#AlchemicalPipeline.visualize_ascii-556"><span class="linenos">556</span></a><span class="sd">        </span>
</span><span id="AlchemicalPipeline.visualize_ascii-557"><a href="#AlchemicalPipeline.visualize_ascii-557"><span class="linenos">557</span></a><span class="sd">        Returns:</span>
</span><span id="AlchemicalPipeline.visualize_ascii-558"><a href="#AlchemicalPipeline.visualize_ascii-558"><span class="linenos">558</span></a><span class="sd">            String con arte ASCII del estado</span>
</span><span id="AlchemicalPipeline.visualize_ascii-559"><a href="#AlchemicalPipeline.visualize_ascii-559"><span class="linenos">559</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.visualize_ascii-560"><a href="#AlchemicalPipeline.visualize_ascii-560"><span class="linenos">560</span></a>        <span class="n">phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_phase</span>
</span><span id="AlchemicalPipeline.visualize_ascii-561"><a href="#AlchemicalPipeline.visualize_ascii-561"><span class="linenos">561</span></a>        <span class="n">progress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visualization_state</span><span class="p">()[</span><span class="s1">&#39;progress&#39;</span><span class="p">]</span>
</span><span id="AlchemicalPipeline.visualize_ascii-562"><a href="#AlchemicalPipeline.visualize_ascii-562"><span class="linenos">562</span></a>        
</span><span id="AlchemicalPipeline.visualize_ascii-563"><a href="#AlchemicalPipeline.visualize_ascii-563"><span class="linenos">563</span></a>        <span class="c1"># Barra de progreso</span>
</span><span id="AlchemicalPipeline.visualize_ascii-564"><a href="#AlchemicalPipeline.visualize_ascii-564"><span class="linenos">564</span></a>        <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">40</span>
</span><span id="AlchemicalPipeline.visualize_ascii-565"><a href="#AlchemicalPipeline.visualize_ascii-565"><span class="linenos">565</span></a>        <span class="n">filled</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">progress</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">bar_width</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.visualize_ascii-566"><a href="#AlchemicalPipeline.visualize_ascii-566"><span class="linenos">566</span></a>        <span class="n">bar</span> <span class="o">=</span> <span class="s1">&#39;â&#39;</span> <span class="o">*</span> <span class="n">filled</span> <span class="o">+</span> <span class="s1">&#39;â&#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">bar_width</span> <span class="o">-</span> <span class="n">filled</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.visualize_ascii-567"><a href="#AlchemicalPipeline.visualize_ascii-567"><span class="linenos">567</span></a>        
</span><span id="AlchemicalPipeline.visualize_ascii-568"><a href="#AlchemicalPipeline.visualize_ascii-568"><span class="linenos">568</span></a>        <span class="c1"># Indicadores de fase</span>
</span><span id="AlchemicalPipeline.visualize_ascii-569"><a href="#AlchemicalPipeline.visualize_ascii-569"><span class="linenos">569</span></a>        <span class="n">phases</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AlchemicalPipeline.visualize_ascii-570"><a href="#AlchemicalPipeline.visualize_ascii-570"><span class="linenos">570</span></a>            <span class="p">(</span><span class="s1">&#39;â«&#39;</span><span class="p">,</span> <span class="s1">&#39;NIGREDO&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">NIGREDO</span><span class="p">),</span>
</span><span id="AlchemicalPipeline.visualize_ascii-571"><a href="#AlchemicalPipeline.visualize_ascii-571"><span class="linenos">571</span></a>            <span class="p">(</span><span class="s1">&#39;âª&#39;</span><span class="p">,</span> <span class="s1">&#39;ALBEDO&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">ALBEDO</span><span class="p">),</span>
</span><span id="AlchemicalPipeline.visualize_ascii-572"><a href="#AlchemicalPipeline.visualize_ascii-572"><span class="linenos">572</span></a>            <span class="p">(</span><span class="s1">&#39;ð´&#39;</span><span class="p">,</span> <span class="s1">&#39;RUBEDO&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">RUBEDO</span><span class="p">),</span>
</span><span id="AlchemicalPipeline.visualize_ascii-573"><a href="#AlchemicalPipeline.visualize_ascii-573"><span class="linenos">573</span></a>            <span class="p">(</span><span class="s1">&#39;â¨&#39;</span><span class="p">,</span> <span class="s1">&#39;OPUS&#39;</span><span class="p">,</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">OPUS_COMPLETE</span><span class="p">)</span>
</span><span id="AlchemicalPipeline.visualize_ascii-574"><a href="#AlchemicalPipeline.visualize_ascii-574"><span class="linenos">574</span></a>        <span class="p">]</span>
</span><span id="AlchemicalPipeline.visualize_ascii-575"><a href="#AlchemicalPipeline.visualize_ascii-575"><span class="linenos">575</span></a>        
</span><span id="AlchemicalPipeline.visualize_ascii-576"><a href="#AlchemicalPipeline.visualize_ascii-576"><span class="linenos">576</span></a>        <span class="n">phase_line</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span>
</span><span id="AlchemicalPipeline.visualize_ascii-577"><a href="#AlchemicalPipeline.visualize_ascii-577"><span class="linenos">577</span></a>        <span class="k">for</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.visualize_ascii-578"><a href="#AlchemicalPipeline.visualize_ascii-578"><span class="linenos">578</span></a>            <span class="k">if</span> <span class="n">phase</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.visualize_ascii-579"><a href="#AlchemicalPipeline.visualize_ascii-579"><span class="linenos">579</span></a>                <span class="n">phase_line</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">]âââ&quot;</span>
</span><span id="AlchemicalPipeline.visualize_ascii-580"><a href="#AlchemicalPipeline.visualize_ascii-580"><span class="linenos">580</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AlchemicalPipeline.visualize_ascii-581"><a href="#AlchemicalPipeline.visualize_ascii-581"><span class="linenos">581</span></a>                <span class="n">phase_line</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> âââ&quot;</span>
</span><span id="AlchemicalPipeline.visualize_ascii-582"><a href="#AlchemicalPipeline.visualize_ascii-582"><span class="linenos">582</span></a>        
</span><span id="AlchemicalPipeline.visualize_ascii-583"><a href="#AlchemicalPipeline.visualize_ascii-583"><span class="linenos">583</span></a>        <span class="n">viz</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.visualize_ascii-584"><a href="#AlchemicalPipeline.visualize_ascii-584"><span class="linenos">584</span></a><span class="s2">ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ</span>
</span><span id="AlchemicalPipeline.visualize_ascii-585"><a href="#AlchemicalPipeline.visualize_ascii-585"><span class="linenos">585</span></a><span class="s2">â            âï¸  TRANSMUTACIÃN ALQUÃMICA  âï¸              â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-586"><a href="#AlchemicalPipeline.visualize_ascii-586"><span class="linenos">586</span></a><span class="s2">â âââââââââââââââââââââââââââââââââââââââââââââââââââââââââ£</span>
</span><span id="AlchemicalPipeline.visualize_ascii-587"><a href="#AlchemicalPipeline.visualize_ascii-587"><span class="linenos">587</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-588"><a href="#AlchemicalPipeline.visualize_ascii-588"><span class="linenos">588</span></a><span class="s2">â  </span><span class="si">{</span><span class="n">phase_line</span><span class="si">}</span><span class="s2">                                          â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-589"><a href="#AlchemicalPipeline.visualize_ascii-589"><span class="linenos">589</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-590"><a href="#AlchemicalPipeline.visualize_ascii-590"><span class="linenos">590</span></a><span class="s2">â  Progreso: [</span><span class="si">{</span><span class="n">bar</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">progress</span><span class="si">}</span><span class="s2">%                         â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-591"><a href="#AlchemicalPipeline.visualize_ascii-591"><span class="linenos">591</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-592"><a href="#AlchemicalPipeline.visualize_ascii-592"><span class="linenos">592</span></a><span class="s2">â  Fase Actual: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_visualization_state</span><span class="p">()[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">20s</span><span class="si">}</span><span class="s2">   â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-593"><a href="#AlchemicalPipeline.visualize_ascii-593"><span class="linenos">593</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-594"><a href="#AlchemicalPipeline.visualize_ascii-594"><span class="linenos">594</span></a><span class="s2">â  ð MÃ©tricas:                                          â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-595"><a href="#AlchemicalPipeline.visualize_ascii-595"><span class="linenos">595</span></a><span class="s2">â     â¢ Muestras ingresadas: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">                    â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-596"><a href="#AlchemicalPipeline.visualize_ascii-596"><span class="linenos">596</span></a><span class="s2">â     â¢ Ruido eliminado: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%                      â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-597"><a href="#AlchemicalPipeline.visualize_ascii-597"><span class="linenos">597</span></a><span class="s2">â     â¢ Confianza: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">prediction_confidence</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">                          â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-598"><a href="#AlchemicalPipeline.visualize_ascii-598"><span class="linenos">598</span></a><span class="s2">â     â¢ Transmutaciones: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">transmutation_count</span><span class="si">}</span><span class="s2">                         â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-599"><a href="#AlchemicalPipeline.visualize_ascii-599"><span class="linenos">599</span></a><span class="s2">â                                                        â</span>
</span><span id="AlchemicalPipeline.visualize_ascii-600"><a href="#AlchemicalPipeline.visualize_ascii-600"><span class="linenos">600</span></a><span class="s2">ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ</span>
</span><span id="AlchemicalPipeline.visualize_ascii-601"><a href="#AlchemicalPipeline.visualize_ascii-601"><span class="linenos">601</span></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.visualize_ascii-602"><a href="#AlchemicalPipeline.visualize_ascii-602"><span class="linenos">602</span></a>        <span class="k">return</span> <span class="n">viz</span>
</span></pre></div>


            <div class="docstring"><p>Genera visualizaciÃ³n ASCII del estado actual.</p>

<p>Returns:
    String con arte ASCII del estado</p>
</div>


                            </div>
                            <div id="AlchemicalPipeline.reset" class="classattr">
                                        <input id="AlchemicalPipeline.reset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AlchemicalPipeline.reset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPipeline.reset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPipeline.reset-604"><a href="#AlchemicalPipeline.reset-604"><span class="linenos">604</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AlchemicalPipeline.reset-605"><a href="#AlchemicalPipeline.reset-605"><span class="linenos">605</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reinicia el pipeline para nueva transmutaciÃ³n.&quot;&quot;&quot;</span>
</span><span id="AlchemicalPipeline.reset-606"><a href="#AlchemicalPipeline.reset-606"><span class="linenos">606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">TransmutationState</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.reset-607"><a href="#AlchemicalPipeline.reset-607"><span class="linenos">607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kalman</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="AlchemicalPipeline.reset-608"><a href="#AlchemicalPipeline.reset-608"><span class="linenos">608</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_materia_prima</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline.reset-609"><a href="#AlchemicalPipeline.reset-609"><span class="linenos">609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_albedo_result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline.reset-610"><a href="#AlchemicalPipeline.reset-610"><span class="linenos">610</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rubedo_result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AlchemicalPipeline.reset-611"><a href="#AlchemicalPipeline.reset-611"><span class="linenos">611</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_phase</span><span class="p">(</span><span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Reinicia el pipeline para nueva transmutaciÃ³n.</p>
</div>


                            </div>
                </section>
                <section id="AlchemicalConfig">
                            <input id="AlchemicalConfig-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">AlchemicalConfig</span>:

                <label class="view-source-button" for="AlchemicalConfig-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalConfig"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalConfig-107"><a href="#AlchemicalConfig-107"><span class="linenos">107</span></a><span class="nd">@dataclass</span>
</span><span id="AlchemicalConfig-108"><a href="#AlchemicalConfig-108"><span class="linenos">108</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AlchemicalConfig</span><span class="p">:</span>
</span><span id="AlchemicalConfig-109"><a href="#AlchemicalConfig-109"><span class="linenos">109</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalConfig-110"><a href="#AlchemicalConfig-110"><span class="linenos">110</span></a><span class="sd">    ConfiguraciÃ³n del pipeline alquÃ­mico.</span>
</span><span id="AlchemicalConfig-111"><a href="#AlchemicalConfig-111"><span class="linenos">111</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AlchemicalConfig-112"><a href="#AlchemicalConfig-112"><span class="linenos">112</span></a>    <span class="c1"># Filtro Kalman (Albedo)</span>
</span><span id="AlchemicalConfig-113"><a href="#AlchemicalConfig-113"><span class="linenos">113</span></a>    <span class="n">kalman_process_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span>
</span><span id="AlchemicalConfig-114"><a href="#AlchemicalConfig-114"><span class="linenos">114</span></a>    <span class="n">kalman_measurement_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="AlchemicalConfig-115"><a href="#AlchemicalConfig-115"><span class="linenos">115</span></a>    
</span><span id="AlchemicalConfig-116"><a href="#AlchemicalConfig-116"><span class="linenos">116</span></a>    <span class="c1"># Limpieza de datos</span>
</span><span id="AlchemicalConfig-117"><a href="#AlchemicalConfig-117"><span class="linenos">117</span></a>    <span class="n">remove_outliers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AlchemicalConfig-118"><a href="#AlchemicalConfig-118"><span class="linenos">118</span></a>    <span class="n">outlier_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span>  <span class="c1"># Desviaciones estÃ¡ndar</span>
</span><span id="AlchemicalConfig-119"><a href="#AlchemicalConfig-119"><span class="linenos">119</span></a>    
</span><span id="AlchemicalConfig-120"><a href="#AlchemicalConfig-120"><span class="linenos">120</span></a>    <span class="c1"># Suavizado</span>
</span><span id="AlchemicalConfig-121"><a href="#AlchemicalConfig-121"><span class="linenos">121</span></a>    <span class="n">use_moving_average</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AlchemicalConfig-122"><a href="#AlchemicalConfig-122"><span class="linenos">122</span></a>    <span class="n">window_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="AlchemicalConfig-123"><a href="#AlchemicalConfig-123"><span class="linenos">123</span></a>    
</span><span id="AlchemicalConfig-124"><a href="#AlchemicalConfig-124"><span class="linenos">124</span></a>    <span class="c1"># NormalizaciÃ³n</span>
</span><span id="AlchemicalConfig-125"><a href="#AlchemicalConfig-125"><span class="linenos">125</span></a>    <span class="n">normalize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AlchemicalConfig-126"><a href="#AlchemicalConfig-126"><span class="linenos">126</span></a>    
</span><span id="AlchemicalConfig-127"><a href="#AlchemicalConfig-127"><span class="linenos">127</span></a>    <span class="c1"># Callbacks de fase</span>
</span><span id="AlchemicalConfig-128"><a href="#AlchemicalConfig-128"><span class="linenos">128</span></a>    <span class="n">on_phase_change</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">AlchemicalPhase</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>ConfiguraciÃ³n del pipeline alquÃ­mico.</p>
</div>


                            <div id="AlchemicalConfig.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">AlchemicalConfig</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">kalman_process_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span>,</span><span class="param">	<span class="n">kalman_measurement_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span>,</span><span class="param">	<span class="n">remove_outliers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">outlier_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span>,</span><span class="param">	<span class="n">use_moving_average</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">window_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>,</span><span class="param">	<span class="n">normalize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">on_phase_change</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n"><a href="#AlchemicalPhase">AlchemicalPhase</a></span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.__init__"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.kalman_process_noise" class="classattr">
                                <div class="attr variable">
            <span class="name">kalman_process_noise</span><span class="annotation">: float</span>        =
<span class="default_value">0.01</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.kalman_process_noise"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.kalman_measurement_noise" class="classattr">
                                <div class="attr variable">
            <span class="name">kalman_measurement_noise</span><span class="annotation">: float</span>        =
<span class="default_value">0.1</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.kalman_measurement_noise"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.remove_outliers" class="classattr">
                                <div class="attr variable">
            <span class="name">remove_outliers</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.remove_outliers"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.outlier_threshold" class="classattr">
                                <div class="attr variable">
            <span class="name">outlier_threshold</span><span class="annotation">: float</span>        =
<span class="default_value">3.0</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.outlier_threshold"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.use_moving_average" class="classattr">
                                <div class="attr variable">
            <span class="name">use_moving_average</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.use_moving_average"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.window_size" class="classattr">
                                <div class="attr variable">
            <span class="name">window_size</span><span class="annotation">: int</span>        =
<span class="default_value">5</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.window_size"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.normalize" class="classattr">
                                <div class="attr variable">
            <span class="name">normalize</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.normalize"></a>
    
    

                            </div>
                            <div id="AlchemicalConfig.on_phase_change" class="classattr">
                                <div class="attr variable">
            <span class="name">on_phase_change</span><span class="annotation">: Optional[Callable[[<a href="#AlchemicalPhase">AlchemicalPhase</a>], NoneType]]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalConfig.on_phase_change"></a>
    
    

                            </div>
                </section>
                <section id="AlchemicalPhase">
                            <input id="AlchemicalPhase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AlchemicalPhase</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="AlchemicalPhase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlchemicalPhase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlchemicalPhase-48"><a href="#AlchemicalPhase-48"><span class="linenos">48</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AlchemicalPhase</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="AlchemicalPhase-49"><a href="#AlchemicalPhase-49"><span class="linenos">49</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AlchemicalPhase-50"><a href="#AlchemicalPhase-50"><span class="linenos">50</span></a><span class="sd">    Fases de la Gran Obra AlquÃ­mica.</span>
</span><span id="AlchemicalPhase-51"><a href="#AlchemicalPhase-51"><span class="linenos">51</span></a><span class="sd">    </span>
</span><span id="AlchemicalPhase-52"><a href="#AlchemicalPhase-52"><span class="linenos">52</span></a><span class="sd">    Cada fase representa un nivel de purificaciÃ³n de los datos.</span>
</span><span id="AlchemicalPhase-53"><a href="#AlchemicalPhase-53"><span class="linenos">53</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AlchemicalPhase-54"><a href="#AlchemicalPhase-54"><span class="linenos">54</span></a>    <span class="n">MATERIA_PRIMA</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1"># Estado inicial, sin procesar</span>
</span><span id="AlchemicalPhase-55"><a href="#AlchemicalPhase-55"><span class="linenos">55</span></a>    <span class="n">NIGREDO</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>         <span class="c1"># PutrefacciÃ³n: Datos crudos ingresados</span>
</span><span id="AlchemicalPhase-56"><a href="#AlchemicalPhase-56"><span class="linenos">56</span></a>    <span class="n">ALBEDO</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>          <span class="c1"># PurificaciÃ³n: Datos filtrados/limpios</span>
</span><span id="AlchemicalPhase-57"><a href="#AlchemicalPhase-57"><span class="linenos">57</span></a>    <span class="n">CITRINITAS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>      <span class="c1"># Amarilleamiento: PreparaciÃ³n pre-inferencia (opcional)</span>
</span><span id="AlchemicalPhase-58"><a href="#AlchemicalPhase-58"><span class="linenos">58</span></a>    <span class="n">RUBEDO</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>          <span class="c1"># IluminaciÃ³n: Inferencia completada</span>
</span><span id="AlchemicalPhase-59"><a href="#AlchemicalPhase-59"><span class="linenos">59</span></a>    <span class="n">OPUS_COMPLETE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>   <span class="c1"># Piedra Filosofal: Resultado final listo</span>
</span></pre></div>


            <div class="docstring"><p>Fases de la Gran Obra AlquÃ­mica.</p>

<p>Cada fase representa un nivel de purificaciÃ³n de los datos.</p>
</div>


                            <div id="AlchemicalPhase.MATERIA_PRIMA" class="classattr">
                                <div class="attr variable">
            <span class="name">MATERIA_PRIMA</span>        =
<span class="default_value">&lt;<a href="#AlchemicalPhase.MATERIA_PRIMA">AlchemicalPhase.MATERIA_PRIMA</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPhase.MATERIA_PRIMA"></a>
    
    

                            </div>
                            <div id="AlchemicalPhase.NIGREDO" class="classattr">
                                <div class="attr variable">
            <span class="name">NIGREDO</span>        =
<span class="default_value">&lt;<a href="#AlchemicalPhase.NIGREDO">AlchemicalPhase.NIGREDO</a>: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPhase.NIGREDO"></a>
    
    

                            </div>
                            <div id="AlchemicalPhase.ALBEDO" class="classattr">
                                <div class="attr variable">
            <span class="name">ALBEDO</span>        =
<span class="default_value">&lt;<a href="#AlchemicalPhase.ALBEDO">AlchemicalPhase.ALBEDO</a>: 3&gt;</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPhase.ALBEDO"></a>
    
    

                            </div>
                            <div id="AlchemicalPhase.CITRINITAS" class="classattr">
                                <div class="attr variable">
            <span class="name">CITRINITAS</span>        =
<span class="default_value">&lt;<a href="#AlchemicalPhase.CITRINITAS">AlchemicalPhase.CITRINITAS</a>: 4&gt;</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPhase.CITRINITAS"></a>
    
    

                            </div>
                            <div id="AlchemicalPhase.RUBEDO" class="classattr">
                                <div class="attr variable">
            <span class="name">RUBEDO</span>        =
<span class="default_value">&lt;<a href="#AlchemicalPhase.RUBEDO">AlchemicalPhase.RUBEDO</a>: 5&gt;</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPhase.RUBEDO"></a>
    
    

                            </div>
                            <div id="AlchemicalPhase.OPUS_COMPLETE" class="classattr">
                                <div class="attr variable">
            <span class="name">OPUS_COMPLETE</span>        =
<span class="default_value">&lt;<a href="#AlchemicalPhase.OPUS_COMPLETE">AlchemicalPhase.OPUS_COMPLETE</a>: 6&gt;</span>

        
    </div>
    <a class="headerlink" href="#AlchemicalPhase.OPUS_COMPLETE"></a>
    
    

                            </div>
                </section>
                <section id="TransmutationState">
                            <input id="TransmutationState-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TransmutationState</span>:

                <label class="view-source-button" for="TransmutationState-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TransmutationState"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TransmutationState-62"><a href="#TransmutationState-62"><span class="linenos"> 62</span></a><span class="nd">@dataclass</span>
</span><span id="TransmutationState-63"><a href="#TransmutationState-63"><span class="linenos"> 63</span></a><span class="k">class</span><span class="w"> </span><span class="nc">TransmutationState</span><span class="p">:</span>
</span><span id="TransmutationState-64"><a href="#TransmutationState-64"><span class="linenos"> 64</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TransmutationState-65"><a href="#TransmutationState-65"><span class="linenos"> 65</span></a><span class="sd">    Estado actual de la transmutaciÃ³n alquÃ­mica.</span>
</span><span id="TransmutationState-66"><a href="#TransmutationState-66"><span class="linenos"> 66</span></a><span class="sd">    </span>
</span><span id="TransmutationState-67"><a href="#TransmutationState-67"><span class="linenos"> 67</span></a><span class="sd">    Rastrea el progreso a travÃ©s de las fases del Opus Magnum.</span>
</span><span id="TransmutationState-68"><a href="#TransmutationState-68"><span class="linenos"> 68</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TransmutationState-69"><a href="#TransmutationState-69"><span class="linenos"> 69</span></a>    <span class="n">current_phase</span><span class="p">:</span> <span class="n">AlchemicalPhase</span> <span class="o">=</span> <span class="n">AlchemicalPhase</span><span class="o">.</span><span class="n">MATERIA_PRIMA</span>
</span><span id="TransmutationState-70"><a href="#TransmutationState-70"><span class="linenos"> 70</span></a>    
</span><span id="TransmutationState-71"><a href="#TransmutationState-71"><span class="linenos"> 71</span></a>    <span class="c1"># MÃ©tricas por fase</span>
</span><span id="TransmutationState-72"><a href="#TransmutationState-72"><span class="linenos"> 72</span></a>    <span class="n">nigredo_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>          <span class="c1"># Muestras crudas ingresadas</span>
</span><span id="TransmutationState-73"><a href="#TransmutationState-73"><span class="linenos"> 73</span></a>    <span class="n">albedo_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>           <span class="c1"># Muestras purificadas</span>
</span><span id="TransmutationState-74"><a href="#TransmutationState-74"><span class="linenos"> 74</span></a>    <span class="n">rubedo_predictions</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>       <span class="c1"># Predicciones generadas</span>
</span><span id="TransmutationState-75"><a href="#TransmutationState-75"><span class="linenos"> 75</span></a>    
</span><span id="TransmutationState-76"><a href="#TransmutationState-76"><span class="linenos"> 76</span></a>    <span class="c1"># Calidad de transmutaciÃ³n</span>
</span><span id="TransmutationState-77"><a href="#TransmutationState-77"><span class="linenos"> 77</span></a>    <span class="n">noise_removed_percent</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># Ruido eliminado en Albedo</span>
</span><span id="TransmutationState-78"><a href="#TransmutationState-78"><span class="linenos"> 78</span></a>    <span class="n">prediction_confidence</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>   <span class="c1"># Confianza del Rubedo</span>
</span><span id="TransmutationState-79"><a href="#TransmutationState-79"><span class="linenos"> 79</span></a>    
</span><span id="TransmutationState-80"><a href="#TransmutationState-80"><span class="linenos"> 80</span></a>    <span class="c1"># Tiempos</span>
</span><span id="TransmutationState-81"><a href="#TransmutationState-81"><span class="linenos"> 81</span></a>    <span class="n">phase_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
</span><span id="TransmutationState-82"><a href="#TransmutationState-82"><span class="linenos"> 82</span></a>    <span class="n">nigredo_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="TransmutationState-83"><a href="#TransmutationState-83"><span class="linenos"> 83</span></a>    <span class="n">albedo_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="TransmutationState-84"><a href="#TransmutationState-84"><span class="linenos"> 84</span></a>    <span class="n">rubedo_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="TransmutationState-85"><a href="#TransmutationState-85"><span class="linenos"> 85</span></a>    
</span><span id="TransmutationState-86"><a href="#TransmutationState-86"><span class="linenos"> 86</span></a>    <span class="c1"># Historial</span>
</span><span id="TransmutationState-87"><a href="#TransmutationState-87"><span class="linenos"> 87</span></a>    <span class="n">transmutation_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Ciclos completos</span>
</span><span id="TransmutationState-88"><a href="#TransmutationState-88"><span class="linenos"> 88</span></a>    
</span><span id="TransmutationState-89"><a href="#TransmutationState-89"><span class="linenos"> 89</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="TransmutationState-90"><a href="#TransmutationState-90"><span class="linenos"> 90</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Serializa estado a diccionario.&quot;&quot;&quot;</span>
</span><span id="TransmutationState-91"><a href="#TransmutationState-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="TransmutationState-92"><a href="#TransmutationState-92"><span class="linenos"> 92</span></a>            <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_phase</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="TransmutationState-93"><a href="#TransmutationState-93"><span class="linenos"> 93</span></a>            <span class="s1">&#39;nigredo_samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="p">,</span>
</span><span id="TransmutationState-94"><a href="#TransmutationState-94"><span class="linenos"> 94</span></a>            <span class="s1">&#39;albedo_samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">albedo_samples</span><span class="p">,</span>
</span><span id="TransmutationState-95"><a href="#TransmutationState-95"><span class="linenos"> 95</span></a>            <span class="s1">&#39;rubedo_predictions&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubedo_predictions</span><span class="p">,</span>
</span><span id="TransmutationState-96"><a href="#TransmutationState-96"><span class="linenos"> 96</span></a>            <span class="s1">&#39;noise_removed_percent&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="TransmutationState-97"><a href="#TransmutationState-97"><span class="linenos"> 97</span></a>            <span class="s1">&#39;prediction_confidence&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prediction_confidence</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="TransmutationState-98"><a href="#TransmutationState-98"><span class="linenos"> 98</span></a>            <span class="s1">&#39;transmutation_count&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">transmutation_count</span><span class="p">,</span>
</span><span id="TransmutationState-99"><a href="#TransmutationState-99"><span class="linenos"> 99</span></a>            <span class="s1">&#39;durations&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="TransmutationState-100"><a href="#TransmutationState-100"><span class="linenos">100</span></a>                <span class="s1">&#39;nigredo_ms&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nigredo_duration</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="TransmutationState-101"><a href="#TransmutationState-101"><span class="linenos">101</span></a>                <span class="s1">&#39;albedo_ms&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">albedo_duration</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="TransmutationState-102"><a href="#TransmutationState-102"><span class="linenos">102</span></a>                <span class="s1">&#39;rubedo_ms&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rubedo_duration</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="TransmutationState-103"><a href="#TransmutationState-103"><span class="linenos">103</span></a>            <span class="p">}</span>
</span><span id="TransmutationState-104"><a href="#TransmutationState-104"><span class="linenos">104</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Estado actual de la transmutaciÃ³n alquÃ­mica.</p>

<p>Rastrea el progreso a travÃ©s de las fases del Opus Magnum.</p>
</div>


                            <div id="TransmutationState.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TransmutationState</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">current_phase</span><span class="p">:</span> <span class="n"><a href="#AlchemicalPhase">AlchemicalPhase</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n"><a href="#AlchemicalPhase.MATERIA_PRIMA">AlchemicalPhase.MATERIA_PRIMA</a></span><span class="p">:</span> <span class="mi">1</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">nigredo_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">albedo_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">rubedo_predictions</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">noise_removed_percent</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>,</span><span class="param">	<span class="n">prediction_confidence</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>,</span><span class="param">	<span class="n">phase_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">nigredo_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>,</span><span class="param">	<span class="n">albedo_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>,</span><span class="param">	<span class="n">rubedo_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>,</span><span class="param">	<span class="n">transmutation_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.__init__"></a>
    
    

                            </div>
                            <div id="TransmutationState.current_phase" class="classattr">
                                <div class="attr variable">
            <span class="name">current_phase</span><span class="annotation">: <a href="#AlchemicalPhase">AlchemicalPhase</a></span>        =
<span class="default_value">&lt;<a href="#AlchemicalPhase.MATERIA_PRIMA">AlchemicalPhase.MATERIA_PRIMA</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.current_phase"></a>
    
    

                            </div>
                            <div id="TransmutationState.nigredo_samples" class="classattr">
                                <div class="attr variable">
            <span class="name">nigredo_samples</span><span class="annotation">: int</span>        =
<span class="default_value">0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.nigredo_samples"></a>
    
    

                            </div>
                            <div id="TransmutationState.albedo_samples" class="classattr">
                                <div class="attr variable">
            <span class="name">albedo_samples</span><span class="annotation">: int</span>        =
<span class="default_value">0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.albedo_samples"></a>
    
    

                            </div>
                            <div id="TransmutationState.rubedo_predictions" class="classattr">
                                <div class="attr variable">
            <span class="name">rubedo_predictions</span><span class="annotation">: int</span>        =
<span class="default_value">0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.rubedo_predictions"></a>
    
    

                            </div>
                            <div id="TransmutationState.noise_removed_percent" class="classattr">
                                <div class="attr variable">
            <span class="name">noise_removed_percent</span><span class="annotation">: float</span>        =
<span class="default_value">0.0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.noise_removed_percent"></a>
    
    

                            </div>
                            <div id="TransmutationState.prediction_confidence" class="classattr">
                                <div class="attr variable">
            <span class="name">prediction_confidence</span><span class="annotation">: float</span>        =
<span class="default_value">0.0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.prediction_confidence"></a>
    
    

                            </div>
                            <div id="TransmutationState.phase_start_time" class="classattr">
                                <div class="attr variable">
            <span class="name">phase_start_time</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.phase_start_time"></a>
    
    

                            </div>
                            <div id="TransmutationState.nigredo_duration" class="classattr">
                                <div class="attr variable">
            <span class="name">nigredo_duration</span><span class="annotation">: float</span>        =
<span class="default_value">0.0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.nigredo_duration"></a>
    
    

                            </div>
                            <div id="TransmutationState.albedo_duration" class="classattr">
                                <div class="attr variable">
            <span class="name">albedo_duration</span><span class="annotation">: float</span>        =
<span class="default_value">0.0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.albedo_duration"></a>
    
    

                            </div>
                            <div id="TransmutationState.rubedo_duration" class="classattr">
                                <div class="attr variable">
            <span class="name">rubedo_duration</span><span class="annotation">: float</span>        =
<span class="default_value">0.0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.rubedo_duration"></a>
    
    

                            </div>
                            <div id="TransmutationState.transmutation_count" class="classattr">
                                <div class="attr variable">
            <span class="name">transmutation_count</span><span class="annotation">: int</span>        =
<span class="default_value">0</span>

        
    </div>
    <a class="headerlink" href="#TransmutationState.transmutation_count"></a>
    
    

                            </div>
                            <div id="TransmutationState.to_dict" class="classattr">
                                        <input id="TransmutationState.to_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_dict</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="TransmutationState.to_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TransmutationState.to_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TransmutationState.to_dict-89"><a href="#TransmutationState.to_dict-89"><span class="linenos"> 89</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="TransmutationState.to_dict-90"><a href="#TransmutationState.to_dict-90"><span class="linenos"> 90</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Serializa estado a diccionario.&quot;&quot;&quot;</span>
</span><span id="TransmutationState.to_dict-91"><a href="#TransmutationState.to_dict-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="TransmutationState.to_dict-92"><a href="#TransmutationState.to_dict-92"><span class="linenos"> 92</span></a>            <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_phase</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="TransmutationState.to_dict-93"><a href="#TransmutationState.to_dict-93"><span class="linenos"> 93</span></a>            <span class="s1">&#39;nigredo_samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">nigredo_samples</span><span class="p">,</span>
</span><span id="TransmutationState.to_dict-94"><a href="#TransmutationState.to_dict-94"><span class="linenos"> 94</span></a>            <span class="s1">&#39;albedo_samples&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">albedo_samples</span><span class="p">,</span>
</span><span id="TransmutationState.to_dict-95"><a href="#TransmutationState.to_dict-95"><span class="linenos"> 95</span></a>            <span class="s1">&#39;rubedo_predictions&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubedo_predictions</span><span class="p">,</span>
</span><span id="TransmutationState.to_dict-96"><a href="#TransmutationState.to_dict-96"><span class="linenos"> 96</span></a>            <span class="s1">&#39;noise_removed_percent&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">noise_removed_percent</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="TransmutationState.to_dict-97"><a href="#TransmutationState.to_dict-97"><span class="linenos"> 97</span></a>            <span class="s1">&#39;prediction_confidence&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prediction_confidence</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="TransmutationState.to_dict-98"><a href="#TransmutationState.to_dict-98"><span class="linenos"> 98</span></a>            <span class="s1">&#39;transmutation_count&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">transmutation_count</span><span class="p">,</span>
</span><span id="TransmutationState.to_dict-99"><a href="#TransmutationState.to_dict-99"><span class="linenos"> 99</span></a>            <span class="s1">&#39;durations&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="TransmutationState.to_dict-100"><a href="#TransmutationState.to_dict-100"><span class="linenos">100</span></a>                <span class="s1">&#39;nigredo_ms&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nigredo_duration</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="TransmutationState.to_dict-101"><a href="#TransmutationState.to_dict-101"><span class="linenos">101</span></a>                <span class="s1">&#39;albedo_ms&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">albedo_duration</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="TransmutationState.to_dict-102"><a href="#TransmutationState.to_dict-102"><span class="linenos">102</span></a>                <span class="s1">&#39;rubedo_ms&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rubedo_duration</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="TransmutationState.to_dict-103"><a href="#TransmutationState.to_dict-103"><span class="linenos">103</span></a>            <span class="p">}</span>
</span><span id="TransmutationState.to_dict-104"><a href="#TransmutationState.to_dict-104"><span class="linenos">104</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Serializa estado a diccionario.</p>
</div>


                            </div>
                </section>
                <section id="KalmanFilter">
                            <input id="KalmanFilter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">KalmanFilter</span>:

                <label class="view-source-button" for="KalmanFilter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KalmanFilter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KalmanFilter-131"><a href="#KalmanFilter-131"><span class="linenos">131</span></a><span class="k">class</span><span class="w"> </span><span class="nc">KalmanFilter</span><span class="p">:</span>
</span><span id="KalmanFilter-132"><a href="#KalmanFilter-132"><span class="linenos">132</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KalmanFilter-133"><a href="#KalmanFilter-133"><span class="linenos">133</span></a><span class="sd">    Filtro de Kalman simplificado para purificaciÃ³n de seÃ±ales.</span>
</span><span id="KalmanFilter-134"><a href="#KalmanFilter-134"><span class="linenos">134</span></a><span class="sd">    </span>
</span><span id="KalmanFilter-135"><a href="#KalmanFilter-135"><span class="linenos">135</span></a><span class="sd">    &quot;El Mercurio FilosÃ³fico&quot; - Extrae la esencia de la materia prima.</span>
</span><span id="KalmanFilter-136"><a href="#KalmanFilter-136"><span class="linenos">136</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="KalmanFilter-137"><a href="#KalmanFilter-137"><span class="linenos">137</span></a>    
</span><span id="KalmanFilter-138"><a href="#KalmanFilter-138"><span class="linenos">138</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">measurement_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="KalmanFilter-139"><a href="#KalmanFilter-139"><span class="linenos">139</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KalmanFilter-140"><a href="#KalmanFilter-140"><span class="linenos">140</span></a><span class="sd">        Args:</span>
</span><span id="KalmanFilter-141"><a href="#KalmanFilter-141"><span class="linenos">141</span></a><span class="sd">            process_noise: Q - Varianza del proceso</span>
</span><span id="KalmanFilter-142"><a href="#KalmanFilter-142"><span class="linenos">142</span></a><span class="sd">            measurement_noise: R - Varianza de la mediciÃ³n</span>
</span><span id="KalmanFilter-143"><a href="#KalmanFilter-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KalmanFilter-144"><a href="#KalmanFilter-144"><span class="linenos">144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">process_noise</span>
</span><span id="KalmanFilter-145"><a href="#KalmanFilter-145"><span class="linenos">145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">=</span> <span class="n">measurement_noise</span>
</span><span id="KalmanFilter-146"><a href="#KalmanFilter-146"><span class="linenos">146</span></a>        
</span><span id="KalmanFilter-147"><a href="#KalmanFilter-147"><span class="linenos">147</span></a>        <span class="c1"># Estado inicial</span>
</span><span id="KalmanFilter-148"><a href="#KalmanFilter-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># EstimaciÃ³n del estado</span>
</span><span id="KalmanFilter-149"><a href="#KalmanFilter-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Covarianza del error</span>
</span><span id="KalmanFilter-150"><a href="#KalmanFilter-150"><span class="linenos">150</span></a>        
</span><span id="KalmanFilter-151"><a href="#KalmanFilter-151"><span class="linenos">151</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">measurement</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="KalmanFilter-152"><a href="#KalmanFilter-152"><span class="linenos">152</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KalmanFilter-153"><a href="#KalmanFilter-153"><span class="linenos">153</span></a><span class="sd">        Actualiza el filtro con una nueva mediciÃ³n.</span>
</span><span id="KalmanFilter-154"><a href="#KalmanFilter-154"><span class="linenos">154</span></a><span class="sd">        </span>
</span><span id="KalmanFilter-155"><a href="#KalmanFilter-155"><span class="linenos">155</span></a><span class="sd">        Args:</span>
</span><span id="KalmanFilter-156"><a href="#KalmanFilter-156"><span class="linenos">156</span></a><span class="sd">            measurement: Valor medido (ruidoso)</span>
</span><span id="KalmanFilter-157"><a href="#KalmanFilter-157"><span class="linenos">157</span></a><span class="sd">            </span>
</span><span id="KalmanFilter-158"><a href="#KalmanFilter-158"><span class="linenos">158</span></a><span class="sd">        Returns:</span>
</span><span id="KalmanFilter-159"><a href="#KalmanFilter-159"><span class="linenos">159</span></a><span class="sd">            Valor filtrado (purificado)</span>
</span><span id="KalmanFilter-160"><a href="#KalmanFilter-160"><span class="linenos">160</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KalmanFilter-161"><a href="#KalmanFilter-161"><span class="linenos">161</span></a>        <span class="c1"># PredicciÃ³n (en este caso simple, estado = estado anterior)</span>
</span><span id="KalmanFilter-162"><a href="#KalmanFilter-162"><span class="linenos">162</span></a>        <span class="n">x_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="KalmanFilter-163"><a href="#KalmanFilter-163"><span class="linenos">163</span></a>        <span class="n">P_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Q</span>
</span><span id="KalmanFilter-164"><a href="#KalmanFilter-164"><span class="linenos">164</span></a>        
</span><span id="KalmanFilter-165"><a href="#KalmanFilter-165"><span class="linenos">165</span></a>        <span class="c1"># ActualizaciÃ³n</span>
</span><span id="KalmanFilter-166"><a href="#KalmanFilter-166"><span class="linenos">166</span></a>        <span class="n">K</span> <span class="o">=</span> <span class="n">P_pred</span> <span class="o">/</span> <span class="p">(</span><span class="n">P_pred</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span><span class="p">)</span>  <span class="c1"># Ganancia de Kalman</span>
</span><span id="KalmanFilter-167"><a href="#KalmanFilter-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_pred</span> <span class="o">+</span> <span class="n">K</span> <span class="o">*</span> <span class="p">(</span><span class="n">measurement</span> <span class="o">-</span> <span class="n">x_pred</span><span class="p">)</span>
</span><span id="KalmanFilter-168"><a href="#KalmanFilter-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">K</span><span class="p">)</span> <span class="o">*</span> <span class="n">P_pred</span>
</span><span id="KalmanFilter-169"><a href="#KalmanFilter-169"><span class="linenos">169</span></a>        
</span><span id="KalmanFilter-170"><a href="#KalmanFilter-170"><span class="linenos">170</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="KalmanFilter-171"><a href="#KalmanFilter-171"><span class="linenos">171</span></a>    
</span><span id="KalmanFilter-172"><a href="#KalmanFilter-172"><span class="linenos">172</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">filter_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="KalmanFilter-173"><a href="#KalmanFilter-173"><span class="linenos">173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KalmanFilter-174"><a href="#KalmanFilter-174"><span class="linenos">174</span></a><span class="sd">        Filtra una secuencia completa.</span>
</span><span id="KalmanFilter-175"><a href="#KalmanFilter-175"><span class="linenos">175</span></a><span class="sd">        </span>
</span><span id="KalmanFilter-176"><a href="#KalmanFilter-176"><span class="linenos">176</span></a><span class="sd">        Args:</span>
</span><span id="KalmanFilter-177"><a href="#KalmanFilter-177"><span class="linenos">177</span></a><span class="sd">            data: Array de datos crudos</span>
</span><span id="KalmanFilter-178"><a href="#KalmanFilter-178"><span class="linenos">178</span></a><span class="sd">            </span>
</span><span id="KalmanFilter-179"><a href="#KalmanFilter-179"><span class="linenos">179</span></a><span class="sd">        Returns:</span>
</span><span id="KalmanFilter-180"><a href="#KalmanFilter-180"><span class="linenos">180</span></a><span class="sd">            Array de datos filtrados</span>
</span><span id="KalmanFilter-181"><a href="#KalmanFilter-181"><span class="linenos">181</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KalmanFilter-182"><a href="#KalmanFilter-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="KalmanFilter-183"><a href="#KalmanFilter-183"><span class="linenos">183</span></a>        <span class="n">filtered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="KalmanFilter-184"><a href="#KalmanFilter-184"><span class="linenos">184</span></a>        
</span><span id="KalmanFilter-185"><a href="#KalmanFilter-185"><span class="linenos">185</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span id="KalmanFilter-186"><a href="#KalmanFilter-186"><span class="linenos">186</span></a>            <span class="n">filtered</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
</span><span id="KalmanFilter-187"><a href="#KalmanFilter-187"><span class="linenos">187</span></a>            
</span><span id="KalmanFilter-188"><a href="#KalmanFilter-188"><span class="linenos">188</span></a>        <span class="k">return</span> <span class="n">filtered</span>
</span><span id="KalmanFilter-189"><a href="#KalmanFilter-189"><span class="linenos">189</span></a>    
</span><span id="KalmanFilter-190"><a href="#KalmanFilter-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KalmanFilter-191"><a href="#KalmanFilter-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reinicia el filtro a estado inicial.&quot;&quot;&quot;</span>
</span><span id="KalmanFilter-192"><a href="#KalmanFilter-192"><span class="linenos">192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="KalmanFilter-193"><a href="#KalmanFilter-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="mf">1.0</span>
</span></pre></div>


            <div class="docstring"><p>Filtro de Kalman simplificado para purificaciÃ³n de seÃ±ales.</p>

<p>"El Mercurio FilosÃ³fico" - Extrae la esencia de la materia prima.</p>
</div>


                            <div id="KalmanFilter.__init__" class="classattr">
                                        <input id="KalmanFilter.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">KalmanFilter</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">process_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span>, </span><span class="param"><span class="n">measurement_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span></span>)</span>

                <label class="view-source-button" for="KalmanFilter.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KalmanFilter.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KalmanFilter.__init__-138"><a href="#KalmanFilter.__init__-138"><span class="linenos">138</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">measurement_noise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="KalmanFilter.__init__-139"><a href="#KalmanFilter.__init__-139"><span class="linenos">139</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KalmanFilter.__init__-140"><a href="#KalmanFilter.__init__-140"><span class="linenos">140</span></a><span class="sd">        Args:</span>
</span><span id="KalmanFilter.__init__-141"><a href="#KalmanFilter.__init__-141"><span class="linenos">141</span></a><span class="sd">            process_noise: Q - Varianza del proceso</span>
</span><span id="KalmanFilter.__init__-142"><a href="#KalmanFilter.__init__-142"><span class="linenos">142</span></a><span class="sd">            measurement_noise: R - Varianza de la mediciÃ³n</span>
</span><span id="KalmanFilter.__init__-143"><a href="#KalmanFilter.__init__-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KalmanFilter.__init__-144"><a href="#KalmanFilter.__init__-144"><span class="linenos">144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">process_noise</span>
</span><span id="KalmanFilter.__init__-145"><a href="#KalmanFilter.__init__-145"><span class="linenos">145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">=</span> <span class="n">measurement_noise</span>
</span><span id="KalmanFilter.__init__-146"><a href="#KalmanFilter.__init__-146"><span class="linenos">146</span></a>        
</span><span id="KalmanFilter.__init__-147"><a href="#KalmanFilter.__init__-147"><span class="linenos">147</span></a>        <span class="c1"># Estado inicial</span>
</span><span id="KalmanFilter.__init__-148"><a href="#KalmanFilter.__init__-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># EstimaciÃ³n del estado</span>
</span><span id="KalmanFilter.__init__-149"><a href="#KalmanFilter.__init__-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Covarianza del error</span>
</span></pre></div>


            <div class="docstring"><p>Args:
    process_noise: Q - Varianza del proceso
    measurement_noise: R - Varianza de la mediciÃ³n</p>
</div>


                            </div>
                            <div id="KalmanFilter.Q" class="classattr">
                                <div class="attr variable">
            <span class="name">Q</span>

        
    </div>
    <a class="headerlink" href="#KalmanFilter.Q"></a>
    
    

                            </div>
                            <div id="KalmanFilter.R" class="classattr">
                                <div class="attr variable">
            <span class="name">R</span>

        
    </div>
    <a class="headerlink" href="#KalmanFilter.R"></a>
    
    

                            </div>
                            <div id="KalmanFilter.x" class="classattr">
                                <div class="attr variable">
            <span class="name">x</span>

        
    </div>
    <a class="headerlink" href="#KalmanFilter.x"></a>
    
    

                            </div>
                            <div id="KalmanFilter.P" class="classattr">
                                <div class="attr variable">
            <span class="name">P</span>

        
    </div>
    <a class="headerlink" href="#KalmanFilter.P"></a>
    
    

                            </div>
                            <div id="KalmanFilter.update" class="classattr">
                                        <input id="KalmanFilter.update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">measurement</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="KalmanFilter.update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KalmanFilter.update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KalmanFilter.update-151"><a href="#KalmanFilter.update-151"><span class="linenos">151</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">measurement</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="KalmanFilter.update-152"><a href="#KalmanFilter.update-152"><span class="linenos">152</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KalmanFilter.update-153"><a href="#KalmanFilter.update-153"><span class="linenos">153</span></a><span class="sd">        Actualiza el filtro con una nueva mediciÃ³n.</span>
</span><span id="KalmanFilter.update-154"><a href="#KalmanFilter.update-154"><span class="linenos">154</span></a><span class="sd">        </span>
</span><span id="KalmanFilter.update-155"><a href="#KalmanFilter.update-155"><span class="linenos">155</span></a><span class="sd">        Args:</span>
</span><span id="KalmanFilter.update-156"><a href="#KalmanFilter.update-156"><span class="linenos">156</span></a><span class="sd">            measurement: Valor medido (ruidoso)</span>
</span><span id="KalmanFilter.update-157"><a href="#KalmanFilter.update-157"><span class="linenos">157</span></a><span class="sd">            </span>
</span><span id="KalmanFilter.update-158"><a href="#KalmanFilter.update-158"><span class="linenos">158</span></a><span class="sd">        Returns:</span>
</span><span id="KalmanFilter.update-159"><a href="#KalmanFilter.update-159"><span class="linenos">159</span></a><span class="sd">            Valor filtrado (purificado)</span>
</span><span id="KalmanFilter.update-160"><a href="#KalmanFilter.update-160"><span class="linenos">160</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KalmanFilter.update-161"><a href="#KalmanFilter.update-161"><span class="linenos">161</span></a>        <span class="c1"># PredicciÃ³n (en este caso simple, estado = estado anterior)</span>
</span><span id="KalmanFilter.update-162"><a href="#KalmanFilter.update-162"><span class="linenos">162</span></a>        <span class="n">x_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="KalmanFilter.update-163"><a href="#KalmanFilter.update-163"><span class="linenos">163</span></a>        <span class="n">P_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Q</span>
</span><span id="KalmanFilter.update-164"><a href="#KalmanFilter.update-164"><span class="linenos">164</span></a>        
</span><span id="KalmanFilter.update-165"><a href="#KalmanFilter.update-165"><span class="linenos">165</span></a>        <span class="c1"># ActualizaciÃ³n</span>
</span><span id="KalmanFilter.update-166"><a href="#KalmanFilter.update-166"><span class="linenos">166</span></a>        <span class="n">K</span> <span class="o">=</span> <span class="n">P_pred</span> <span class="o">/</span> <span class="p">(</span><span class="n">P_pred</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span><span class="p">)</span>  <span class="c1"># Ganancia de Kalman</span>
</span><span id="KalmanFilter.update-167"><a href="#KalmanFilter.update-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_pred</span> <span class="o">+</span> <span class="n">K</span> <span class="o">*</span> <span class="p">(</span><span class="n">measurement</span> <span class="o">-</span> <span class="n">x_pred</span><span class="p">)</span>
</span><span id="KalmanFilter.update-168"><a href="#KalmanFilter.update-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">K</span><span class="p">)</span> <span class="o">*</span> <span class="n">P_pred</span>
</span><span id="KalmanFilter.update-169"><a href="#KalmanFilter.update-169"><span class="linenos">169</span></a>        
</span><span id="KalmanFilter.update-170"><a href="#KalmanFilter.update-170"><span class="linenos">170</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span></pre></div>


            <div class="docstring"><p>Actualiza el filtro con una nueva mediciÃ³n.</p>

<p>Args:
    measurement: Valor medido (ruidoso)</p>

<p>Returns:
    Valor filtrado (purificado)</p>
</div>


                            </div>
                            <div id="KalmanFilter.filter_sequence" class="classattr">
                                        <input id="KalmanFilter.filter_sequence-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">filter_sequence</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>:</span></span>

                <label class="view-source-button" for="KalmanFilter.filter_sequence-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KalmanFilter.filter_sequence"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KalmanFilter.filter_sequence-172"><a href="#KalmanFilter.filter_sequence-172"><span class="linenos">172</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">filter_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="KalmanFilter.filter_sequence-173"><a href="#KalmanFilter.filter_sequence-173"><span class="linenos">173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="KalmanFilter.filter_sequence-174"><a href="#KalmanFilter.filter_sequence-174"><span class="linenos">174</span></a><span class="sd">        Filtra una secuencia completa.</span>
</span><span id="KalmanFilter.filter_sequence-175"><a href="#KalmanFilter.filter_sequence-175"><span class="linenos">175</span></a><span class="sd">        </span>
</span><span id="KalmanFilter.filter_sequence-176"><a href="#KalmanFilter.filter_sequence-176"><span class="linenos">176</span></a><span class="sd">        Args:</span>
</span><span id="KalmanFilter.filter_sequence-177"><a href="#KalmanFilter.filter_sequence-177"><span class="linenos">177</span></a><span class="sd">            data: Array de datos crudos</span>
</span><span id="KalmanFilter.filter_sequence-178"><a href="#KalmanFilter.filter_sequence-178"><span class="linenos">178</span></a><span class="sd">            </span>
</span><span id="KalmanFilter.filter_sequence-179"><a href="#KalmanFilter.filter_sequence-179"><span class="linenos">179</span></a><span class="sd">        Returns:</span>
</span><span id="KalmanFilter.filter_sequence-180"><a href="#KalmanFilter.filter_sequence-180"><span class="linenos">180</span></a><span class="sd">            Array de datos filtrados</span>
</span><span id="KalmanFilter.filter_sequence-181"><a href="#KalmanFilter.filter_sequence-181"><span class="linenos">181</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="KalmanFilter.filter_sequence-182"><a href="#KalmanFilter.filter_sequence-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="KalmanFilter.filter_sequence-183"><a href="#KalmanFilter.filter_sequence-183"><span class="linenos">183</span></a>        <span class="n">filtered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="KalmanFilter.filter_sequence-184"><a href="#KalmanFilter.filter_sequence-184"><span class="linenos">184</span></a>        
</span><span id="KalmanFilter.filter_sequence-185"><a href="#KalmanFilter.filter_sequence-185"><span class="linenos">185</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span id="KalmanFilter.filter_sequence-186"><a href="#KalmanFilter.filter_sequence-186"><span class="linenos">186</span></a>            <span class="n">filtered</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
</span><span id="KalmanFilter.filter_sequence-187"><a href="#KalmanFilter.filter_sequence-187"><span class="linenos">187</span></a>            
</span><span id="KalmanFilter.filter_sequence-188"><a href="#KalmanFilter.filter_sequence-188"><span class="linenos">188</span></a>        <span class="k">return</span> <span class="n">filtered</span>
</span></pre></div>


            <div class="docstring"><p>Filtra una secuencia completa.</p>

<p>Args:
    data: Array de datos crudos</p>

<p>Returns:
    Array de datos filtrados</p>
</div>


                            </div>
                            <div id="KalmanFilter.reset" class="classattr">
                                        <input id="KalmanFilter.reset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="KalmanFilter.reset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#KalmanFilter.reset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="KalmanFilter.reset-190"><a href="#KalmanFilter.reset-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="KalmanFilter.reset-191"><a href="#KalmanFilter.reset-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reinicia el filtro a estado inicial.&quot;&quot;&quot;</span>
</span><span id="KalmanFilter.reset-192"><a href="#KalmanFilter.reset-192"><span class="linenos">192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="KalmanFilter.reset-193"><a href="#KalmanFilter.reset-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="mf">1.0</span>
</span></pre></div>


            <div class="docstring"><p>Reinicia el filtro a estado inicial.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>